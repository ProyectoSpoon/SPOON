-- CONSULTA 1: Información básica de tablas
SELECT 
    schemaname,
    tablename,
    tableowner,
    (SELECT COUNT(*) 
     FROM information_schema.columns 
     WHERE table_schema = schemaname 
     AND table_name = tablename) as num_columnas,
    (SELECT COUNT(*) 
     FROM information_schema.table_constraints tc
     WHERE tc.table_schema = schemaname 
     AND tc.table_name = tablename 
     AND tc.constraint_type = 'FOREIGN KEY') as num_foreign_keys,
    obj_description(pgc.oid) as comentario_tabla
FROM pg_tables pt
LEFT JOIN pg_class pgc ON pgc.relname = pt.tablename
LEFT JOIN pg_namespace pgn ON pgn.oid = pgc.relnamespace AND pgn.nspname = pt.schemaname
WHERE schemaname NOT IN ('information_schema', 'pg_catalog', 'pg_toast')
ORDER BY schemaname, tablename;


| schemaname | tablename                      | tableowner              | num_columnas | num_foreign_keys | comentario_tabla                                                                                           |
| ---------- | ------------------------------ | ----------------------- | ------------ | ---------------- | ---------------------------------------------------------------------------------------------------------- |
| auth       | audit_log_entries              | supabase_auth_admin     | 5            | 0                | Auth: Audit trail for user actions.                                                                        |
| auth       | flow_state                     | supabase_auth_admin     | 12           | 0                | stores metadata for pkce logins                                                                            |
| auth       | identities                     | supabase_auth_admin     | 9            | 1                | Auth: Stores identities associated to a user.                                                              |
| auth       | instances                      | supabase_auth_admin     | 5            | 0                | Auth: Manages users across multiple sites.                                                                 |
| auth       | mfa_amr_claims                 | supabase_auth_admin     | 5            | 1                | auth: stores authenticator method reference claims for multi factor authentication                         |
| auth       | mfa_challenges                 | supabase_auth_admin     | 7            | 1                | auth: stores metadata about challenge requests made                                                        |
| auth       | mfa_factors                    | supabase_auth_admin     | 13           | 1                | auth: stores metadata about factors                                                                        |
| auth       | oauth_authorizations           | supabase_auth_admin     | 17           | 2                | null                                                                                                       |
| auth       | oauth_client_states            | supabase_auth_admin     | 4            | 0                | Stores OAuth states for third-party provider authentication flows where Supabase acts as the OAuth client. |
| auth       | oauth_clients                  | supabase_auth_admin     | 12           | 0                | null                                                                                                       |
| auth       | oauth_consents                 | supabase_auth_admin     | 6            | 2                | null                                                                                                       |
| auth       | one_time_tokens                | supabase_auth_admin     | 7            | 1                | null                                                                                                       |
| auth       | refresh_tokens                 | supabase_auth_admin     | 9            | 1                | Auth: Store of tokens used to refresh JWT tokens once they expire.                                         |
| auth       | saml_providers                 | supabase_auth_admin     | 9            | 1                | Auth: Manages SAML Identity Provider connections.                                                          |
| auth       | saml_relay_states              | supabase_auth_admin     | 8            | 2                | Auth: Contains SAML Relay State information for each Service Provider initiated login.                     |
| auth       | schema_migrations              | supabase_auth_admin     | 1            | 0                | null                                                                                                       |
| auth       | schema_migrations              | supabase_auth_admin     | 1            | 0                | Auth: Manages updates to the auth system.                                                                  |
| auth       | sessions                       | supabase_auth_admin     | 15           | 2                | Auth: Stores session data associated to a user.                                                            |
| auth       | sso_domains                    | supabase_auth_admin     | 5            | 1                | Auth: Manages SSO email address domain mapping to an SSO Identity Provider.                                |
| auth       | sso_providers                  | supabase_auth_admin     | 5            | 0                | Auth: Manages SSO identity provider information; see saml_providers for SAML.                              |
| auth       | users                          | supabase_auth_admin     | 35           | 0                | Auth: Stores user login data within a secure schema.                                                       |
| auth       | users                          | supabase_auth_admin     | 35           | 0                | User profiles synchronized with auth.users                                                                 |
| cron       | job                            | supabase_admin          | 9            | 0                | null                                                                                                       |
| cron       | job_run_details                | supabase_admin          | 10           | 0                | null                                                                                                       |
| public     | ajustes_contables_caja         | postgres                | 10           | 4                | null                                                                                                       |
| public     | audit_caja_sesiones            | postgres                | 13           | 2                | null                                                                                                       |
| public     | audit_log                      | postgres                | 7            | 1                | null                                                                                                       |
| public     | authorization_requests         | postgres                | 14           | 3                | null                                                                                                       |
| public     | caja_sesiones                  | postgres                | 15           | 2                | null                                                                                                       |
| public     | cities                         | postgres                | 10           | 1                | null                                                                                                       |
| public     | cobros_mesa                    | postgres                | 8            | 1                | null                                                                                                       |
| public     | conciliaciones_caja            | postgres                | 14           | 3                | null                                                                                                       |
| public     | countries                      | postgres                | 9            | 0                | null                                                                                                       |
| public     | cuisine_types                  | postgres                | 9            | 0                | null                                                                                                       |
| public     | daily_menu_selections          | postgres                | 8            | 3                | null                                                                                                       |
| public     | daily_menus                    | postgres                | 11           | 1                | null                                                                                                       |
| public     | daily_special_activations      | postgres                | 10           | 2                | null                                                                                                       |
| public     | delivery_orders                | postgres                | 19           | 3                | null                                                                                                       |
| public     | delivery_personnel             | postgres                | 8            | 1                | null                                                                                                       |
| public     | departments                    | postgres                | 7            | 1                | null                                                                                                       |
| public     | facturas                       | postgres                | 21           | 4                | null                                                                                                       |
| public     | favorite_combinations          | postgres                | 9            | 5                | null                                                                                                       |
| public     | gastos_caja                    | postgres                | 9            | 2                | null                                                                                                       |
| public     | generated_combinations         | postgres                | 15           | 5                | null                                                                                                       |
| public     | generated_special_combinations | postgres                | 18           | 5                | null                                                                                                       |
| public     | items_orden_mesa               | postgres                | 10           | 3                | Items individuales de cada orden de mesa. Puede referenciar menú del día o platos especiales.              |
| public     | menu_template_products         | postgres                | 5            | 2                | null                                                                                                       |
| public     | menu_templates                 | postgres                | 6            | 1                | null                                                                                                       |
| public     | mesa_estado_audit              | postgres                | 6            | 2                | null                                                                                                       |
| public     | numeracion_facturas            | postgres                | 7            | 1                | null                                                                                                       |
| public     | ordenes_mesa                   | postgres                | 11           | 2                | Órdenes de mesa para el sistema dine-in. Cada registro representa una cuenta de mesa.                      |
| public     | permissions                    | postgres                | 7            | 0                | null                                                                                                       |
| public     | product_aliases                | postgres                | 7            | 1                | null                                                                                                       |
| public     | product_suggestions            | postgres                | 19           | 5                | null                                                                                                       |
| public     | profiles                       | postgres                | 4            | 1                | null                                                                                                       |
| public     | protein_quantities             | postgres                | 8            | 2                | null                                                                                                       |
| public     | restaurant_custom_roles        | postgres                | 8            | 2                | null                                                                                                       |
| public     | restaurant_favorites           | postgres                | 5            | 2                | null                                                                                                       |
| public     | restaurant_mesas               | postgres                | 9            | 1                | null                                                                                                       |
| public     | restaurant_product_usage       | postgres                | 11           | 2                | null                                                                                                       |
| public     | restaurant_role_configs        | postgres                | 11           | 5                | null                                                                                                       |
| public     | restaurants                    | postgres                | 25           | 5                | Restaurant information with RLS enabled                                                                    |
| public     | role_permissions               | postgres                | 6            | 2                | null                                                                                                       |
| public     | security_alerts                | postgres                | 12           | 3                | null                                                                                                       |
| public     | security_limits                | postgres                | 8            | 1                | null                                                                                                       |
| public     | security_policies              | postgres                | 15           | 1                | null                                                                                                       |
| public     | special_dish_selections        | postgres                | 9            | 2                | null                                                                                                       |
| public     | special_dishes                 | postgres                | 15           | 1                | null                                                                                                       |
| public     | special_protein_quantities     | postgres                | 12           | 2                | null                                                                                                       |
| public     | system_roles                   | postgres                | 6            | 0                | null                                                                                                       |
| public     | transacciones_caja             | postgres                | 12           | 4                | null                                                                                                       |
| public     | universal_categories           | postgres                | 10           | 0                | null                                                                                                       |
| public     | universal_products             | postgres                | 22           | 2                | null                                                                                                       |
| public     | user_profiles_app              | postgres                | 11           | 1                | null                                                                                                       |
| public     | user_roles                     | postgres                | 11           | 5                | null                                                                                                       |
| public     | users                          | postgres                | 11           | 1                | User profiles synchronized with auth.users                                                                 |
| public     | users                          | postgres                | 11           | 1                | Auth: Stores user login data within a secure schema.                                                       |
| realtime   | messages                       | supabase_realtime_admin | 8            | 0                | null                                                                                                       |
| realtime   | messages_2025_11_07            | supabase_admin          | 8            | 0                | null                                                                                                       |
| realtime   | messages_2025_11_08            | supabase_admin          | 8            | 0                | null                                                                                                       |
| realtime   | messages_2025_11_09            | supabase_admin          | 8            | 0                | null                                                                                                       |
| realtime   | messages_2025_11_10            | supabase_admin          | 8            | 0                | null                                                                                                       |
| realtime   | messages_2025_11_11            | supabase_admin          | 8            | 0                | null                                                                                                       |
| realtime   | schema_migrations              | supabase_admin          | 2            | 0                | null                                                                                                       |
| realtime   | schema_migrations              | supabase_admin          | 2            | 0                | Auth: Manages updates to the auth system.                                                                  |
| realtime   | subscription                   | supabase_admin          | 7            | 0                | null                                                                                                       |
| storage    | buckets                        | supabase_storage_admin  | 11           | 0                | null                                                                                                       |
| storage    | buckets_analytics              | supabase_storage_admin  | 7            | 0                | null                                                                                                       |
| storage    | buckets_vectors                | supabase_storage_admin  | 4            | 0                | null                                                                                                       |
| storage    | migrations                     | supabase_storage_admin  | 4            | 0                | null                                                                                                       |
| storage    | objects                        | supabase_storage_admin  | 13           | 1                | null                                                                                                       |
| storage    | prefixes                       | supabase_storage_admin  | 5            | 1                | null                                                                                                       |
| storage    | s3_multipart_uploads           | supabase_storage_admin  | 9            | 1                | null                                                                                                       |
| storage    | s3_multipart_uploads_parts     | supabase_storage_admin  | 10           | 2                | null                                                                                                       |
| storage    | vector_indexes                 | supabase_storage_admin  | 9            | 0                | null                                                                                                       |
| vault      | secrets                        | supabase_admin          | 8            | 0                | Table with encrypted `secret` column for storing sensitive information on disk.                            |


-- CONSULTA 2: Información de vistas
SELECT 
    schemaname,
    viewname,
    viewowner,
    definition
FROM pg_views
WHERE schemaname NOT IN ('information_schema', 'pg_catalog')
ORDER BY schemaname, viewname;

| schemaname | viewname                  | viewowner      | definition                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ---------- | ------------------------- | -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| extensions | pg_stat_statements        | postgres       |  SELECT userid,
    dbid,
    toplevel,
    queryid,
    query,
    plans,
    total_plan_time,
    min_plan_time,
    max_plan_time,
    mean_plan_time,
    stddev_plan_time,
    calls,
    total_exec_time,
    min_exec_time,
    max_exec_time,
    mean_exec_time,
    stddev_exec_time,
    rows,
    shared_blks_hit,
    shared_blks_read,
    shared_blks_dirtied,
    shared_blks_written,
    local_blks_hit,
    local_blks_read,
    local_blks_dirtied,
    local_blks_written,
    temp_blks_read,
    temp_blks_written,
    shared_blk_read_time,
    shared_blk_write_time,
    local_blk_read_time,
    local_blk_write_time,
    temp_blk_read_time,
    temp_blk_write_time,
    wal_records,
    wal_fpi,
    wal_bytes,
    jit_functions,
    jit_generation_time,
    jit_inlining_count,
    jit_inlining_time,
    jit_optimization_count,
    jit_optimization_time,
    jit_emission_count,
    jit_emission_time,
    jit_deform_count,
    jit_deform_time,
    stats_since,
    minmax_stats_since
   FROM pg_stat_statements(true) pg_stat_statements(userid, dbid, toplevel, queryid, query, plans, total_plan_time, min_plan_time, max_plan_time, mean_plan_time, stddev_plan_time, calls, total_exec_time, min_exec_time, max_exec_time, mean_exec_time, stddev_exec_time, rows, shared_blks_hit, shared_blks_read, shared_blks_dirtied, shared_blks_written, local_blks_hit, local_blks_read, local_blks_dirtied, local_blks_written, temp_blks_read, temp_blks_written, shared_blk_read_time, shared_blk_write_time, local_blk_read_time, local_blk_write_time, temp_blk_read_time, temp_blk_write_time, wal_records, wal_fpi, wal_bytes, jit_functions, jit_generation_time, jit_inlining_count, jit_inlining_time, jit_optimization_count, jit_optimization_time, jit_emission_count, jit_emission_time, jit_deform_count, jit_deform_time, stats_since, minmax_stats_since); |
| extensions | pg_stat_statements_info   | postgres       |  SELECT dealloc,
    stats_reset
   FROM pg_stat_statements_info() pg_stat_statements_info(dealloc, stats_reset);                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| public     | restaurants_with_location | postgres       |  SELECT r.id,
    r.owner_id,
    r.name,
    r.description,
    r.contact_phone,
    r.contact_email,
    r.cuisine_type,
    r.address,
    r.city,
    r.state,
    r.country,
    r.latitude,
    r.longitude,
    r.business_hours,
    r.logo_url,
    r.cover_image_url,
    r.setup_completed,
    r.setup_step,
    r.status,
    r.created_at,
    r.updated_at,
    r.cuisine_type_id,
    r.country_id,
    r.department_id,
    r.city_id,
    c.name AS country_name,
    c.code AS country_code,
    d.name AS department_name,
    d.code AS department_code,
    ct.name AS city_name,
    ct.latitude AS city_latitude,
    ct.longitude AS city_longitude
   FROM (((restaurants r
     LEFT JOIN countries c ON ((r.country_id = c.id)))
     LEFT JOIN departments d ON ((r.department_id = d.id)))
     LEFT JOIN cities ct ON ((r.city_id = ct.id)));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| public     | v_active_menus_today      | postgres       |  SELECT dm.id,
    dm.restaurant_id,
    r.name AS restaurant_name,
    dm.menu_price,
    dm.total_combinations_generated,
    dm.total_products_selected,
    dm.categories_configured,
    dm.created_at,
    dm.expires_at,
        CASE
            WHEN (dm.expires_at <= now()) THEN 'expired'::text
            WHEN (dm.expires_at <= (now() + '02:00:00'::interval)) THEN 'expiring_soon'::text
            ELSE 'active'::text
        END AS menu_status
   FROM (daily_menus dm
     JOIN restaurants r ON ((dm.restaurant_id = r.id)))
  WHERE (((dm.status)::text = 'active'::text) AND (dm.menu_date = CURRENT_DATE));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public     | vw_mesas_inconsistentes   | postgres       |  SELECT m.id,
    m.numero,
    m.estado,
    m.updated_at
   FROM (restaurant_mesas m
     LEFT JOIN ordenes_mesa o ON (((o.mesa_id = m.id) AND ((o.estado)::text = 'activa'::text))))
  WHERE (((m.estado)::text = 'ocupada'::text) AND (o.id IS NULL));                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| vault      | decrypted_secrets         | supabase_admin |  SELECT id,
    name,
    description,
    secret,
    convert_from(vault._crypto_aead_det_decrypt(message => decode(secret, 'base64'::text), additional => convert_to((id)::text, 'utf8'::name), key_id => (0)::bigint, context => '\x7067736f6469756d'::bytea, nonce => nonce), 'utf8'::name) AS decrypted_secret,
    key_id,
    nonce,
    created_at,
    updated_at
   FROM vault.secrets s;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |


-- CONSULTA 3: Información de funciones
SELECT 
    n.nspname as schema_name,
    p.proname as function_name,
    pg_get_function_result(p.oid) as return_type,
    pg_get_function_arguments(p.oid) as arguments,
    CASE p.prokind
        WHEN 'f' THEN 'function'
        WHEN 'p' THEN 'procedure'
        WHEN 'a' THEN 'aggregate'
        WHEN 'w' THEN 'window'
    END as function_type,
    obj_description(p.oid) as description
FROM pg_proc p
JOIN pg_namespace n ON p.pronamespace = n.oid
WHERE n.nspname NOT IN ('information_schema', 'pg_catalog', 'pg_toast', 'pg_temp_1', 'pg_toast_temp_1')
AND p.prokind IN ('f', 'p', 'a', 'w')
ORDER BY schema_name, function_name;

| schema_name    | function_name                                | return_type                                                                                                                                                                                                                                        | arguments                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function_type | description                                                                                                                            |
| -------------- | -------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| auth           | email                                        | text                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | Deprecated. Use auth.jwt() -> 'email' instead.                                                                                         |
| auth           | jwt                                          | jsonb                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| auth           | role                                         | text                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | Deprecated. Use auth.jwt() -> 'role' instead.                                                                                          |
| auth           | uid                                          | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | Deprecated. Use auth.jwt() -> 'sub' instead.                                                                                           |
| cron           | alter_job                                    | void                                                                                                                                                                                                                                               | job_id bigint, schedule text DEFAULT NULL::text, command text DEFAULT NULL::text, database text DEFAULT NULL::text, username text DEFAULT NULL::text, active boolean DEFAULT NULL::boolean                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | function      | Alter the job identified by job_id. Any option left as NULL will not be modified.                                                      |
| cron           | job_cache_invalidate                         | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | invalidate job cache                                                                                                                   |
| cron           | schedule                                     | bigint                                                                                                                                                                                                                                             | job_name text, schedule text, command text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | function      | schedule a pg_cron job                                                                                                                 |
| cron           | schedule                                     | bigint                                                                                                                                                                                                                                             | schedule text, command text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | function      | schedule a pg_cron job                                                                                                                 |
| cron           | schedule_in_database                         | bigint                                                                                                                                                                                                                                             | job_name text, schedule text, command text, database text, username text DEFAULT NULL::text, active boolean DEFAULT true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | function      | schedule a pg_cron job                                                                                                                 |
| cron           | unschedule                                   | boolean                                                                                                                                                                                                                                            | job_id bigint                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | function      | unschedule a pg_cron job                                                                                                               |
| cron           | unschedule                                   | boolean                                                                                                                                                                                                                                            | job_name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | function      | unschedule a pg_cron job                                                                                                               |
| extensions     | armor                                        | text                                                                                                                                                                                                                                               | bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | function      | null                                                                                                                                   |
| extensions     | armor                                        | text                                                                                                                                                                                                                                               | bytea, text[], text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | function      | null                                                                                                                                   |
| extensions     | crypt                                        | text                                                                                                                                                                                                                                               | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | function      | null                                                                                                                                   |
| extensions     | dearmor                                      | bytea                                                                                                                                                                                                                                              | text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | function      | null                                                                                                                                   |
| extensions     | decrypt                                      | bytea                                                                                                                                                                                                                                              | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | function      | null                                                                                                                                   |
| extensions     | decrypt_iv                                   | bytea                                                                                                                                                                                                                                              | bytea, bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| extensions     | digest                                       | bytea                                                                                                                                                                                                                                              | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | function      | null                                                                                                                                   |
| extensions     | digest                                       | bytea                                                                                                                                                                                                                                              | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | function      | null                                                                                                                                   |
| extensions     | encrypt                                      | bytea                                                                                                                                                                                                                                              | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | function      | null                                                                                                                                   |
| extensions     | encrypt_iv                                   | bytea                                                                                                                                                                                                                                              | bytea, bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| extensions     | gen_random_bytes                             | bytea                                                                                                                                                                                                                                              | integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | function      | null                                                                                                                                   |
| extensions     | gen_random_uuid                              | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| extensions     | gen_salt                                     | text                                                                                                                                                                                                                                               | text, integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | function      | null                                                                                                                                   |
| extensions     | gen_salt                                     | text                                                                                                                                                                                                                                               | text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | function      | null                                                                                                                                   |
| extensions     | grant_pg_cron_access                         | event_trigger                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | Grants access to pg_cron                                                                                                               |
| extensions     | grant_pg_graphql_access                      | event_trigger                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | Grants access to pg_graphql                                                                                                            |
| extensions     | grant_pg_net_access                          | event_trigger                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | Grants access to pg_net                                                                                                                |
| extensions     | hmac                                         | bytea                                                                                                                                                                                                                                              | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | function      | null                                                                                                                                   |
| extensions     | hmac                                         | bytea                                                                                                                                                                                                                                              | text, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | function      | null                                                                                                                                   |
| extensions     | pg_stat_statements                           | SETOF record                                                                                                                                                                                                                                       | showtext boolean, OUT userid oid, OUT dbid oid, OUT toplevel boolean, OUT queryid bigint, OUT query text, OUT plans bigint, OUT total_plan_time double precision, OUT min_plan_time double precision, OUT max_plan_time double precision, OUT mean_plan_time double precision, OUT stddev_plan_time double precision, OUT calls bigint, OUT total_exec_time double precision, OUT min_exec_time double precision, OUT max_exec_time double precision, OUT mean_exec_time double precision, OUT stddev_exec_time double precision, OUT rows bigint, OUT shared_blks_hit bigint, OUT shared_blks_read bigint, OUT shared_blks_dirtied bigint, OUT shared_blks_written bigint, OUT local_blks_hit bigint, OUT local_blks_read bigint, OUT local_blks_dirtied bigint, OUT local_blks_written bigint, OUT temp_blks_read bigint, OUT temp_blks_written bigint, OUT shared_blk_read_time double precision, OUT shared_blk_write_time double precision, OUT local_blk_read_time double precision, OUT local_blk_write_time double precision, OUT temp_blk_read_time double precision, OUT temp_blk_write_time double precision, OUT wal_records bigint, OUT wal_fpi bigint, OUT wal_bytes numeric, OUT jit_functions bigint, OUT jit_generation_time double precision, OUT jit_inlining_count bigint, OUT jit_inlining_time double precision, OUT jit_optimization_count bigint, OUT jit_optimization_time double precision, OUT jit_emission_count bigint, OUT jit_emission_time double precision, OUT jit_deform_count bigint, OUT jit_deform_time double precision, OUT stats_since timestamp with time zone, OUT minmax_stats_since timestamp with time zone | function      | null                                                                                                                                   |
| extensions     | pg_stat_statements_info                      | record                                                                                                                                                                                                                                             | OUT dealloc bigint, OUT stats_reset timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | function      | null                                                                                                                                   |
| extensions     | pg_stat_statements_reset                     | timestamp with time zone                                                                                                                                                                                                                           | userid oid DEFAULT 0, dbid oid DEFAULT 0, queryid bigint DEFAULT 0, minmax_only boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | function      | null                                                                                                                                   |
| extensions     | pgp_armor_headers                            | SETOF record                                                                                                                                                                                                                                       | text, OUT key text, OUT value text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | function      | null                                                                                                                                   |
| extensions     | pgp_key_id                                   | text                                                                                                                                                                                                                                               | bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | function      | null                                                                                                                                   |
| extensions     | pgp_pub_decrypt                              | text                                                                                                                                                                                                                                               | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | function      | null                                                                                                                                   |
| extensions     | pgp_pub_decrypt                              | text                                                                                                                                                                                                                                               | bytea, bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | function      | null                                                                                                                                   |
| extensions     | pgp_pub_decrypt                              | text                                                                                                                                                                                                                                               | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | function      | null                                                                                                                                   |
| extensions     | pgp_pub_decrypt_bytea                        | bytea                                                                                                                                                                                                                                              | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | function      | null                                                                                                                                   |
| extensions     | pgp_pub_decrypt_bytea                        | bytea                                                                                                                                                                                                                                              | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | function      | null                                                                                                                                   |
| extensions     | pgp_pub_decrypt_bytea                        | bytea                                                                                                                                                                                                                                              | bytea, bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | function      | null                                                                                                                                   |
| extensions     | pgp_pub_encrypt                              | bytea                                                                                                                                                                                                                                              | text, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | function      | null                                                                                                                                   |
| extensions     | pgp_pub_encrypt                              | bytea                                                                                                                                                                                                                                              | text, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | function      | null                                                                                                                                   |
| extensions     | pgp_pub_encrypt_bytea                        | bytea                                                                                                                                                                                                                                              | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | function      | null                                                                                                                                   |
| extensions     | pgp_pub_encrypt_bytea                        | bytea                                                                                                                                                                                                                                              | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | function      | null                                                                                                                                   |
| extensions     | pgp_sym_decrypt                              | text                                                                                                                                                                                                                                               | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | function      | null                                                                                                                                   |
| extensions     | pgp_sym_decrypt                              | text                                                                                                                                                                                                                                               | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | function      | null                                                                                                                                   |
| extensions     | pgp_sym_decrypt_bytea                        | bytea                                                                                                                                                                                                                                              | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | function      | null                                                                                                                                   |
| extensions     | pgp_sym_decrypt_bytea                        | bytea                                                                                                                                                                                                                                              | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | function      | null                                                                                                                                   |
| extensions     | pgp_sym_encrypt                              | bytea                                                                                                                                                                                                                                              | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | function      | null                                                                                                                                   |
| extensions     | pgp_sym_encrypt                              | bytea                                                                                                                                                                                                                                              | text, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | function      | null                                                                                                                                   |
| extensions     | pgp_sym_encrypt_bytea                        | bytea                                                                                                                                                                                                                                              | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | function      | null                                                                                                                                   |
| extensions     | pgp_sym_encrypt_bytea                        | bytea                                                                                                                                                                                                                                              | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | function      | null                                                                                                                                   |
| extensions     | pgrst_ddl_watch                              | event_trigger                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| extensions     | pgrst_drop_watch                             | event_trigger                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| extensions     | set_graphql_placeholder                      | event_trigger                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | Reintroduces placeholder function for graphql_public.graphql                                                                           |
| extensions     | uuid_generate_v1                             | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| extensions     | uuid_generate_v1mc                           | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| extensions     | uuid_generate_v3                             | uuid                                                                                                                                                                                                                                               | namespace uuid, name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| extensions     | uuid_generate_v4                             | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| extensions     | uuid_generate_v5                             | uuid                                                                                                                                                                                                                                               | namespace uuid, name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| extensions     | uuid_nil                                     | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| extensions     | uuid_ns_dns                                  | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| extensions     | uuid_ns_oid                                  | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| extensions     | uuid_ns_url                                  | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| extensions     | uuid_ns_x500                                 | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| graphql        | _internal_resolve                            | jsonb                                                                                                                                                                                                                                              | query text, variables jsonb DEFAULT '{}'::jsonb, "operationName" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | function      | null                                                                                                                                   |
| graphql        | comment_directive                            | jsonb                                                                                                                                                                                                                                              | comment_ text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | function      | null                                                                                                                                   |
| graphql        | exception                                    | text                                                                                                                                                                                                                                               | message text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | function      | null                                                                                                                                   |
| graphql        | get_schema_version                           | integer                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| graphql        | increment_schema_version                     | event_trigger                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| graphql        | resolve                                      | jsonb                                                                                                                                                                                                                                              | query text, variables jsonb DEFAULT '{}'::jsonb, "operationName" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | function      | null                                                                                                                                   |
| graphql_public | graphql                                      | jsonb                                                                                                                                                                                                                                              | "operationName" text DEFAULT NULL::text, query text DEFAULT NULL::text, variables jsonb DEFAULT NULL::jsonb, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | function      | null                                                                                                                                   |
| pgbouncer      | get_auth                                     | TABLE(username text, password text)                                                                                                                                                                                                                | p_usename text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | function      | null                                                                                                                                   |
| public         | abrir_caja_atomico                           | json                                                                                                                                                                                                                                               | p_restaurant_id uuid, p_cajero_id uuid, p_monto_inicial integer, p_notas text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | function      | null                                                                                                                                   |
| public         | abrir_caja_atomico                           | jsonb                                                                                                                                                                                                                                              | p_restaurant_id uuid, p_monto_inicial integer, p_notas text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | function      | null                                                                                                                                   |
| public         | actualizar_estado_mesa                       | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | actualizar_fecha_actualizacion               | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | actualizar_monto_total_orden                 | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | audit_caja_sesiones_changes                  | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | audit_flag                                   | boolean                                                                                                                                                                                                                                            | name text, default_bool boolean                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | auto_libera_mesa_sin_orden                   | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | calcular_diferencia_caja                     | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | calcular_saldo_final_automatico              | integer                                                                                                                                                                                                                                            | p_sesion_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | function      | null                                                                                                                                   |
| public         | cerrar_caja_atomico                          | jsonb                                                                                                                                                                                                                                              | p_sesion_id uuid, p_notas text DEFAULT NULL::text, p_saldo_final_reportado numeric DEFAULT NULL::numeric                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | function      | null                                                                                                                                   |
| public         | cerrar_caja_automatico                       | jsonb                                                                                                                                                                                                                                              | p_sesion_id uuid, p_notas text DEFAULT 'Cierre automático'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | function      | null                                                                                                                                   |
| public         | cerrar_cajas_pendientes                      | json                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | Cierra automáticamente sesiones de caja antiguas (forzado si hay pendientes) y añade nota en cierre.                                   |
| public         | conciliar_caja_fisica                        | jsonb                                                                                                                                                                                                                                              | p_sesion_id uuid, p_conteo_fisico integer, p_justificacion text, p_conciliado_por uuid DEFAULT auth.uid()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| public         | create_custom_role                           | json                                                                                                                                                                                                                                               | p_restaurant_id uuid, p_name text, p_description text DEFAULT NULL::text, p_permissions text[] DEFAULT NULL::text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | function      | Crea roles personalizados con permisos específicos para un restaurante.                                                                |
| public         | create_user_direct                           | json                                                                                                                                                                                                                                               | p_email text, p_first_name text, p_last_name text, p_phone text DEFAULT NULL::text, p_role_id text DEFAULT NULL::text, p_restaurant_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | function      | Solucion crítica: Crea usuarios directamente sin restricciones RLS. Genera contraseña temporal segura.                                 |
| public         | enforce_mesa_con_orden_activa                | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | expire_daily_menus                           | void                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | expire_old_menus                             | void                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | fn_audit_log                                 | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | generar_numero_factura                       | text                                                                                                                                                                                                                                               | p_restaurant_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | function      | null                                                                                                                                   |
| public         | get_available_roles                          | TABLE(id uuid, name text, type text, description text, is_system boolean)                                                                                                                                                                          | p_restaurant_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | function      | Retorna todos los roles disponibles: sistema + personalizados del restaurante. Corregido: ordena por nombre en lugar de display_order. |
| public         | get_available_specials_today                 | TABLE(special_dish_id uuid, dish_name character varying, dish_description text, dish_price integer, daily_price_override integer, max_quantity integer, current_sold integer, notes text, combinations_count integer)                              | p_restaurant_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | function      | null                                                                                                                                   |
| public         | get_caja_sesion_history                      | TABLE(operation_type character varying, old_values jsonb, new_values jsonb, changed_fields text[], user_id uuid, created_at timestamp with time zone)                                                                                              | sesion_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | function      | null                                                                                                                                   |
| public         | get_current_user_id                          | uuid                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | get_menu_with_products                       | json                                                                                                                                                                                                                                               | menu_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | function      | null                                                                                                                                   |
| public         | get_security_limits                          | json                                                                                                                                                                                                                                               | p_restaurant_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | function      | null                                                                                                                                   |
| public         | get_user_permissions                         | jsonb                                                                                                                                                                                                                                              | p_user_id uuid, p_restaurant_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | function      | null                                                                                                                                   |
| public         | procesar_pago_atomico                        | json                                                                                                                                                                                                                                               | p_caja_sesion_id uuid, p_orden_id uuid, p_tipo_orden text, p_metodo_pago text, p_monto_total integer, p_monto_recibido integer, p_cajero_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | function      | null                                                                                                                                   |
| public         | reporte_conciliaciones_realizadas            | TABLE(fecha_conciliacion date, sesion_id uuid, business_day date, saldo_calculado integer, saldo_fisico_real integer, diferencia integer, tipo_diferencia text, justificacion text, conciliado_por text, requiere_supervisor boolean)              | p_restaurant_id uuid DEFAULT NULL::uuid, p_fecha_desde date DEFAULT (CURRENT_DATE - '30 days'::interval), p_fecha_hasta date DEFAULT CURRENT_DATE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | function      | null                                                                                                                                   |
| public         | reporte_dashboard_caja                       | jsonb                                                                                                                                                                                                                                              | p_restaurant_id uuid DEFAULT NULL::uuid, p_dias_atras integer DEFAULT 30                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | function      | null                                                                                                                                   |
| public         | reporte_diario_caja                          | jsonb                                                                                                                                                                                                                                              | p_restaurant_id uuid, p_fecha date DEFAULT CURRENT_DATE, p_turno text DEFAULT 'dia_completo'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | function      | null                                                                                                                                   |
| public         | reporte_estado_caja_actual                   | TABLE(restaurant_id uuid, restaurant_name text, caja_abierta boolean, sesion_actual_id uuid, cajero_actual text, monto_inicial integer, tiempo_abierta_horas numeric, ultima_actividad timestamp with time zone, conciliaciones_pendientes bigint) | p_restaurant_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | function      | null                                                                                                                                   |
| public         | reporte_resumen_diferencias                  | TABLE(periodo text, total_conciliaciones bigint, total_sobrantes bigint, total_faltantes bigint, monto_total_sobrantes bigint, monto_total_faltantes bigint, porcentaje_conciliado numeric)                                                        | p_restaurant_id uuid DEFAULT NULL::uuid, p_fecha_desde date DEFAULT (CURRENT_DATE - '30 days'::interval), p_fecha_hasta date DEFAULT CURRENT_DATE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | function      | null                                                                                                                                   |
| public         | reporte_sesiones_pendientes_conciliacion     | TABLE(sesion_id uuid, business_day date, cerrada_at timestamp with time zone, horas_desde_cierre numeric, saldo_calculado integer, cajero text, restaurant_name text)                                                                              | p_restaurant_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | function      | null                                                                                                                                   |
| public         | reporte_transacciones_sesion                 | TABLE(tipo_movimiento text, descripcion text, monto integer, fecha_hora timestamp with time zone, metodo_pago text, categoria text)                                                                                                                | p_sesion_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | function      | null                                                                                                                                   |
| public         | search_universal_products                    | TABLE(product_id uuid, product_name character varying, product_description text, category_name character varying, popularity_score integer, search_rank real)                                                                                      | search_query text, category_filter uuid DEFAULT NULL::uuid, region_filter text DEFAULT NULL::text, limit_results integer DEFAULT 50                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | function      | null                                                                                                                                   |
| public         | set_cajero_id                                | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | set_restaurant_owner                         | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | sync_special_availability                    | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | toggle_special_today                         | TABLE(success boolean, message text, activation_id uuid)                                                                                                                                                                                           | p_restaurant_id uuid, p_special_dish_id uuid, p_activate boolean DEFAULT true, p_max_quantity integer DEFAULT NULL::integer, p_notes text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | function      | null                                                                                                                                   |
| public         | tx_set_cajero                                | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | update_combinations_count                    | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | update_daily_menu_stats                      | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | update_product_popularity                    | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | update_product_usage_history                 | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | update_special_combinations_updated_at       | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | update_special_dish_stats                    | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | update_special_dishes_updated_at             | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | update_special_protein_quantities_updated_at | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | update_updated_at_column                     | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | update_user_restaurant_id                    | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | validar_business_day_transaccion             | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | validar_cierre_caja                          | jsonb                                                                                                                                                                                                                                              | p_restaurant_id uuid, p_sesion_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | function      | null                                                                                                                                   |
| public         | validar_cierre_caja                          | json                                                                                                                                                                                                                                               | p_restaurant_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | function      | null                                                                                                                                   |
| public         | validar_estado_caja_sesion                   | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| public         | validar_seguridad_transaccion                | json                                                                                                                                                                                                                                               | p_restaurant_id uuid, p_cajero_id uuid, p_monto_total integer, p_metodo_pago text, p_monto_recibido integer DEFAULT NULL::integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | function      | null                                                                                                                                   |
| public         | verificar_conciliaciones_pendientes          | TABLE(sesion_id uuid, business_day date, saldo_calculado integer, cerrada_at timestamp with time zone, horas_desde_cierre numeric)                                                                                                                 | p_restaurant_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | function      | null                                                                                                                                   |
| realtime       | apply_rls                                    | SETOF realtime.wal_rls                                                                                                                                                                                                                             | wal jsonb, max_record_bytes integer DEFAULT (1024 * 1024)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| realtime       | broadcast_changes                            | void                                                                                                                                                                                                                                               | topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text DEFAULT 'ROW'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | function      | null                                                                                                                                   |
| realtime       | build_prepared_statement_sql                 | text                                                                                                                                                                                                                                               | prepared_statement_name text, entity regclass, columns realtime.wal_column[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | function      | null                                                                                                                                   |
| realtime       | cast                                         | jsonb                                                                                                                                                                                                                                              | val text, type_ regtype                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | function      | null                                                                                                                                   |
| realtime       | check_equality_op                            | boolean                                                                                                                                                                                                                                            | op realtime.equality_op, type_ regtype, val_1 text, val_2 text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | function      | null                                                                                                                                   |
| realtime       | is_visible_through_filters                   | boolean                                                                                                                                                                                                                                            | columns realtime.wal_column[], filters realtime.user_defined_filter[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | function      | null                                                                                                                                   |
| realtime       | list_changes                                 | SETOF realtime.wal_rls                                                                                                                                                                                                                             | publication name, slot_name name, max_changes integer, max_record_bytes integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| realtime       | quote_wal2json                               | text                                                                                                                                                                                                                                               | entity regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| realtime       | send                                         | void                                                                                                                                                                                                                                               | payload jsonb, event text, topic text, private boolean DEFAULT true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | function      | null                                                                                                                                   |
| realtime       | subscription_check_filters                   | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| realtime       | to_regrole                                   | regrole                                                                                                                                                                                                                                            | role_name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | function      | null                                                                                                                                   |
| realtime       | topic                                        | text                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | add_prefixes                                 | void                                                                                                                                                                                                                                               | _bucket_id text, _name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | function      | null                                                                                                                                   |
| storage        | can_insert_object                            | void                                                                                                                                                                                                                                               | bucketid text, name text, owner uuid, metadata jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | function      | null                                                                                                                                   |
| storage        | delete_leaf_prefixes                         | void                                                                                                                                                                                                                                               | bucket_ids text[], names text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | delete_prefix                                | boolean                                                                                                                                                                                                                                            | _bucket_id text, _name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | function      | null                                                                                                                                   |
| storage        | delete_prefix_hierarchy_trigger              | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | enforce_bucket_name_length                   | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | extension                                    | text                                                                                                                                                                                                                                               | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| storage        | filename                                     | text                                                                                                                                                                                                                                               | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| storage        | foldername                                   | text[]                                                                                                                                                                                                                                             | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| storage        | get_level                                    | integer                                                                                                                                                                                                                                            | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| storage        | get_prefix                                   | text                                                                                                                                                                                                                                               | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| storage        | get_prefixes                                 | text[]                                                                                                                                                                                                                                             | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | function      | null                                                                                                                                   |
| storage        | get_size_by_bucket                           | TABLE(size bigint, bucket_id text)                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | list_multipart_uploads_with_delimiter        | TABLE(key text, id text, created_at timestamp with time zone)                                                                                                                                                                                      | bucket_id text, prefix_param text, delimiter_param text, max_keys integer DEFAULT 100, next_key_token text DEFAULT ''::text, next_upload_token text DEFAULT ''::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | function      | null                                                                                                                                   |
| storage        | list_objects_with_delimiter                  | TABLE(name text, id uuid, metadata jsonb, updated_at timestamp with time zone)                                                                                                                                                                     | bucket_id text, prefix_param text, delimiter_param text, max_keys integer DEFAULT 100, start_after text DEFAULT ''::text, next_token text DEFAULT ''::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | function      | null                                                                                                                                   |
| storage        | lock_top_prefixes                            | void                                                                                                                                                                                                                                               | bucket_ids text[], names text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | objects_delete_cleanup                       | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | objects_insert_prefix_trigger                | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | objects_update_cleanup                       | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | objects_update_level_trigger                 | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | objects_update_prefix_trigger                | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | operation                                    | text                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | prefixes_delete_cleanup                      | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | prefixes_insert_trigger                      | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| storage        | search                                       | TABLE(name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)                                                                                     | prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | function      | null                                                                                                                                   |
| storage        | search_legacy_v1                             | TABLE(name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)                                                                                     | prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | function      | null                                                                                                                                   |
| storage        | search_v1_optimised                          | TABLE(name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)                                                                                     | prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | function      | null                                                                                                                                   |
| storage        | search_v2                                    | TABLE(key text, name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)                                                                           | prefix text, bucket_name text, limits integer DEFAULT 100, levels integer DEFAULT 1, start_after text DEFAULT ''::text, sort_order text DEFAULT 'asc'::text, sort_column text DEFAULT 'name'::text, sort_column_after text DEFAULT ''::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | function      | null                                                                                                                                   |
| storage        | update_updated_at_column                     | trigger                                                                                                                                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| vault          | _crypto_aead_det_decrypt                     | bytea                                                                                                                                                                                                                                              | message bytea, additional bytea, key_id bigint, context bytea DEFAULT '\x7067736f6469756d'::bytea, nonce bytea DEFAULT NULL::bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | function      | null                                                                                                                                   |
| vault          | _crypto_aead_det_encrypt                     | bytea                                                                                                                                                                                                                                              | message bytea, additional bytea, key_id bigint, context bytea DEFAULT '\x7067736f6469756d'::bytea, nonce bytea DEFAULT NULL::bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | function      | null                                                                                                                                   |
| vault          | _crypto_aead_det_noncegen                    | bytea                                                                                                                                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | function      | null                                                                                                                                   |
| vault          | create_secret                                | uuid                                                                                                                                                                                                                                               | new_secret text, new_name text DEFAULT NULL::text, new_description text DEFAULT ''::text, new_key_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | function      | null                                                                                                                                   |
| vault          | update_secret                                | void                                                                                                                                                                                                                                               | secret_id uuid, new_secret text DEFAULT NULL::text, new_name text DEFAULT NULL::text, new_description text DEFAULT NULL::text, new_key_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | function      | null                                                                                                                                   |





-- CONSULTA 4: Información de triggers
SELECT 
    n.nspname as schema_name,
    t.tgname as trigger_name,
    c.relname as table_name,
    CASE t.tgtype & 66
        WHEN 2 THEN 'BEFORE'
        WHEN 64 THEN 'INSTEAD OF'
        ELSE 'AFTER'
    END as trigger_timing,
    CASE t.tgtype & 28
        WHEN 4 THEN 'INSERT'
        WHEN 8 THEN 'DELETE'
        WHEN 16 THEN 'UPDATE'
        WHEN 12 THEN 'INSERT, DELETE'
        WHEN 20 THEN 'INSERT, UPDATE'
        WHEN 24 THEN 'DELETE, UPDATE'
        WHEN 28 THEN 'INSERT, DELETE, UPDATE'
    END as trigger_events,
    p.proname as function_name,
    obj_description(t.oid) as trigger_description
FROM pg_trigger t
JOIN pg_class c ON t.tgrelid = c.oid
JOIN pg_namespace n ON c.relnamespace = n.oid
LEFT JOIN pg_proc p ON t.tgfoid = p.oid
WHERE n.nspname NOT IN ('information_schema', 'pg_catalog', 'pg_toast')
AND NOT t.tgisinternal
ORDER BY schema_name, table_name, trigger_name;


| schema_name | trigger_name                                         | table_name                     | trigger_timing | trigger_events         | function_name                                | trigger_description |
| ----------- | ---------------------------------------------------- | ------------------------------ | -------------- | ---------------------- | -------------------------------------------- | ------------------- |
| cron        | cron_job_cache_invalidate                            | job                            | AFTER          | INSERT, DELETE, UPDATE | job_cache_invalidate                         | null                |
| public      | trigger_audit_caja_sesiones                          | caja_sesiones                  | AFTER          | INSERT, DELETE, UPDATE | audit_caja_sesiones_changes                  | null                |
| public      | trigger_calcular_diferencia_caja                     | caja_sesiones                  | BEFORE         | INSERT, UPDATE         | calcular_diferencia_caja                     | null                |
| public      | trigger_validar_estado_caja                          | caja_sesiones                  | BEFORE         | INSERT, UPDATE         | validar_estado_caja_sesion                   | null                |
| public      | update_cities_updated_at                             | cities                         | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | update_countries_updated_at                          | countries                      | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | update_cuisine_types_updated_at                      | cuisine_types                  | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | trigger_update_menu_stats                            | daily_menu_selections          | AFTER          | INSERT, DELETE, UPDATE | update_daily_menu_stats                      | null                |
| public      | trigger_update_product_usage                         | daily_menu_selections          | AFTER          | INSERT                 | update_product_usage_history                 | null                |
| public      | trigger_sync_special_availability                    | daily_special_activations      | AFTER          | INSERT, DELETE, UPDATE | sync_special_availability                    | null                |
| public      | update_departments_updated_at                        | departments                    | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | update_facturas_updated_at                           | facturas                       | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | trigger_update_combinations_count                    | generated_combinations         | AFTER          | INSERT, DELETE, UPDATE | update_combinations_count                    | null                |
| public      | trigger_update_special_combinations_updated_at       | generated_special_combinations | BEFORE         | UPDATE                 | update_special_combinations_updated_at       | null                |
| public      | trigger_recalcular_total_orden                       | items_orden_mesa               | AFTER          | INSERT, DELETE, UPDATE | actualizar_monto_total_orden                 | null                |
| public      | update_numeracion_facturas_updated_at                | numeracion_facturas            | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | trg_ordenes_auto_free_mesa                           | ordenes_mesa                   | AFTER          | DELETE, UPDATE         | auto_libera_mesa_sin_orden                   | null                |
| public      | trigger_actualizar_estado_mesa                       | ordenes_mesa                   | AFTER          | INSERT, UPDATE         | actualizar_estado_mesa                       | null                |
| public      | trigger_actualizar_ordenes_mesa                      | ordenes_mesa                   | BEFORE         | UPDATE                 | actualizar_fecha_actualizacion               | null                |
| public      | update_permissions_updated_at                        | permissions                    | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | trg_mesa_requires_order                              | restaurant_mesas               | BEFORE         | UPDATE                 | enforce_mesa_con_orden_activa                | null                |
| public      | trigger_update_product_popularity                    | restaurant_product_usage       | AFTER          | INSERT, UPDATE         | update_product_popularity                    | null                |
| public      | trg_audit_restaurant_role_configs                    | restaurant_role_configs        | AFTER          | INSERT, DELETE, UPDATE | fn_audit_log                                 | null                |
| public      | update_restaurant_role_configs_updated_at            | restaurant_role_configs        | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | restaurant_owner_trigger                             | restaurants                    | BEFORE         | INSERT, UPDATE         | set_restaurant_owner                         | null                |
| public      | sync_user_restaurant_trigger                         | restaurants                    | AFTER          | INSERT, DELETE         | update_user_restaurant_id                    | null                |
| public      | update_restaurants_updated_at                        | restaurants                    | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | trg_audit_role_permissions                           | role_permissions               | AFTER          | INSERT, DELETE, UPDATE | fn_audit_log                                 | null                |
| public      | update_role_permissions_updated_at                   | role_permissions               | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | trigger_update_special_dish_stats                    | special_dish_selections        | AFTER          | INSERT, DELETE, UPDATE | update_special_dish_stats                    | null                |
| public      | trigger_update_special_dishes_updated_at             | special_dishes                 | BEFORE         | UPDATE                 | update_special_dishes_updated_at             | null                |
| public      | trigger_update_special_protein_quantities_updated_at | special_protein_quantities     | BEFORE         | UPDATE                 | update_special_protein_quantities_updated_at | null                |
| public      | update_system_roles_updated_at                       | system_roles                   | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | trg_tx_set_cajero                                    | transacciones_caja             | BEFORE         | INSERT                 | tx_set_cajero                                | null                |
| public      | trigger_validar_business_day_transaccion             | transacciones_caja             | BEFORE         | INSERT                 | validar_business_day_transaccion             | null                |
| public      | update_user_profiles_updated_at                      | user_profiles_app              | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | trg_audit_user_roles                                 | user_roles                     | AFTER          | INSERT, DELETE, UPDATE | fn_audit_log                                 | null                |
| public      | update_user_roles_updated_at                         | user_roles                     | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| public      | trg_audit_users                                      | users                          | AFTER          | INSERT, DELETE, UPDATE | fn_audit_log                                 | null                |
| public      | update_users_updated_at                              | users                          | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| realtime    | tr_check_filters                                     | subscription                   | BEFORE         | INSERT, UPDATE         | subscription_check_filters                   | null                |
| storage     | enforce_bucket_name_length_trigger                   | buckets                        | BEFORE         | INSERT, UPDATE         | enforce_bucket_name_length                   | null                |
| storage     | objects_delete_delete_prefix                         | objects                        | AFTER          | DELETE                 | delete_prefix_hierarchy_trigger              | null                |
| storage     | objects_insert_create_prefix                         | objects                        | BEFORE         | INSERT                 | objects_insert_prefix_trigger                | null                |
| storage     | objects_update_create_prefix                         | objects                        | BEFORE         | UPDATE                 | objects_update_prefix_trigger                | null                |
| storage     | update_objects_updated_at                            | objects                        | BEFORE         | UPDATE                 | update_updated_at_column                     | null                |
| storage     | prefixes_create_hierarchy                            | prefixes                       | BEFORE         | INSERT                 | prefixes_insert_trigger                      | null                |
| storage     | prefixes_delete_hierarchy                            | prefixes                       | AFTER          | DELETE                 | delete_prefix_hierarchy_trigger              | null                |



-- CONSULTA 5: Información de índices
SELECT 
    schemaname,
    tablename,
    indexname,
    indexdef,
    CASE 
        WHEN indexdef LIKE '%UNIQUE%' THEN 'UNIQUE'
        ELSE 'NORMAL'
    END as index_type,
    CASE 
        WHEN indexdef LIKE '%btree%' THEN 'btree'
        WHEN indexdef LIKE '%gin%' THEN 'gin'
        WHEN indexdef LIKE '%gist%' THEN 'gist'
        WHEN indexdef LIKE '%hash%' THEN 'hash'
        ELSE 'unknown'
    END as index_method
FROM pg_indexes
WHERE schemaname NOT IN ('information_schema', 'pg_catalog')
ORDER BY schemaname, tablename, indexname;


| schemaname | tablename                      | indexname                                                       | indexdef                                                                                                                                                                                   | index_type | index_method |
| ---------- | ------------------------------ | --------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------- | ------------ |
| auth       | audit_log_entries              | audit_log_entries_pkey                                          | CREATE UNIQUE INDEX audit_log_entries_pkey ON auth.audit_log_entries USING btree (id)                                                                                                      | UNIQUE     | btree        |
| auth       | audit_log_entries              | audit_logs_instance_id_idx                                      | CREATE INDEX audit_logs_instance_id_idx ON auth.audit_log_entries USING btree (instance_id)                                                                                                | NORMAL     | btree        |
| auth       | flow_state                     | flow_state_created_at_idx                                       | CREATE INDEX flow_state_created_at_idx ON auth.flow_state USING btree (created_at DESC)                                                                                                    | NORMAL     | btree        |
| auth       | flow_state                     | flow_state_pkey                                                 | CREATE UNIQUE INDEX flow_state_pkey ON auth.flow_state USING btree (id)                                                                                                                    | UNIQUE     | btree        |
| auth       | flow_state                     | idx_auth_code                                                   | CREATE INDEX idx_auth_code ON auth.flow_state USING btree (auth_code)                                                                                                                      | NORMAL     | btree        |
| auth       | flow_state                     | idx_user_id_auth_method                                         | CREATE INDEX idx_user_id_auth_method ON auth.flow_state USING btree (user_id, authentication_method)                                                                                       | NORMAL     | btree        |
| auth       | identities                     | identities_email_idx                                            | CREATE INDEX identities_email_idx ON auth.identities USING btree (email text_pattern_ops)                                                                                                  | NORMAL     | btree        |
| auth       | identities                     | identities_pkey                                                 | CREATE UNIQUE INDEX identities_pkey ON auth.identities USING btree (id)                                                                                                                    | UNIQUE     | btree        |
| auth       | identities                     | identities_provider_id_provider_unique                          | CREATE UNIQUE INDEX identities_provider_id_provider_unique ON auth.identities USING btree (provider_id, provider)                                                                          | UNIQUE     | btree        |
| auth       | identities                     | identities_user_id_idx                                          | CREATE INDEX identities_user_id_idx ON auth.identities USING btree (user_id)                                                                                                               | NORMAL     | btree        |
| auth       | instances                      | instances_pkey                                                  | CREATE UNIQUE INDEX instances_pkey ON auth.instances USING btree (id)                                                                                                                      | UNIQUE     | btree        |
| auth       | mfa_amr_claims                 | amr_id_pk                                                       | CREATE UNIQUE INDEX amr_id_pk ON auth.mfa_amr_claims USING btree (id)                                                                                                                      | UNIQUE     | btree        |
| auth       | mfa_amr_claims                 | mfa_amr_claims_session_id_authentication_method_pkey            | CREATE UNIQUE INDEX mfa_amr_claims_session_id_authentication_method_pkey ON auth.mfa_amr_claims USING btree (session_id, authentication_method)                                            | UNIQUE     | btree        |
| auth       | mfa_challenges                 | mfa_challenge_created_at_idx                                    | CREATE INDEX mfa_challenge_created_at_idx ON auth.mfa_challenges USING btree (created_at DESC)                                                                                             | NORMAL     | btree        |
| auth       | mfa_challenges                 | mfa_challenges_pkey                                             | CREATE UNIQUE INDEX mfa_challenges_pkey ON auth.mfa_challenges USING btree (id)                                                                                                            | UNIQUE     | btree        |
| auth       | mfa_factors                    | factor_id_created_at_idx                                        | CREATE INDEX factor_id_created_at_idx ON auth.mfa_factors USING btree (user_id, created_at)                                                                                                | NORMAL     | btree        |
| auth       | mfa_factors                    | mfa_factors_last_challenged_at_key                              | CREATE UNIQUE INDEX mfa_factors_last_challenged_at_key ON auth.mfa_factors USING btree (last_challenged_at)                                                                                | UNIQUE     | btree        |
| auth       | mfa_factors                    | mfa_factors_pkey                                                | CREATE UNIQUE INDEX mfa_factors_pkey ON auth.mfa_factors USING btree (id)                                                                                                                  | UNIQUE     | btree        |
| auth       | mfa_factors                    | mfa_factors_user_friendly_name_unique                           | CREATE UNIQUE INDEX mfa_factors_user_friendly_name_unique ON auth.mfa_factors USING btree (friendly_name, user_id) WHERE (TRIM(BOTH FROM friendly_name) <> ''::text)                       | UNIQUE     | btree        |
| auth       | mfa_factors                    | mfa_factors_user_id_idx                                         | CREATE INDEX mfa_factors_user_id_idx ON auth.mfa_factors USING btree (user_id)                                                                                                             | NORMAL     | btree        |
| auth       | mfa_factors                    | unique_phone_factor_per_user                                    | CREATE UNIQUE INDEX unique_phone_factor_per_user ON auth.mfa_factors USING btree (user_id, phone)                                                                                          | UNIQUE     | btree        |
| auth       | oauth_authorizations           | oauth_auth_pending_exp_idx                                      | CREATE INDEX oauth_auth_pending_exp_idx ON auth.oauth_authorizations USING btree (expires_at) WHERE (status = 'pending'::auth.oauth_authorization_status)                                  | NORMAL     | btree        |
| auth       | oauth_authorizations           | oauth_authorizations_authorization_code_key                     | CREATE UNIQUE INDEX oauth_authorizations_authorization_code_key ON auth.oauth_authorizations USING btree (authorization_code)                                                              | UNIQUE     | btree        |
| auth       | oauth_authorizations           | oauth_authorizations_authorization_id_key                       | CREATE UNIQUE INDEX oauth_authorizations_authorization_id_key ON auth.oauth_authorizations USING btree (authorization_id)                                                                  | UNIQUE     | btree        |
| auth       | oauth_authorizations           | oauth_authorizations_pkey                                       | CREATE UNIQUE INDEX oauth_authorizations_pkey ON auth.oauth_authorizations USING btree (id)                                                                                                | UNIQUE     | btree        |
| auth       | oauth_client_states            | idx_oauth_client_states_created_at                              | CREATE INDEX idx_oauth_client_states_created_at ON auth.oauth_client_states USING btree (created_at)                                                                                       | NORMAL     | btree        |
| auth       | oauth_client_states            | oauth_client_states_pkey                                        | CREATE UNIQUE INDEX oauth_client_states_pkey ON auth.oauth_client_states USING btree (id)                                                                                                  | UNIQUE     | btree        |
| auth       | oauth_clients                  | oauth_clients_deleted_at_idx                                    | CREATE INDEX oauth_clients_deleted_at_idx ON auth.oauth_clients USING btree (deleted_at)                                                                                                   | NORMAL     | btree        |
| auth       | oauth_clients                  | oauth_clients_pkey                                              | CREATE UNIQUE INDEX oauth_clients_pkey ON auth.oauth_clients USING btree (id)                                                                                                              | UNIQUE     | btree        |
| auth       | oauth_consents                 | oauth_consents_active_client_idx                                | CREATE INDEX oauth_consents_active_client_idx ON auth.oauth_consents USING btree (client_id) WHERE (revoked_at IS NULL)                                                                    | NORMAL     | btree        |
| auth       | oauth_consents                 | oauth_consents_active_user_client_idx                           | CREATE INDEX oauth_consents_active_user_client_idx ON auth.oauth_consents USING btree (user_id, client_id) WHERE (revoked_at IS NULL)                                                      | NORMAL     | btree        |
| auth       | oauth_consents                 | oauth_consents_pkey                                             | CREATE UNIQUE INDEX oauth_consents_pkey ON auth.oauth_consents USING btree (id)                                                                                                            | UNIQUE     | btree        |
| auth       | oauth_consents                 | oauth_consents_user_client_unique                               | CREATE UNIQUE INDEX oauth_consents_user_client_unique ON auth.oauth_consents USING btree (user_id, client_id)                                                                              | UNIQUE     | btree        |
| auth       | oauth_consents                 | oauth_consents_user_order_idx                                   | CREATE INDEX oauth_consents_user_order_idx ON auth.oauth_consents USING btree (user_id, granted_at DESC)                                                                                   | NORMAL     | btree        |
| auth       | one_time_tokens                | one_time_tokens_pkey                                            | CREATE UNIQUE INDEX one_time_tokens_pkey ON auth.one_time_tokens USING btree (id)                                                                                                          | UNIQUE     | btree        |
| auth       | one_time_tokens                | one_time_tokens_relates_to_hash_idx                             | CREATE INDEX one_time_tokens_relates_to_hash_idx ON auth.one_time_tokens USING hash (relates_to)                                                                                           | NORMAL     | hash         |
| auth       | one_time_tokens                | one_time_tokens_token_hash_hash_idx                             | CREATE INDEX one_time_tokens_token_hash_hash_idx ON auth.one_time_tokens USING hash (token_hash)                                                                                           | NORMAL     | hash         |
| auth       | one_time_tokens                | one_time_tokens_user_id_token_type_key                          | CREATE UNIQUE INDEX one_time_tokens_user_id_token_type_key ON auth.one_time_tokens USING btree (user_id, token_type)                                                                       | UNIQUE     | btree        |
| auth       | refresh_tokens                 | refresh_tokens_instance_id_idx                                  | CREATE INDEX refresh_tokens_instance_id_idx ON auth.refresh_tokens USING btree (instance_id)                                                                                               | NORMAL     | btree        |
| auth       | refresh_tokens                 | refresh_tokens_instance_id_user_id_idx                          | CREATE INDEX refresh_tokens_instance_id_user_id_idx ON auth.refresh_tokens USING btree (instance_id, user_id)                                                                              | NORMAL     | btree        |
| auth       | refresh_tokens                 | refresh_tokens_parent_idx                                       | CREATE INDEX refresh_tokens_parent_idx ON auth.refresh_tokens USING btree (parent)                                                                                                         | NORMAL     | btree        |
| auth       | refresh_tokens                 | refresh_tokens_pkey                                             | CREATE UNIQUE INDEX refresh_tokens_pkey ON auth.refresh_tokens USING btree (id)                                                                                                            | UNIQUE     | btree        |
| auth       | refresh_tokens                 | refresh_tokens_session_id_revoked_idx                           | CREATE INDEX refresh_tokens_session_id_revoked_idx ON auth.refresh_tokens USING btree (session_id, revoked)                                                                                | NORMAL     | btree        |
| auth       | refresh_tokens                 | refresh_tokens_token_unique                                     | CREATE UNIQUE INDEX refresh_tokens_token_unique ON auth.refresh_tokens USING btree (token)                                                                                                 | UNIQUE     | btree        |
| auth       | refresh_tokens                 | refresh_tokens_updated_at_idx                                   | CREATE INDEX refresh_tokens_updated_at_idx ON auth.refresh_tokens USING btree (updated_at DESC)                                                                                            | NORMAL     | btree        |
| auth       | saml_providers                 | saml_providers_entity_id_key                                    | CREATE UNIQUE INDEX saml_providers_entity_id_key ON auth.saml_providers USING btree (entity_id)                                                                                            | UNIQUE     | btree        |
| auth       | saml_providers                 | saml_providers_pkey                                             | CREATE UNIQUE INDEX saml_providers_pkey ON auth.saml_providers USING btree (id)                                                                                                            | UNIQUE     | btree        |
| auth       | saml_providers                 | saml_providers_sso_provider_id_idx                              | CREATE INDEX saml_providers_sso_provider_id_idx ON auth.saml_providers USING btree (sso_provider_id)                                                                                       | NORMAL     | btree        |
| auth       | saml_relay_states              | saml_relay_states_created_at_idx                                | CREATE INDEX saml_relay_states_created_at_idx ON auth.saml_relay_states USING btree (created_at DESC)                                                                                      | NORMAL     | btree        |
| auth       | saml_relay_states              | saml_relay_states_for_email_idx                                 | CREATE INDEX saml_relay_states_for_email_idx ON auth.saml_relay_states USING btree (for_email)                                                                                             | NORMAL     | btree        |
| auth       | saml_relay_states              | saml_relay_states_pkey                                          | CREATE UNIQUE INDEX saml_relay_states_pkey ON auth.saml_relay_states USING btree (id)                                                                                                      | UNIQUE     | btree        |
| auth       | saml_relay_states              | saml_relay_states_sso_provider_id_idx                           | CREATE INDEX saml_relay_states_sso_provider_id_idx ON auth.saml_relay_states USING btree (sso_provider_id)                                                                                 | NORMAL     | btree        |
| auth       | schema_migrations              | schema_migrations_pkey                                          | CREATE UNIQUE INDEX schema_migrations_pkey ON auth.schema_migrations USING btree (version)                                                                                                 | UNIQUE     | btree        |
| auth       | sessions                       | sessions_not_after_idx                                          | CREATE INDEX sessions_not_after_idx ON auth.sessions USING btree (not_after DESC)                                                                                                          | NORMAL     | btree        |
| auth       | sessions                       | sessions_oauth_client_id_idx                                    | CREATE INDEX sessions_oauth_client_id_idx ON auth.sessions USING btree (oauth_client_id)                                                                                                   | NORMAL     | btree        |
| auth       | sessions                       | sessions_pkey                                                   | CREATE UNIQUE INDEX sessions_pkey ON auth.sessions USING btree (id)                                                                                                                        | UNIQUE     | btree        |
| auth       | sessions                       | sessions_user_id_idx                                            | CREATE INDEX sessions_user_id_idx ON auth.sessions USING btree (user_id)                                                                                                                   | NORMAL     | btree        |
| auth       | sessions                       | user_id_created_at_idx                                          | CREATE INDEX user_id_created_at_idx ON auth.sessions USING btree (user_id, created_at)                                                                                                     | NORMAL     | btree        |
| auth       | sso_domains                    | sso_domains_domain_idx                                          | CREATE UNIQUE INDEX sso_domains_domain_idx ON auth.sso_domains USING btree (lower(domain))                                                                                                 | UNIQUE     | btree        |
| auth       | sso_domains                    | sso_domains_pkey                                                | CREATE UNIQUE INDEX sso_domains_pkey ON auth.sso_domains USING btree (id)                                                                                                                  | UNIQUE     | btree        |
| auth       | sso_domains                    | sso_domains_sso_provider_id_idx                                 | CREATE INDEX sso_domains_sso_provider_id_idx ON auth.sso_domains USING btree (sso_provider_id)                                                                                             | NORMAL     | btree        |
| auth       | sso_providers                  | sso_providers_pkey                                              | CREATE UNIQUE INDEX sso_providers_pkey ON auth.sso_providers USING btree (id)                                                                                                              | UNIQUE     | btree        |
| auth       | sso_providers                  | sso_providers_resource_id_idx                                   | CREATE UNIQUE INDEX sso_providers_resource_id_idx ON auth.sso_providers USING btree (lower(resource_id))                                                                                   | UNIQUE     | btree        |
| auth       | sso_providers                  | sso_providers_resource_id_pattern_idx                           | CREATE INDEX sso_providers_resource_id_pattern_idx ON auth.sso_providers USING btree (resource_id text_pattern_ops)                                                                        | NORMAL     | btree        |
| auth       | users                          | confirmation_token_idx                                          | CREATE UNIQUE INDEX confirmation_token_idx ON auth.users USING btree (confirmation_token) WHERE ((confirmation_token)::text !~ '^[0-9 ]*$'::text)                                          | UNIQUE     | btree        |
| auth       | users                          | email_change_token_current_idx                                  | CREATE UNIQUE INDEX email_change_token_current_idx ON auth.users USING btree (email_change_token_current) WHERE ((email_change_token_current)::text !~ '^[0-9 ]*$'::text)                  | UNIQUE     | btree        |
| auth       | users                          | email_change_token_new_idx                                      | CREATE UNIQUE INDEX email_change_token_new_idx ON auth.users USING btree (email_change_token_new) WHERE ((email_change_token_new)::text !~ '^[0-9 ]*$'::text)                              | UNIQUE     | btree        |
| auth       | users                          | reauthentication_token_idx                                      | CREATE UNIQUE INDEX reauthentication_token_idx ON auth.users USING btree (reauthentication_token) WHERE ((reauthentication_token)::text !~ '^[0-9 ]*$'::text)                              | UNIQUE     | btree        |
| auth       | users                          | recovery_token_idx                                              | CREATE UNIQUE INDEX recovery_token_idx ON auth.users USING btree (recovery_token) WHERE ((recovery_token)::text !~ '^[0-9 ]*$'::text)                                                      | UNIQUE     | btree        |
| auth       | users                          | users_email_partial_key                                         | CREATE UNIQUE INDEX users_email_partial_key ON auth.users USING btree (email) WHERE (is_sso_user = false)                                                                                  | UNIQUE     | btree        |
| auth       | users                          | users_instance_id_email_idx                                     | CREATE INDEX users_instance_id_email_idx ON auth.users USING btree (instance_id, lower((email)::text))                                                                                     | NORMAL     | btree        |
| auth       | users                          | users_instance_id_idx                                           | CREATE INDEX users_instance_id_idx ON auth.users USING btree (instance_id)                                                                                                                 | NORMAL     | btree        |
| auth       | users                          | users_is_anonymous_idx                                          | CREATE INDEX users_is_anonymous_idx ON auth.users USING btree (is_anonymous)                                                                                                               | NORMAL     | btree        |
| auth       | users                          | users_phone_key                                                 | CREATE UNIQUE INDEX users_phone_key ON auth.users USING btree (phone)                                                                                                                      | UNIQUE     | btree        |
| auth       | users                          | users_pkey                                                      | CREATE UNIQUE INDEX users_pkey ON auth.users USING btree (id)                                                                                                                              | UNIQUE     | btree        |
| cron       | job                            | job_pkey                                                        | CREATE UNIQUE INDEX job_pkey ON cron.job USING btree (jobid)                                                                                                                               | UNIQUE     | btree        |
| cron       | job                            | jobname_username_uniq                                           | CREATE UNIQUE INDEX jobname_username_uniq ON cron.job USING btree (jobname, username)                                                                                                      | UNIQUE     | btree        |
| cron       | job_run_details                | job_run_details_pkey                                            | CREATE UNIQUE INDEX job_run_details_pkey ON cron.job_run_details USING btree (runid)                                                                                                       | UNIQUE     | btree        |
| public     | ajustes_contables_caja         | ajustes_contables_caja_pkey                                     | CREATE UNIQUE INDEX ajustes_contables_caja_pkey ON public.ajustes_contables_caja USING btree (id)                                                                                          | UNIQUE     | btree        |
| public     | ajustes_contables_caja         | idx_ajustes_sesion                                              | CREATE INDEX idx_ajustes_sesion ON public.ajustes_contables_caja USING btree (sesion_id)                                                                                                   | NORMAL     | btree        |
| public     | audit_caja_sesiones            | audit_caja_sesiones_pkey                                        | CREATE UNIQUE INDEX audit_caja_sesiones_pkey ON public.audit_caja_sesiones USING btree (id)                                                                                                | UNIQUE     | btree        |
| public     | audit_caja_sesiones            | idx_audit_caja_sesiones_created_at                              | CREATE INDEX idx_audit_caja_sesiones_created_at ON public.audit_caja_sesiones USING btree (created_at)                                                                                     | NORMAL     | btree        |
| public     | audit_caja_sesiones            | idx_audit_caja_sesiones_operation_type                          | CREATE INDEX idx_audit_caja_sesiones_operation_type ON public.audit_caja_sesiones USING btree (operation_type)                                                                             | NORMAL     | btree        |
| public     | audit_caja_sesiones            | idx_audit_caja_sesiones_record_id                               | CREATE INDEX idx_audit_caja_sesiones_record_id ON public.audit_caja_sesiones USING btree (record_id)                                                                                       | NORMAL     | btree        |
| public     | audit_caja_sesiones            | idx_audit_caja_sesiones_restaurant_id                           | CREATE INDEX idx_audit_caja_sesiones_restaurant_id ON public.audit_caja_sesiones USING btree (restaurant_id)                                                                               | NORMAL     | btree        |
| public     | audit_caja_sesiones            | idx_audit_caja_sesiones_user_id                                 | CREATE INDEX idx_audit_caja_sesiones_user_id ON public.audit_caja_sesiones USING btree (user_id)                                                                                           | NORMAL     | btree        |
| public     | audit_log                      | audit_log_pkey                                                  | CREATE UNIQUE INDEX audit_log_pkey ON public.audit_log USING btree (id)                                                                                                                    | UNIQUE     | btree        |
| public     | audit_log                      | idx_audit_log_table_ts                                          | CREATE INDEX idx_audit_log_table_ts ON public.audit_log USING btree (table_name, "timestamp" DESC)                                                                                         | NORMAL     | btree        |
| public     | audit_log                      | idx_audit_log_ts                                                | CREATE INDEX idx_audit_log_ts ON public.audit_log USING btree ("timestamp" DESC)                                                                                                           | NORMAL     | btree        |
| public     | audit_log                      | idx_audit_log_user_id                                           | CREATE INDEX idx_audit_log_user_id ON public.audit_log USING btree (user_id)                                                                                                               | NORMAL     | btree        |
| public     | authorization_requests         | authorization_requests_pkey                                     | CREATE UNIQUE INDEX authorization_requests_pkey ON public.authorization_requests USING btree (id)                                                                                          | UNIQUE     | btree        |
| public     | authorization_requests         | idx_authorization_requests_cajero_id                            | CREATE INDEX idx_authorization_requests_cajero_id ON public.authorization_requests USING btree (cajero_id)                                                                                 | NORMAL     | btree        |
| public     | authorization_requests         | idx_authorization_requests_restaurant_id                        | CREATE INDEX idx_authorization_requests_restaurant_id ON public.authorization_requests USING btree (restaurant_id)                                                                         | NORMAL     | btree        |
| public     | authorization_requests         | idx_authorization_requests_supervisor_id                        | CREATE INDEX idx_authorization_requests_supervisor_id ON public.authorization_requests USING btree (supervisor_id)                                                                         | NORMAL     | btree        |
| public     | caja_sesiones                  | caja_sesiones_pkey                                              | CREATE UNIQUE INDEX caja_sesiones_pkey ON public.caja_sesiones USING btree (id)                                                                                                            | UNIQUE     | btree        |
| public     | caja_sesiones                  | idx_caja_sesiones_abierta_at                                    | CREATE INDEX idx_caja_sesiones_abierta_at ON public.caja_sesiones USING btree (abierta_at)                                                                                                 | NORMAL     | btree        |
| public     | caja_sesiones                  | idx_caja_sesiones_business_day_unique                           | CREATE UNIQUE INDEX idx_caja_sesiones_business_day_unique ON public.caja_sesiones USING btree (restaurant_id, business_day) WHERE ((estado)::text = 'abierta'::text)                       | UNIQUE     | btree        |
| public     | caja_sesiones                  | idx_caja_sesiones_cajero_estado                                 | CREATE INDEX idx_caja_sesiones_cajero_estado ON public.caja_sesiones USING btree (cajero_id, estado)                                                                                       | NORMAL     | btree        |
| public     | caja_sesiones                  | idx_caja_sesiones_cerrada_at                                    | CREATE INDEX idx_caja_sesiones_cerrada_at ON public.caja_sesiones USING btree (cerrada_at)                                                                                                 | NORMAL     | btree        |
| public     | caja_sesiones                  | idx_caja_sesiones_conciliada                                    | CREATE INDEX idx_caja_sesiones_conciliada ON public.caja_sesiones USING btree (conciliada) WHERE (conciliada = false)                                                                      | NORMAL     | btree        |
| public     | caja_sesiones                  | idx_caja_sesiones_rest_estado                                   | CREATE INDEX idx_caja_sesiones_rest_estado ON public.caja_sesiones USING btree (restaurant_id, estado)                                                                                     | NORMAL     | btree        |
| public     | caja_sesiones                  | idx_caja_sesiones_restaurant_estado                             | CREATE INDEX idx_caja_sesiones_restaurant_estado ON public.caja_sesiones USING btree (restaurant_id, estado)                                                                               | NORMAL     | btree        |
| public     | caja_sesiones                  | idx_caja_sesiones_saldo_final                                   | CREATE INDEX idx_caja_sesiones_saldo_final ON public.caja_sesiones USING btree (saldo_final_reportado)                                                                                     | NORMAL     | btree        |
| public     | caja_sesiones                  | idx_una_caja_abierta_por_restaurant                             | CREATE UNIQUE INDEX idx_una_caja_abierta_por_restaurant ON public.caja_sesiones USING btree (restaurant_id) WHERE ((estado)::text = 'abierta'::text)                                       | UNIQUE     | btree        |
| public     | cities                         | cities_department_id_name_key                                   | CREATE UNIQUE INDEX cities_department_id_name_key ON public.cities USING btree (department_id, name)                                                                                       | UNIQUE     | btree        |
| public     | cities                         | cities_pkey                                                     | CREATE UNIQUE INDEX cities_pkey ON public.cities USING btree (id)                                                                                                                          | UNIQUE     | btree        |
| public     | cities                         | idx_cities_active                                               | CREATE INDEX idx_cities_active ON public.cities USING btree (is_active)                                                                                                                    | NORMAL     | btree        |
| public     | cities                         | idx_cities_department                                           | CREATE INDEX idx_cities_department ON public.cities USING btree (department_id)                                                                                                            | NORMAL     | btree        |
| public     | cities                         | idx_cities_location                                             | CREATE INDEX idx_cities_location ON public.cities USING btree (latitude, longitude)                                                                                                        | NORMAL     | btree        |
| public     | cobros_mesa                    | cobros_mesa_pkey                                                | CREATE UNIQUE INDEX cobros_mesa_pkey ON public.cobros_mesa USING btree (id)                                                                                                                | UNIQUE     | btree        |
| public     | cobros_mesa                    | idx_cobros_mesa_restaurant_id                                   | CREATE INDEX idx_cobros_mesa_restaurant_id ON public.cobros_mesa USING btree (restaurant_id)                                                                                               | NORMAL     | btree        |
| public     | conciliaciones_caja            | conciliacion_sesion_unica                                       | CREATE UNIQUE INDEX conciliacion_sesion_unica ON public.conciliaciones_caja USING btree (sesion_id)                                                                                        | UNIQUE     | btree        |
| public     | conciliaciones_caja            | conciliaciones_caja_pkey                                        | CREATE UNIQUE INDEX conciliaciones_caja_pkey ON public.conciliaciones_caja USING btree (id)                                                                                                | UNIQUE     | btree        |
| public     | conciliaciones_caja            | idx_conciliaciones_sesion                                       | CREATE INDEX idx_conciliaciones_sesion ON public.conciliaciones_caja USING btree (sesion_id)                                                                                               | NORMAL     | btree        |
| public     | countries                      | countries_code_key                                              | CREATE UNIQUE INDEX countries_code_key ON public.countries USING btree (code)                                                                                                              | UNIQUE     | btree        |
| public     | countries                      | countries_iso_code_key                                          | CREATE UNIQUE INDEX countries_iso_code_key ON public.countries USING btree (iso_code)                                                                                                      | UNIQUE     | btree        |
| public     | countries                      | countries_name_key                                              | CREATE UNIQUE INDEX countries_name_key ON public.countries USING btree (name)                                                                                                              | UNIQUE     | btree        |
| public     | countries                      | countries_pkey                                                  | CREATE UNIQUE INDEX countries_pkey ON public.countries USING btree (id)                                                                                                                    | UNIQUE     | btree        |
| public     | countries                      | idx_countries_active                                            | CREATE INDEX idx_countries_active ON public.countries USING btree (is_active)                                                                                                              | NORMAL     | btree        |
| public     | countries                      | idx_countries_code                                              | CREATE INDEX idx_countries_code ON public.countries USING btree (code)                                                                                                                     | NORMAL     | btree        |
| public     | cuisine_types                  | cuisine_types_name_key                                          | CREATE UNIQUE INDEX cuisine_types_name_key ON public.cuisine_types USING btree (name)                                                                                                      | UNIQUE     | btree        |
| public     | cuisine_types                  | cuisine_types_pkey                                              | CREATE UNIQUE INDEX cuisine_types_pkey ON public.cuisine_types USING btree (id)                                                                                                            | UNIQUE     | btree        |
| public     | cuisine_types                  | cuisine_types_slug_key                                          | CREATE UNIQUE INDEX cuisine_types_slug_key ON public.cuisine_types USING btree (slug)                                                                                                      | UNIQUE     | btree        |
| public     | cuisine_types                  | idx_cuisine_types_active                                        | CREATE INDEX idx_cuisine_types_active ON public.cuisine_types USING btree (is_active)                                                                                                      | NORMAL     | btree        |
| public     | cuisine_types                  | idx_cuisine_types_order                                         | CREATE INDEX idx_cuisine_types_order ON public.cuisine_types USING btree (display_order)                                                                                                   | NORMAL     | btree        |
| public     | daily_menu_selections          | daily_menu_selections_daily_menu_id_universal_product_id_key    | CREATE UNIQUE INDEX daily_menu_selections_daily_menu_id_universal_product_id_key ON public.daily_menu_selections USING btree (daily_menu_id, universal_product_id)                         | UNIQUE     | btree        |
| public     | daily_menu_selections          | daily_menu_selections_pkey                                      | CREATE UNIQUE INDEX daily_menu_selections_pkey ON public.daily_menu_selections USING btree (id)                                                                                            | UNIQUE     | btree        |
| public     | daily_menu_selections          | idx_daily_menu_selections_category_id                           | CREATE INDEX idx_daily_menu_selections_category_id ON public.daily_menu_selections USING btree (category_id)                                                                               | NORMAL     | btree        |
| public     | daily_menu_selections          | idx_menu_selections_menu_category                               | CREATE INDEX idx_menu_selections_menu_category ON public.daily_menu_selections USING btree (daily_menu_id, category_id)                                                                    | NORMAL     | btree        |
| public     | daily_menu_selections          | idx_menu_selections_product                                     | CREATE INDEX idx_menu_selections_product ON public.daily_menu_selections USING btree (universal_product_id, selected_at DESC)                                                              | NORMAL     | btree        |
| public     | daily_menus                    | daily_menus_pkey                                                | CREATE UNIQUE INDEX daily_menus_pkey ON public.daily_menus USING btree (id)                                                                                                                | UNIQUE     | btree        |
| public     | daily_menus                    | daily_menus_restaurant_id_menu_date_key                         | CREATE UNIQUE INDEX daily_menus_restaurant_id_menu_date_key ON public.daily_menus USING btree (restaurant_id, menu_date)                                                                   | UNIQUE     | btree        |
| public     | daily_menus                    | idx_daily_menus_active_restaurant                               | CREATE INDEX idx_daily_menus_active_restaurant ON public.daily_menus USING btree (restaurant_id, status, menu_date DESC) WHERE ((status)::text = 'active'::text)                           | NORMAL     | btree        |
| public     | daily_menus                    | idx_daily_menus_restaurant_date                                 | CREATE INDEX idx_daily_menus_restaurant_date ON public.daily_menus USING btree (restaurant_id, menu_date DESC)                                                                             | NORMAL     | btree        |
| public     | daily_menus                    | idx_daily_menus_status                                          | CREATE INDEX idx_daily_menus_status ON public.daily_menus USING btree (status)                                                                                                             | NORMAL     | btree        |
| public     | daily_special_activations      | daily_special_activations_pkey                                  | CREATE UNIQUE INDEX daily_special_activations_pkey ON public.daily_special_activations USING btree (id)                                                                                    | UNIQUE     | btree        |
| public     | daily_special_activations      | idx_daily_special_activations_restaurant_date                   | CREATE INDEX idx_daily_special_activations_restaurant_date ON public.daily_special_activations USING btree (restaurant_id, activation_date)                                                | NORMAL     | btree        |
| public     | daily_special_activations      | idx_daily_special_activations_special_dish_id                   | CREATE INDEX idx_daily_special_activations_special_dish_id ON public.daily_special_activations USING btree (special_dish_id)                                                               | NORMAL     | btree        |
| public     | daily_special_activations      | unique_special_activation_per_day                               | CREATE UNIQUE INDEX unique_special_activation_per_day ON public.daily_special_activations USING btree (restaurant_id, special_dish_id, activation_date)                                    | UNIQUE     | btree        |
| public     | delivery_orders                | delivery_orders_pkey                                            | CREATE UNIQUE INDEX delivery_orders_pkey ON public.delivery_orders USING btree (id)                                                                                                        | UNIQUE     | btree        |
| public     | delivery_orders                | idx_delivery_orders_daily_menu_id                               | CREATE INDEX idx_delivery_orders_daily_menu_id ON public.delivery_orders USING btree (daily_menu_id)                                                                                       | NORMAL     | btree        |
| public     | delivery_orders                | idx_delivery_orders_delivery_person                             | CREATE INDEX idx_delivery_orders_delivery_person ON public.delivery_orders USING btree (assigned_delivery_person_id)                                                                       | NORMAL     | btree        |
| public     | delivery_orders                | idx_delivery_orders_pagada                                      | CREATE INDEX idx_delivery_orders_pagada ON public.delivery_orders USING btree (pagada_at) WHERE (pagada_at IS NOT NULL)                                                                    | NORMAL     | btree        |
| public     | delivery_orders                | idx_delivery_orders_rest_cooking_started                        | CREATE INDEX idx_delivery_orders_rest_cooking_started ON public.delivery_orders USING btree (restaurant_id, cooking_started_at DESC)                                                       | NORMAL     | btree        |
| public     | delivery_orders                | idx_delivery_orders_rest_status                                 | CREATE INDEX idx_delivery_orders_rest_status ON public.delivery_orders USING btree (restaurant_id, status)                                                                                 | NORMAL     | btree        |
| public     | delivery_orders                | idx_delivery_orders_restaurant_date                             | CREATE INDEX idx_delivery_orders_restaurant_date ON public.delivery_orders USING btree (restaurant_id, created_at)                                                                         | NORMAL     | btree        |
| public     | delivery_orders                | idx_delivery_orders_status                                      | CREATE INDEX idx_delivery_orders_status ON public.delivery_orders USING btree (status)                                                                                                     | NORMAL     | btree        |
| public     | delivery_personnel             | delivery_personnel_pkey                                         | CREATE UNIQUE INDEX delivery_personnel_pkey ON public.delivery_personnel USING btree (id)                                                                                                  | UNIQUE     | btree        |
| public     | delivery_personnel             | idx_delivery_personnel_restaurant                               | CREATE INDEX idx_delivery_personnel_restaurant ON public.delivery_personnel USING btree (restaurant_id, is_active)                                                                         | NORMAL     | btree        |
| public     | departments                    | departments_country_id_code_key                                 | CREATE UNIQUE INDEX departments_country_id_code_key ON public.departments USING btree (country_id, code)                                                                                   | UNIQUE     | btree        |
| public     | departments                    | departments_country_id_name_key                                 | CREATE UNIQUE INDEX departments_country_id_name_key ON public.departments USING btree (country_id, name)                                                                                   | UNIQUE     | btree        |
| public     | departments                    | departments_pkey                                                | CREATE UNIQUE INDEX departments_pkey ON public.departments USING btree (id)                                                                                                                | UNIQUE     | btree        |
| public     | departments                    | idx_departments_active                                          | CREATE INDEX idx_departments_active ON public.departments USING btree (is_active)                                                                                                          | NORMAL     | btree        |
| public     | departments                    | idx_departments_country                                         | CREATE INDEX idx_departments_country ON public.departments USING btree (country_id)                                                                                                        | NORMAL     | btree        |
| public     | facturas                       | facturas_pkey                                                   | CREATE UNIQUE INDEX facturas_pkey ON public.facturas USING btree (id)                                                                                                                      | UNIQUE     | btree        |
| public     | facturas                       | idx_facturas_anulada_por                                        | CREATE INDEX idx_facturas_anulada_por ON public.facturas USING btree (anulada_por)                                                                                                         | NORMAL     | btree        |
| public     | facturas                       | idx_facturas_estado                                             | CREATE INDEX idx_facturas_estado ON public.facturas USING btree (estado)                                                                                                                   | NORMAL     | btree        |
| public     | facturas                       | idx_facturas_generada_at                                        | CREATE INDEX idx_facturas_generada_at ON public.facturas USING btree (generada_at DESC)                                                                                                    | NORMAL     | btree        |
| public     | facturas                       | idx_facturas_generada_por                                       | CREATE INDEX idx_facturas_generada_por ON public.facturas USING btree (generada_por)                                                                                                       | NORMAL     | btree        |
| public     | facturas                       | idx_facturas_restaurant_estado                                  | CREATE INDEX idx_facturas_restaurant_estado ON public.facturas USING btree (restaurant_id, estado)                                                                                         | NORMAL     | btree        |
| public     | facturas                       | idx_facturas_restaurant_fecha                                   | CREATE INDEX idx_facturas_restaurant_fecha ON public.facturas USING btree (restaurant_id, generada_at DESC)                                                                                | NORMAL     | btree        |
| public     | facturas                       | idx_facturas_restaurant_id                                      | CREATE INDEX idx_facturas_restaurant_id ON public.facturas USING btree (restaurant_id)                                                                                                     | NORMAL     | btree        |
| public     | facturas                       | idx_facturas_restaurant_numero                                  | CREATE INDEX idx_facturas_restaurant_numero ON public.facturas USING btree (restaurant_id, numero_factura)                                                                                 | NORMAL     | btree        |
| public     | facturas                       | idx_facturas_transaccion_id                                     | CREATE INDEX idx_facturas_transaccion_id ON public.facturas USING btree (transaccion_id)                                                                                                   | NORMAL     | btree        |
| public     | facturas                       | uk_numero_factura_por_restaurant                                | CREATE UNIQUE INDEX uk_numero_factura_por_restaurant ON public.facturas USING btree (restaurant_id, numero_factura)                                                                        | UNIQUE     | btree        |
| public     | favorite_combinations          | favorite_combinations_pkey                                      | CREATE UNIQUE INDEX favorite_combinations_pkey ON public.favorite_combinations USING btree (id)                                                                                            | UNIQUE     | btree        |
| public     | gastos_caja                    | gastos_caja_pkey                                                | CREATE UNIQUE INDEX gastos_caja_pkey ON public.gastos_caja USING btree (id)                                                                                                                | UNIQUE     | btree        |
| public     | gastos_caja                    | idx_gastos_caja_registrado_por                                  | CREATE INDEX idx_gastos_caja_registrado_por ON public.gastos_caja USING btree (registrado_por)                                                                                             | NORMAL     | btree        |
| public     | gastos_caja                    | idx_gastos_caja_sesion_id                                       | CREATE INDEX idx_gastos_caja_sesion_id ON public.gastos_caja USING btree (caja_sesion_id)                                                                                                  | NORMAL     | btree        |
| public     | generated_combinations         | generated_combinations_pkey                                     | CREATE UNIQUE INDEX generated_combinations_pkey ON public.generated_combinations USING btree (id)                                                                                          | UNIQUE     | btree        |
| public     | generated_combinations         | idx_combinations_menu_available                                 | CREATE INDEX idx_combinations_menu_available ON public.generated_combinations USING btree (daily_menu_id, is_available)                                                                    | NORMAL     | btree        |
| public     | generated_combinations         | idx_combinations_products                                       | CREATE INDEX idx_combinations_products ON public.generated_combinations USING btree (principio_product_id, proteina_product_id)                                                            | NORMAL     | btree        |
| public     | generated_combinations         | idx_generated_combinations_bebida_product_id                    | CREATE INDEX idx_generated_combinations_bebida_product_id ON public.generated_combinations USING btree (bebida_product_id)                                                                 | NORMAL     | btree        |
| public     | generated_combinations         | idx_generated_combinations_entrada_product_id                   | CREATE INDEX idx_generated_combinations_entrada_product_id ON public.generated_combinations USING btree (entrada_product_id)                                                               | NORMAL     | btree        |
| public     | generated_combinations         | idx_generated_combinations_proteina_product_id                  | CREATE INDEX idx_generated_combinations_proteina_product_id ON public.generated_combinations USING btree (proteina_product_id)                                                             | NORMAL     | btree        |
| public     | generated_special_combinations | generated_special_combinations_pkey                             | CREATE UNIQUE INDEX generated_special_combinations_pkey ON public.generated_special_combinations USING btree (id)                                                                          | UNIQUE     | btree        |
| public     | generated_special_combinations | idx_generated_special_combinations_bebida_product_id            | CREATE INDEX idx_generated_special_combinations_bebida_product_id ON public.generated_special_combinations USING btree (bebida_product_id)                                                 | NORMAL     | btree        |
| public     | generated_special_combinations | idx_generated_special_combinations_entrada_product_id           | CREATE INDEX idx_generated_special_combinations_entrada_product_id ON public.generated_special_combinations USING btree (entrada_product_id)                                               | NORMAL     | btree        |
| public     | generated_special_combinations | idx_generated_special_combinations_principio_product_id         | CREATE INDEX idx_generated_special_combinations_principio_product_id ON public.generated_special_combinations USING btree (principio_product_id)                                           | NORMAL     | btree        |
| public     | generated_special_combinations | idx_generated_special_combinations_proteina_product_id          | CREATE INDEX idx_generated_special_combinations_proteina_product_id ON public.generated_special_combinations USING btree (proteina_product_id)                                             | NORMAL     | btree        |
| public     | generated_special_combinations | idx_special_combinations_available_today                        | CREATE INDEX idx_special_combinations_available_today ON public.generated_special_combinations USING btree (available_today)                                                               | NORMAL     | btree        |
| public     | generated_special_combinations | idx_special_combinations_dish_id                                | CREATE INDEX idx_special_combinations_dish_id ON public.generated_special_combinations USING btree (special_dish_id)                                                                       | NORMAL     | btree        |
| public     | items_orden_mesa               | idx_items_orden_mesa_combinacion_especial_id                    | CREATE INDEX idx_items_orden_mesa_combinacion_especial_id ON public.items_orden_mesa USING btree (combinacion_especial_id)                                                                 | NORMAL     | btree        |
| public     | items_orden_mesa               | idx_items_orden_mesa_combinacion_id                             | CREATE INDEX idx_items_orden_mesa_combinacion_id ON public.items_orden_mesa USING btree (combinacion_id)                                                                                   | NORMAL     | btree        |
| public     | items_orden_mesa               | idx_items_orden_mesa_orden_id                                   | CREATE INDEX idx_items_orden_mesa_orden_id ON public.items_orden_mesa USING btree (orden_mesa_id)                                                                                          | NORMAL     | btree        |
| public     | items_orden_mesa               | items_orden_mesa_pkey                                           | CREATE UNIQUE INDEX items_orden_mesa_pkey ON public.items_orden_mesa USING btree (id)                                                                                                      | UNIQUE     | btree        |
| public     | menu_template_products         | menu_template_products_pkey                                     | CREATE UNIQUE INDEX menu_template_products_pkey ON public.menu_template_products USING btree (id)                                                                                          | UNIQUE     | btree        |
| public     | menu_templates                 | menu_templates_pkey                                             | CREATE UNIQUE INDEX menu_templates_pkey ON public.menu_templates USING btree (id)                                                                                                          | UNIQUE     | btree        |
| public     | mesa_estado_audit              | idx_mesa_estado_audit_mesa_id                                   | CREATE INDEX idx_mesa_estado_audit_mesa_id ON public.mesa_estado_audit USING btree (mesa_id)                                                                                               | NORMAL     | btree        |
| public     | mesa_estado_audit              | idx_mesa_estado_audit_user_id                                   | CREATE INDEX idx_mesa_estado_audit_user_id ON public.mesa_estado_audit USING btree (user_id)                                                                                               | NORMAL     | btree        |
| public     | mesa_estado_audit              | mesa_estado_audit_pkey                                          | CREATE UNIQUE INDEX mesa_estado_audit_pkey ON public.mesa_estado_audit USING btree (id)                                                                                                    | UNIQUE     | btree        |
| public     | numeracion_facturas            | idx_numeracion_facturas_restaurant_id                           | CREATE INDEX idx_numeracion_facturas_restaurant_id ON public.numeracion_facturas USING btree (restaurant_id)                                                                               | NORMAL     | btree        |
| public     | numeracion_facturas            | numeracion_facturas_pkey                                        | CREATE UNIQUE INDEX numeracion_facturas_pkey ON public.numeracion_facturas USING btree (id)                                                                                                | UNIQUE     | btree        |
| public     | ordenes_mesa                   | idx_ordenes_mesa_activa_mesa                                    | CREATE INDEX idx_ordenes_mesa_activa_mesa ON public.ordenes_mesa USING btree (mesa_id) WHERE ((estado)::text = 'activa'::text)                                                             | NORMAL     | btree        |
| public     | ordenes_mesa                   | idx_ordenes_mesa_activas                                        | CREATE INDEX idx_ordenes_mesa_activas ON public.ordenes_mesa USING btree (restaurant_id, estado) WHERE ((estado)::text = 'activa'::text)                                                   | NORMAL     | btree        |
| public     | ordenes_mesa                   | idx_ordenes_mesa_estado_mesa                                    | CREATE INDEX idx_ordenes_mesa_estado_mesa ON public.ordenes_mesa USING btree (mesa_id, estado)                                                                                             | NORMAL     | btree        |
| public     | ordenes_mesa                   | idx_ordenes_mesa_mesa_id                                        | CREATE INDEX idx_ordenes_mesa_mesa_id ON public.ordenes_mesa USING btree (mesa_id)                                                                                                         | NORMAL     | btree        |
| public     | ordenes_mesa                   | idx_ordenes_mesa_numero_estado                                  | CREATE INDEX idx_ordenes_mesa_numero_estado ON public.ordenes_mesa USING btree (numero_mesa, estado)                                                                                       | NORMAL     | btree        |
| public     | ordenes_mesa                   | idx_ordenes_mesa_pagada                                         | CREATE INDEX idx_ordenes_mesa_pagada ON public.ordenes_mesa USING btree (pagada_at) WHERE (pagada_at IS NOT NULL)                                                                          | NORMAL     | btree        |
| public     | ordenes_mesa                   | idx_ordenes_mesa_rest_estado                                    | CREATE INDEX idx_ordenes_mesa_rest_estado ON public.ordenes_mesa USING btree (restaurant_id, estado)                                                                                       | NORMAL     | btree        |
| public     | ordenes_mesa                   | idx_ordenes_mesa_restaurant_fecha                               | CREATE INDEX idx_ordenes_mesa_restaurant_fecha ON public.ordenes_mesa USING btree (restaurant_id, fecha_creacion DESC)                                                                     | NORMAL     | btree        |
| public     | ordenes_mesa                   | idx_ordenes_mesa_restaurant_mesa                                | CREATE INDEX idx_ordenes_mesa_restaurant_mesa ON public.ordenes_mesa USING btree (restaurant_id, mesa_id)                                                                                  | NORMAL     | btree        |
| public     | ordenes_mesa                   | ordenes_mesa_pkey                                               | CREATE UNIQUE INDEX ordenes_mesa_pkey ON public.ordenes_mesa USING btree (id)                                                                                                              | UNIQUE     | btree        |
| public     | permissions                    | idx_permissions_critical                                        | CREATE INDEX idx_permissions_critical ON public.permissions USING btree (is_critical)                                                                                                      | NORMAL     | btree        |
| public     | permissions                    | idx_permissions_module                                          | CREATE INDEX idx_permissions_module ON public.permissions USING btree (module)                                                                                                             | NORMAL     | btree        |
| public     | permissions                    | idx_permissions_name                                            | CREATE INDEX idx_permissions_name ON public.permissions USING btree (name)                                                                                                                 | NORMAL     | btree        |
| public     | permissions                    | permissions_name_key                                            | CREATE UNIQUE INDEX permissions_name_key ON public.permissions USING btree (name)                                                                                                          | UNIQUE     | btree        |
| public     | permissions                    | permissions_pkey                                                | CREATE UNIQUE INDEX permissions_pkey ON public.permissions USING btree (id)                                                                                                                | UNIQUE     | btree        |
| public     | product_aliases                | idx_product_aliases_search                                      | CREATE INDEX idx_product_aliases_search ON public.product_aliases USING btree (alias)                                                                                                      | NORMAL     | btree        |
| public     | product_aliases                | idx_product_aliases_universal_product_id                        | CREATE INDEX idx_product_aliases_universal_product_id ON public.product_aliases USING btree (universal_product_id)                                                                         | NORMAL     | btree        |
| public     | product_aliases                | product_aliases_pkey                                            | CREATE UNIQUE INDEX product_aliases_pkey ON public.product_aliases USING btree (id)                                                                                                        | UNIQUE     | btree        |
| public     | product_suggestions            | idx_product_suggestions_approved_product_id                     | CREATE INDEX idx_product_suggestions_approved_product_id ON public.product_suggestions USING btree (approved_product_id)                                                                   | NORMAL     | btree        |
| public     | product_suggestions            | idx_product_suggestions_reviewed_by                             | CREATE INDEX idx_product_suggestions_reviewed_by ON public.product_suggestions USING btree (reviewed_by)                                                                                   | NORMAL     | btree        |
| public     | product_suggestions            | idx_product_suggestions_suggested_by_restaurant_id              | CREATE INDEX idx_product_suggestions_suggested_by_restaurant_id ON public.product_suggestions USING btree (suggested_by_restaurant_id)                                                     | NORMAL     | btree        |
| public     | product_suggestions            | idx_product_suggestions_suggested_by_user_id                    | CREATE INDEX idx_product_suggestions_suggested_by_user_id ON public.product_suggestions USING btree (suggested_by_user_id)                                                                 | NORMAL     | btree        |
| public     | product_suggestions            | idx_product_suggestions_suggested_category_id                   | CREATE INDEX idx_product_suggestions_suggested_category_id ON public.product_suggestions USING btree (suggested_category_id)                                                               | NORMAL     | btree        |
| public     | product_suggestions            | product_suggestions_pkey                                        | CREATE UNIQUE INDEX product_suggestions_pkey ON public.product_suggestions USING btree (id)                                                                                                | UNIQUE     | btree        |
| public     | profiles                       | profiles_pkey                                                   | CREATE UNIQUE INDEX profiles_pkey ON public.profiles USING btree (id)                                                                                                                      | UNIQUE     | btree        |
| public     | protein_quantities             | idx_protein_quantities_menu                                     | CREATE INDEX idx_protein_quantities_menu ON public.protein_quantities USING btree (daily_menu_id)                                                                                          | NORMAL     | btree        |
| public     | protein_quantities             | idx_protein_quantities_product                                  | CREATE INDEX idx_protein_quantities_product ON public.protein_quantities USING btree (protein_product_id, planned_quantity)                                                                | NORMAL     | btree        |
| public     | protein_quantities             | protein_quantities_daily_menu_id_protein_product_id_key         | CREATE UNIQUE INDEX protein_quantities_daily_menu_id_protein_product_id_key ON public.protein_quantities USING btree (daily_menu_id, protein_product_id)                                   | UNIQUE     | btree        |
| public     | protein_quantities             | protein_quantities_pkey                                         | CREATE UNIQUE INDEX protein_quantities_pkey ON public.protein_quantities USING btree (id)                                                                                                  | UNIQUE     | btree        |
| public     | restaurant_custom_roles        | restaurant_custom_roles_pkey                                    | CREATE UNIQUE INDEX restaurant_custom_roles_pkey ON public.restaurant_custom_roles USING btree (id)                                                                                        | UNIQUE     | btree        |
| public     | restaurant_custom_roles        | restaurant_custom_roles_restaurant_id_name_key                  | CREATE UNIQUE INDEX restaurant_custom_roles_restaurant_id_name_key ON public.restaurant_custom_roles USING btree (restaurant_id, name)                                                     | UNIQUE     | btree        |
| public     | restaurant_favorites           | idx_restaurant_favorites_product                                | CREATE INDEX idx_restaurant_favorites_product ON public.restaurant_favorites USING btree (product_id)                                                                                      | NORMAL     | btree        |
| public     | restaurant_favorites           | idx_restaurant_favorites_restaurant                             | CREATE INDEX idx_restaurant_favorites_restaurant ON public.restaurant_favorites USING btree (restaurant_id)                                                                                | NORMAL     | btree        |
| public     | restaurant_favorites           | restaurant_favorites_pkey                                       | CREATE UNIQUE INDEX restaurant_favorites_pkey ON public.restaurant_favorites USING btree (id)                                                                                              | UNIQUE     | btree        |
| public     | restaurant_favorites           | restaurant_favorites_restaurant_id_product_id_key               | CREATE UNIQUE INDEX restaurant_favorites_restaurant_id_product_id_key ON public.restaurant_favorites USING btree (restaurant_id, product_id)                                               | UNIQUE     | btree        |
| public     | restaurant_mesas               | idx_restaurant_mesas_numero                                     | CREATE INDEX idx_restaurant_mesas_numero ON public.restaurant_mesas USING btree (restaurant_id, numero)                                                                                    | NORMAL     | btree        |
| public     | restaurant_mesas               | idx_restaurant_mesas_restaurant_estado                          | CREATE INDEX idx_restaurant_mesas_restaurant_estado ON public.restaurant_mesas USING btree (restaurant_id, estado)                                                                         | NORMAL     | btree        |
| public     | restaurant_mesas               | idx_restaurant_mesas_restaurant_id                              | CREATE INDEX idx_restaurant_mesas_restaurant_id ON public.restaurant_mesas USING btree (restaurant_id)                                                                                     | NORMAL     | btree        |
| public     | restaurant_mesas               | restaurant_mesas_pkey                                           | CREATE UNIQUE INDEX restaurant_mesas_pkey ON public.restaurant_mesas USING btree (id)                                                                                                      | UNIQUE     | btree        |
| public     | restaurant_mesas               | restaurant_mesas_restaurant_id_numero_key                       | CREATE UNIQUE INDEX restaurant_mesas_restaurant_id_numero_key ON public.restaurant_mesas USING btree (restaurant_id, numero)                                                               | UNIQUE     | btree        |
| public     | restaurant_product_usage       | idx_restaurant_usage_product                                    | CREATE INDEX idx_restaurant_usage_product ON public.restaurant_product_usage USING btree (universal_product_id, total_orders DESC)                                                         | NORMAL     | btree        |
| public     | restaurant_product_usage       | idx_restaurant_usage_restaurant                                 | CREATE INDEX idx_restaurant_usage_restaurant ON public.restaurant_product_usage USING btree (restaurant_id, last_used_date DESC)                                                           | NORMAL     | btree        |
| public     | restaurant_product_usage       | restaurant_product_usage_pkey                                   | CREATE UNIQUE INDEX restaurant_product_usage_pkey ON public.restaurant_product_usage USING btree (id)                                                                                      | UNIQUE     | btree        |
| public     | restaurant_product_usage       | restaurant_product_usage_restaurant_id_universal_product_id_key | CREATE UNIQUE INDEX restaurant_product_usage_restaurant_id_universal_product_id_key ON public.restaurant_product_usage USING btree (restaurant_id, universal_product_id)                   | UNIQUE     | btree        |
| public     | restaurant_role_configs        | idx_restaurant_role_configs_configured_by                       | CREATE INDEX idx_restaurant_role_configs_configured_by ON public.restaurant_role_configs USING btree (configured_by)                                                                       | NORMAL     | btree        |
| public     | restaurant_role_configs        | idx_restaurant_role_configs_lookup                              | CREATE INDEX idx_restaurant_role_configs_lookup ON public.restaurant_role_configs USING btree (restaurant_id, role_id, permission_id)                                                      | NORMAL     | btree        |
| public     | restaurant_role_configs        | idx_restaurant_role_configs_permission                          | CREATE INDEX idx_restaurant_role_configs_permission ON public.restaurant_role_configs USING btree (permission_id)                                                                          | NORMAL     | btree        |
| public     | restaurant_role_configs        | idx_restaurant_role_configs_restaurant                          | CREATE INDEX idx_restaurant_role_configs_restaurant ON public.restaurant_role_configs USING btree (restaurant_id)                                                                          | NORMAL     | btree        |
| public     | restaurant_role_configs        | idx_restaurant_role_configs_role                                | CREATE INDEX idx_restaurant_role_configs_role ON public.restaurant_role_configs USING btree (role_id)                                                                                      | NORMAL     | btree        |
| public     | restaurant_role_configs        | restaurant_role_configs_pkey                                    | CREATE UNIQUE INDEX restaurant_role_configs_pkey ON public.restaurant_role_configs USING btree (id)                                                                                        | UNIQUE     | btree        |
| public     | restaurant_role_configs        | restaurant_role_configs_restaurant_id_role_id_permission_id_key | CREATE UNIQUE INDEX restaurant_role_configs_restaurant_id_role_id_permission_id_key ON public.restaurant_role_configs USING btree (restaurant_id, role_id, permission_id)                  | UNIQUE     | btree        |
| public     | restaurants                    | idx_restaurants_city_id                                         | CREATE INDEX idx_restaurants_city_id ON public.restaurants USING btree (city_id)                                                                                                           | NORMAL     | btree        |
| public     | restaurants                    | idx_restaurants_country_id                                      | CREATE INDEX idx_restaurants_country_id ON public.restaurants USING btree (country_id)                                                                                                     | NORMAL     | btree        |
| public     | restaurants                    | idx_restaurants_cuisine_type_id                                 | CREATE INDEX idx_restaurants_cuisine_type_id ON public.restaurants USING btree (cuisine_type_id)                                                                                           | NORMAL     | btree        |
| public     | restaurants                    | idx_restaurants_department_id                                   | CREATE INDEX idx_restaurants_department_id ON public.restaurants USING btree (department_id)                                                                                               | NORMAL     | btree        |
| public     | restaurants                    | idx_restaurants_location                                        | CREATE INDEX idx_restaurants_location ON public.restaurants USING btree (latitude, longitude)                                                                                              | NORMAL     | btree        |
| public     | restaurants                    | idx_restaurants_owner                                           | CREATE INDEX idx_restaurants_owner ON public.restaurants USING btree (owner_id)                                                                                                            | NORMAL     | btree        |
| public     | restaurants                    | idx_restaurants_setup                                           | CREATE INDEX idx_restaurants_setup ON public.restaurants USING btree (setup_completed, setup_step)                                                                                         | NORMAL     | btree        |
| public     | restaurants                    | restaurants_pkey                                                | CREATE UNIQUE INDEX restaurants_pkey ON public.restaurants USING btree (id)                                                                                                                | UNIQUE     | btree        |
| public     | role_permissions               | idx_role_permissions_granted                                    | CREATE INDEX idx_role_permissions_granted ON public.role_permissions USING btree (granted)                                                                                                 | NORMAL     | btree        |
| public     | role_permissions               | idx_role_permissions_permission_id                              | CREATE INDEX idx_role_permissions_permission_id ON public.role_permissions USING btree (permission_id)                                                                                     | NORMAL     | btree        |
| public     | role_permissions               | idx_role_permissions_role_granted                               | CREATE INDEX idx_role_permissions_role_granted ON public.role_permissions USING btree (role_id, granted)                                                                                   | NORMAL     | btree        |
| public     | role_permissions               | idx_role_permissions_role_id                                    | CREATE INDEX idx_role_permissions_role_id ON public.role_permissions USING btree (role_id)                                                                                                 | NORMAL     | btree        |
| public     | role_permissions               | role_permissions_pkey                                           | CREATE UNIQUE INDEX role_permissions_pkey ON public.role_permissions USING btree (id)                                                                                                      | UNIQUE     | btree        |
| public     | role_permissions               | role_permissions_role_id_permission_id_key                      | CREATE UNIQUE INDEX role_permissions_role_id_permission_id_key ON public.role_permissions USING btree (role_id, permission_id)                                                             | UNIQUE     | btree        |
| public     | security_alerts                | idx_security_alerts_cajero_id                                   | CREATE INDEX idx_security_alerts_cajero_id ON public.security_alerts USING btree (cajero_id)                                                                                               | NORMAL     | btree        |
| public     | security_alerts                | idx_security_alerts_restaurant_id                               | CREATE INDEX idx_security_alerts_restaurant_id ON public.security_alerts USING btree (restaurant_id)                                                                                       | NORMAL     | btree        |
| public     | security_alerts                | idx_security_alerts_revisada_por                                | CREATE INDEX idx_security_alerts_revisada_por ON public.security_alerts USING btree (revisada_por)                                                                                         | NORMAL     | btree        |
| public     | security_alerts                | security_alerts_pkey                                            | CREATE UNIQUE INDEX security_alerts_pkey ON public.security_alerts USING btree (id)                                                                                                        | UNIQUE     | btree        |
| public     | security_limits                | security_limits_pkey                                            | CREATE UNIQUE INDEX security_limits_pkey ON public.security_limits USING btree (id)                                                                                                        | UNIQUE     | btree        |
| public     | security_limits                | security_limits_restaurant_id_key                               | CREATE UNIQUE INDEX security_limits_restaurant_id_key ON public.security_limits USING btree (restaurant_id)                                                                                | UNIQUE     | btree        |
| public     | security_policies              | idx_security_policies_restaurant_id                             | CREATE INDEX idx_security_policies_restaurant_id ON public.security_policies USING btree (restaurant_id)                                                                                   | NORMAL     | btree        |
| public     | security_policies              | security_policies_pkey                                          | CREATE UNIQUE INDEX security_policies_pkey ON public.security_policies USING btree (id)                                                                                                    | UNIQUE     | btree        |
| public     | special_dish_selections        | idx_special_dish_selections_category_id                         | CREATE INDEX idx_special_dish_selections_category_id ON public.special_dish_selections USING btree (category_id)                                                                           | NORMAL     | btree        |
| public     | special_dish_selections        | idx_special_dish_selections_dish_id                             | CREATE INDEX idx_special_dish_selections_dish_id ON public.special_dish_selections USING btree (special_dish_id)                                                                           | NORMAL     | btree        |
| public     | special_dish_selections        | idx_special_dish_selections_product_id                          | CREATE INDEX idx_special_dish_selections_product_id ON public.special_dish_selections USING btree (universal_product_id)                                                                   | NORMAL     | btree        |
| public     | special_dish_selections        | special_dish_selections_pkey                                    | CREATE UNIQUE INDEX special_dish_selections_pkey ON public.special_dish_selections USING btree (id)                                                                                        | UNIQUE     | btree        |
| public     | special_dish_selections        | unique_product_per_special_dish                                 | CREATE UNIQUE INDEX unique_product_per_special_dish ON public.special_dish_selections USING btree (special_dish_id, universal_product_id)                                                  | UNIQUE     | btree        |
| public     | special_dishes                 | idx_special_dishes_has_image                                    | CREATE INDEX idx_special_dishes_has_image ON public.special_dishes USING btree (restaurant_id) WHERE (image_url IS NOT NULL)                                                               | NORMAL     | btree        |
| public     | special_dishes                 | special_dishes_pkey                                             | CREATE UNIQUE INDEX special_dishes_pkey ON public.special_dishes USING btree (id)                                                                                                          | UNIQUE     | btree        |
| public     | special_protein_quantities     | idx_special_protein_quantities_dish_id                          | CREATE INDEX idx_special_protein_quantities_dish_id ON public.special_protein_quantities USING btree (special_dish_id)                                                                     | NORMAL     | btree        |
| public     | special_protein_quantities     | idx_special_protein_quantities_protein_product_id               | CREATE INDEX idx_special_protein_quantities_protein_product_id ON public.special_protein_quantities USING btree (protein_product_id)                                                       | NORMAL     | btree        |
| public     | special_protein_quantities     | special_protein_quantities_pkey                                 | CREATE UNIQUE INDEX special_protein_quantities_pkey ON public.special_protein_quantities USING btree (id)                                                                                  | UNIQUE     | btree        |
| public     | special_protein_quantities     | unique_protein_per_special_dish                                 | CREATE UNIQUE INDEX unique_protein_per_special_dish ON public.special_protein_quantities USING btree (special_dish_id, protein_product_id)                                                 | UNIQUE     | btree        |
| public     | system_roles                   | idx_system_roles_name                                           | CREATE INDEX idx_system_roles_name ON public.system_roles USING btree (name)                                                                                                               | NORMAL     | btree        |
| public     | system_roles                   | system_roles_name_key                                           | CREATE UNIQUE INDEX system_roles_name_key ON public.system_roles USING btree (name)                                                                                                        | UNIQUE     | btree        |
| public     | system_roles                   | system_roles_pkey                                               | CREATE UNIQUE INDEX system_roles_pkey ON public.system_roles USING btree (id)                                                                                                              | UNIQUE     | btree        |
| public     | transacciones_caja             | idx_transacciones_caja_cajero_id                                | CREATE INDEX idx_transacciones_caja_cajero_id ON public.transacciones_caja USING btree (cajero_id)                                                                                         | NORMAL     | btree        |
| public     | transacciones_caja             | idx_transacciones_caja_delivery_order_id                        | CREATE INDEX idx_transacciones_caja_delivery_order_id ON public.transacciones_caja USING btree (delivery_order_id)                                                                         | NORMAL     | btree        |
| public     | transacciones_caja             | idx_transacciones_caja_orden_mesa_id                            | CREATE INDEX idx_transacciones_caja_orden_mesa_id ON public.transacciones_caja USING btree (orden_mesa_id)                                                                                 | NORMAL     | btree        |
| public     | transacciones_caja             | idx_transacciones_caja_sesion                                   | CREATE INDEX idx_transacciones_caja_sesion ON public.transacciones_caja USING btree (caja_sesion_id)                                                                                       | NORMAL     | btree        |
| public     | transacciones_caja             | idx_transacciones_fecha                                         | CREATE INDEX idx_transacciones_fecha ON public.transacciones_caja USING btree (procesada_at)                                                                                               | NORMAL     | btree        |
| public     | transacciones_caja             | transacciones_caja_pkey                                         | CREATE UNIQUE INDEX transacciones_caja_pkey ON public.transacciones_caja USING btree (id)                                                                                                  | UNIQUE     | btree        |
| public     | universal_categories           | universal_categories_name_key                                   | CREATE UNIQUE INDEX universal_categories_name_key ON public.universal_categories USING btree (name)                                                                                        | UNIQUE     | btree        |
| public     | universal_categories           | universal_categories_pkey                                       | CREATE UNIQUE INDEX universal_categories_pkey ON public.universal_categories USING btree (id)                                                                                              | UNIQUE     | btree        |
| public     | universal_categories           | universal_categories_slug_key                                   | CREATE UNIQUE INDEX universal_categories_slug_key ON public.universal_categories USING btree (slug)                                                                                        | UNIQUE     | btree        |
| public     | universal_products             | idx_universal_products_category_popularity                      | CREATE INDEX idx_universal_products_category_popularity ON public.universal_products USING btree (category_id, popularity_score DESC, name)                                                | NORMAL     | btree        |
| public     | universal_products             | idx_universal_products_created_by                               | CREATE INDEX idx_universal_products_created_by ON public.universal_products USING btree (created_by)                                                                                       | NORMAL     | btree        |
| public     | universal_products             | idx_universal_products_regional_names                           | CREATE INDEX idx_universal_products_regional_names ON public.universal_products USING gin (regional_names)                                                                                 | NORMAL     | gin          |
| public     | universal_products             | idx_universal_products_regions                                  | CREATE INDEX idx_universal_products_regions ON public.universal_products USING gin (common_regions)                                                                                        | NORMAL     | gin          |
| public     | universal_products             | idx_universal_products_search                                   | CREATE INDEX idx_universal_products_search ON public.universal_products USING gin (to_tsvector('spanish'::regconfig, (((name)::text || ' '::text) || COALESCE(description, ''::text))))    | NORMAL     | gin          |
| public     | universal_products             | idx_universal_products_tags                                     | CREATE INDEX idx_universal_products_tags ON public.universal_products USING gin (search_tags)                                                                                              | NORMAL     | gin          |
| public     | universal_products             | universal_products_pkey                                         | CREATE UNIQUE INDEX universal_products_pkey ON public.universal_products USING btree (id)                                                                                                  | UNIQUE     | btree        |
| public     | user_profiles_app              | idx_user_profiles_active                                        | CREATE INDEX idx_user_profiles_active ON public.user_profiles_app USING btree (is_active)                                                                                                  | NORMAL     | btree        |
| public     | user_profiles_app              | idx_user_profiles_email                                         | CREATE INDEX idx_user_profiles_email ON public.user_profiles_app USING btree (email)                                                                                                       | NORMAL     | btree        |
| public     | user_profiles_app              | idx_user_profiles_role                                          | CREATE INDEX idx_user_profiles_role ON public.user_profiles_app USING btree (role)                                                                                                         | NORMAL     | btree        |
| public     | user_profiles_app              | user_profiles_pkey                                              | CREATE UNIQUE INDEX user_profiles_pkey ON public.user_profiles_app USING btree (id)                                                                                                        | UNIQUE     | btree        |
| public     | user_roles                     | idx_user_roles_active                                           | CREATE INDEX idx_user_roles_active ON public.user_roles USING btree (is_active)                                                                                                            | NORMAL     | btree        |
| public     | user_roles                     | idx_user_roles_assigned_by                                      | CREATE INDEX idx_user_roles_assigned_by ON public.user_roles USING btree (assigned_by)                                                                                                     | NORMAL     | btree        |
| public     | user_roles                     | idx_user_roles_lookup                                           | CREATE INDEX idx_user_roles_lookup ON public.user_roles USING btree (user_id, restaurant_id, is_active)                                                                                    | NORMAL     | btree        |
| public     | user_roles                     | idx_user_roles_restaurant_id                                    | CREATE INDEX idx_user_roles_restaurant_id ON public.user_roles USING btree (restaurant_id)                                                                                                 | NORMAL     | btree        |
| public     | user_roles                     | idx_user_roles_role_id                                          | CREATE INDEX idx_user_roles_role_id ON public.user_roles USING btree (role_id)                                                                                                             | NORMAL     | btree        |
| public     | user_roles                     | idx_user_roles_user_id                                          | CREATE INDEX idx_user_roles_user_id ON public.user_roles USING btree (user_id)                                                                                                             | NORMAL     | btree        |
| public     | user_roles                     | user_roles_pkey                                                 | CREATE UNIQUE INDEX user_roles_pkey ON public.user_roles USING btree (id)                                                                                                                  | UNIQUE     | btree        |
| public     | user_roles                     | user_roles_user_id_restaurant_id_key                            | CREATE UNIQUE INDEX user_roles_user_id_restaurant_id_key ON public.user_roles USING btree (user_id, restaurant_id)                                                                         | UNIQUE     | btree        |
| public     | users                          | idx_users_email                                                 | CREATE INDEX idx_users_email ON public.users USING btree (email)                                                                                                                           | NORMAL     | btree        |
| public     | users                          | idx_users_restaurant                                            | CREATE INDEX idx_users_restaurant ON public.users USING btree (restaurant_id)                                                                                                              | NORMAL     | btree        |
| public     | users                          | users_email_key                                                 | CREATE UNIQUE INDEX users_email_key ON public.users USING btree (email)                                                                                                                    | UNIQUE     | btree        |
| public     | users                          | users_pkey                                                      | CREATE UNIQUE INDEX users_pkey ON public.users USING btree (id)                                                                                                                            | UNIQUE     | btree        |
| public     | users                          | users_restaurant_id_key                                         | CREATE UNIQUE INDEX users_restaurant_id_key ON public.users USING btree (restaurant_id)                                                                                                    | UNIQUE     | btree        |
| realtime   | messages                       | messages_inserted_at_topic_index                                | CREATE INDEX messages_inserted_at_topic_index ON ONLY realtime.messages USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE))                | NORMAL     | btree        |
| realtime   | messages                       | messages_pkey                                                   | CREATE UNIQUE INDEX messages_pkey ON ONLY realtime.messages USING btree (id, inserted_at)                                                                                                  | UNIQUE     | btree        |
| realtime   | messages_2025_11_07            | messages_2025_11_07_inserted_at_topic_idx                       | CREATE INDEX messages_2025_11_07_inserted_at_topic_idx ON realtime.messages_2025_11_07 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE)) | NORMAL     | btree        |
| realtime   | messages_2025_11_07            | messages_2025_11_07_pkey                                        | CREATE UNIQUE INDEX messages_2025_11_07_pkey ON realtime.messages_2025_11_07 USING btree (id, inserted_at)                                                                                 | UNIQUE     | btree        |
| realtime   | messages_2025_11_08            | messages_2025_11_08_inserted_at_topic_idx                       | CREATE INDEX messages_2025_11_08_inserted_at_topic_idx ON realtime.messages_2025_11_08 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE)) | NORMAL     | btree        |
| realtime   | messages_2025_11_08            | messages_2025_11_08_pkey                                        | CREATE UNIQUE INDEX messages_2025_11_08_pkey ON realtime.messages_2025_11_08 USING btree (id, inserted_at)                                                                                 | UNIQUE     | btree        |
| realtime   | messages_2025_11_09            | messages_2025_11_09_inserted_at_topic_idx                       | CREATE INDEX messages_2025_11_09_inserted_at_topic_idx ON realtime.messages_2025_11_09 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE)) | NORMAL     | btree        |
| realtime   | messages_2025_11_09            | messages_2025_11_09_pkey                                        | CREATE UNIQUE INDEX messages_2025_11_09_pkey ON realtime.messages_2025_11_09 USING btree (id, inserted_at)                                                                                 | UNIQUE     | btree        |
| realtime   | messages_2025_11_10            | messages_2025_11_10_inserted_at_topic_idx                       | CREATE INDEX messages_2025_11_10_inserted_at_topic_idx ON realtime.messages_2025_11_10 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE)) | NORMAL     | btree        |
| realtime   | messages_2025_11_10            | messages_2025_11_10_pkey                                        | CREATE UNIQUE INDEX messages_2025_11_10_pkey ON realtime.messages_2025_11_10 USING btree (id, inserted_at)                                                                                 | UNIQUE     | btree        |
| realtime   | messages_2025_11_11            | messages_2025_11_11_inserted_at_topic_idx                       | CREATE INDEX messages_2025_11_11_inserted_at_topic_idx ON realtime.messages_2025_11_11 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE)) | NORMAL     | btree        |
| realtime   | messages_2025_11_11            | messages_2025_11_11_pkey                                        | CREATE UNIQUE INDEX messages_2025_11_11_pkey ON realtime.messages_2025_11_11 USING btree (id, inserted_at)                                                                                 | UNIQUE     | btree        |
| realtime   | schema_migrations              | schema_migrations_pkey                                          | CREATE UNIQUE INDEX schema_migrations_pkey ON realtime.schema_migrations USING btree (version)                                                                                             | UNIQUE     | btree        |
| realtime   | subscription                   | ix_realtime_subscription_entity                                 | CREATE INDEX ix_realtime_subscription_entity ON realtime.subscription USING btree (entity)                                                                                                 | NORMAL     | btree        |
| realtime   | subscription                   | pk_subscription                                                 | CREATE UNIQUE INDEX pk_subscription ON realtime.subscription USING btree (id)                                                                                                              | UNIQUE     | btree        |
| realtime   | subscription                   | subscription_subscription_id_entity_filters_key                 | CREATE UNIQUE INDEX subscription_subscription_id_entity_filters_key ON realtime.subscription USING btree (subscription_id, entity, filters)                                                | UNIQUE     | btree        |
| storage    | buckets                        | bname                                                           | CREATE UNIQUE INDEX bname ON storage.buckets USING btree (name)                                                                                                                            | UNIQUE     | btree        |
| storage    | buckets                        | buckets_pkey                                                    | CREATE UNIQUE INDEX buckets_pkey ON storage.buckets USING btree (id)                                                                                                                       | UNIQUE     | btree        |
| storage    | buckets_analytics              | buckets_analytics_pkey                                          | CREATE UNIQUE INDEX buckets_analytics_pkey ON storage.buckets_analytics USING btree (id)                                                                                                   | UNIQUE     | btree        |
| storage    | buckets_analytics              | buckets_analytics_unique_name_idx                               | CREATE UNIQUE INDEX buckets_analytics_unique_name_idx ON storage.buckets_analytics USING btree (name) WHERE (deleted_at IS NULL)                                                           | UNIQUE     | btree        |
| storage    | buckets_vectors                | buckets_vectors_pkey                                            | CREATE UNIQUE INDEX buckets_vectors_pkey ON storage.buckets_vectors USING btree (id)                                                                                                       | UNIQUE     | btree        |
| storage    | migrations                     | migrations_name_key                                             | CREATE UNIQUE INDEX migrations_name_key ON storage.migrations USING btree (name)                                                                                                           | UNIQUE     | btree        |
| storage    | migrations                     | migrations_pkey                                                 | CREATE UNIQUE INDEX migrations_pkey ON storage.migrations USING btree (id)                                                                                                                 | UNIQUE     | btree        |
| storage    | objects                        | bucketid_objname                                                | CREATE UNIQUE INDEX bucketid_objname ON storage.objects USING btree (bucket_id, name)                                                                                                      | UNIQUE     | btree        |
| storage    | objects                        | idx_name_bucket_level_unique                                    | CREATE UNIQUE INDEX idx_name_bucket_level_unique ON storage.objects USING btree (name COLLATE "C", bucket_id, level)                                                                       | UNIQUE     | btree        |
| storage    | objects                        | idx_objects_bucket_id_name                                      | CREATE INDEX idx_objects_bucket_id_name ON storage.objects USING btree (bucket_id, name COLLATE "C")                                                                                       | NORMAL     | btree        |
| storage    | objects                        | idx_objects_lower_name                                          | CREATE INDEX idx_objects_lower_name ON storage.objects USING btree ((path_tokens[level]), lower(name) text_pattern_ops, bucket_id, level)                                                  | NORMAL     | btree        |
| storage    | objects                        | name_prefix_search                                              | CREATE INDEX name_prefix_search ON storage.objects USING btree (name text_pattern_ops)                                                                                                     | NORMAL     | btree        |
| storage    | objects                        | objects_bucket_id_level_idx                                     | CREATE UNIQUE INDEX objects_bucket_id_level_idx ON storage.objects USING btree (bucket_id, level, name COLLATE "C")                                                                        | UNIQUE     | btree        |
| storage    | objects                        | objects_pkey                                                    | CREATE UNIQUE INDEX objects_pkey ON storage.objects USING btree (id)                                                                                                                       | UNIQUE     | btree        |
| storage    | prefixes                       | idx_prefixes_lower_name                                         | CREATE INDEX idx_prefixes_lower_name ON storage.prefixes USING btree (bucket_id, level, ((string_to_array(name, '/'::text))[level]), lower(name) text_pattern_ops)                         | NORMAL     | btree        |
| storage    | prefixes                       | prefixes_pkey                                                   | CREATE UNIQUE INDEX prefixes_pkey ON storage.prefixes USING btree (bucket_id, level, name)                                                                                                 | UNIQUE     | btree        |
| storage    | s3_multipart_uploads           | idx_multipart_uploads_list                                      | CREATE INDEX idx_multipart_uploads_list ON storage.s3_multipart_uploads USING btree (bucket_id, key, created_at)                                                                           | NORMAL     | btree        |
| storage    | s3_multipart_uploads           | s3_multipart_uploads_pkey                                       | CREATE UNIQUE INDEX s3_multipart_uploads_pkey ON storage.s3_multipart_uploads USING btree (id)                                                                                             | UNIQUE     | btree        |
| storage    | s3_multipart_uploads_parts     | s3_multipart_uploads_parts_pkey                                 | CREATE UNIQUE INDEX s3_multipart_uploads_parts_pkey ON storage.s3_multipart_uploads_parts USING btree (id)                                                                                 | UNIQUE     | btree        |
| storage    | vector_indexes                 | vector_indexes_name_bucket_id_idx                               | CREATE UNIQUE INDEX vector_indexes_name_bucket_id_idx ON storage.vector_indexes USING btree (name, bucket_id)                                                                              | UNIQUE     | btree        |
| storage    | vector_indexes                 | vector_indexes_pkey                                             | CREATE UNIQUE INDEX vector_indexes_pkey ON storage.vector_indexes USING btree (id)                                                                                                         | UNIQUE     | btree        |
| vault      | secrets                        | secrets_name_idx                                                | CREATE UNIQUE INDEX secrets_name_idx ON vault.secrets USING btree (name) WHERE (name IS NOT NULL)                                                                                          | UNIQUE     | btree        |
| vault      | secrets                        | secrets_pkey                                                    | CREATE UNIQUE INDEX secrets_pkey ON vault.secrets USING btree (id)                                                                                                                         | UNIQUE     | btree        |



-- CONSULTA 6: Información de Foreign Keys con estado de índices
SELECT 
    tc.constraint_name,
    tc.table_schema,
    tc.table_name,
    kcu.column_name,
    ccu.table_schema AS foreign_table_schema,
    ccu.table_name AS foreign_table_name,
    ccu.column_name AS foreign_column_name,
    rc.update_rule,
    rc.delete_rule,
    CASE 
        WHEN i.indexname IS NOT NULL THEN 'INDEXED'
        ELSE 'NOT_INDEXED'
    END as index_status
FROM information_schema.table_constraints tc
JOIN information_schema.key_column_usage kcu 
    ON tc.constraint_name = kcu.constraint_name 
    AND tc.table_schema = kcu.table_schema
JOIN information_schema.constraint_column_usage ccu 
    ON ccu.constraint_name = tc.constraint_name
    AND ccu.table_schema = tc.table_schema
LEFT JOIN information_schema.referential_constraints rc 
    ON tc.constraint_name = rc.constraint_name
    AND tc.table_schema = rc.constraint_schema
LEFT JOIN pg_indexes i 
    ON i.schemaname = tc.table_schema 
    AND i.tablename = tc.table_name 
    AND i.indexdef LIKE '%' || kcu.column_name || '%'
WHERE tc.constraint_type = 'FOREIGN KEY'
AND tc.table_schema NOT IN ('information_schema', 'pg_catalog')
ORDER BY tc.table_schema, tc.table_name, tc.constraint_name;



| constraint_name                                          | table_schema | table_name                     | column_name                 | foreign_table_schema | foreign_table_name             | foreign_column_name | update_rule | delete_rule | index_status |
| -------------------------------------------------------- | ------------ | ------------------------------ | --------------------------- | -------------------- | ------------------------------ | ------------------- | ----------- | ----------- | ------------ |
| ajustes_contables_caja_aprobado_por_fkey                 | public       | ajustes_contables_caja         | aprobado_por                | public               | users                          | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| ajustes_contables_caja_conciliacion_id_fkey              | public       | ajustes_contables_caja         | conciliacion_id             | public               | conciliaciones_caja            | id                  | NO ACTION   | CASCADE     | NOT_INDEXED  |
| ajustes_contables_caja_responsable_fkey                  | public       | ajustes_contables_caja         | responsable                 | public               | users                          | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| ajustes_contables_caja_sesion_id_fkey                    | public       | ajustes_contables_caja         | sesion_id                   | public               | caja_sesiones                  | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| fk_audit_caja_sesiones_restaurant                        | public       | audit_caja_sesiones            | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| fk_audit_caja_sesiones_user                              | public       | audit_caja_sesiones            | user_id                     | public               | users                          | id                  | NO ACTION   | SET NULL    | INDEXED      |
| fk_audit_log_user                                        | public       | audit_log                      | user_id                     | public               | users                          | id                  | NO ACTION   | SET NULL    | INDEXED      |
| authorization_requests_cajero_id_fkey                    | public       | authorization_requests         | cajero_id                   | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| authorization_requests_restaurant_id_fkey                | public       | authorization_requests         | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| authorization_requests_supervisor_id_fkey                | public       | authorization_requests         | supervisor_id               | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| caja_sesiones_cajero_id_fkey                             | public       | caja_sesiones                  | cajero_id                   | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| caja_sesiones_restaurant_id_fkey                         | public       | caja_sesiones                  | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| caja_sesiones_restaurant_id_fkey                         | public       | caja_sesiones                  | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| caja_sesiones_restaurant_id_fkey                         | public       | caja_sesiones                  | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| caja_sesiones_restaurant_id_fkey                         | public       | caja_sesiones                  | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| cities_department_id_fkey                                | public       | cities                         | department_id               | public               | departments                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| cities_department_id_fkey                                | public       | cities                         | department_id               | public               | departments                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| fk_cobros_mesa_restaurant                                | public       | cobros_mesa                    | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| conciliaciones_caja_aprobado_por_fkey                    | public       | conciliaciones_caja            | aprobado_por                | public               | users                          | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| conciliaciones_caja_conciliado_por_fkey                  | public       | conciliaciones_caja            | conciliado_por              | public               | users                          | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| conciliaciones_caja_sesion_id_fkey                       | public       | conciliaciones_caja            | sesion_id                   | public               | caja_sesiones                  | id                  | NO ACTION   | CASCADE     | INDEXED      |
| conciliaciones_caja_sesion_id_fkey                       | public       | conciliaciones_caja            | sesion_id                   | public               | caja_sesiones                  | id                  | NO ACTION   | CASCADE     | INDEXED      |
| daily_menu_selections_category_id_fkey                   | public       | daily_menu_selections          | category_id                 | public               | universal_categories           | id                  | NO ACTION   | RESTRICT    | INDEXED      |
| daily_menu_selections_category_id_fkey                   | public       | daily_menu_selections          | category_id                 | public               | universal_categories           | id                  | NO ACTION   | RESTRICT    | INDEXED      |
| daily_menu_selections_daily_menu_id_fkey                 | public       | daily_menu_selections          | daily_menu_id               | public               | daily_menus                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| daily_menu_selections_daily_menu_id_fkey                 | public       | daily_menu_selections          | daily_menu_id               | public               | daily_menus                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| daily_menu_selections_universal_product_id_fkey          | public       | daily_menu_selections          | universal_product_id        | public               | universal_products             | id                  | NO ACTION   | RESTRICT    | INDEXED      |
| daily_menu_selections_universal_product_id_fkey          | public       | daily_menu_selections          | universal_product_id        | public               | universal_products             | id                  | NO ACTION   | RESTRICT    | INDEXED      |
| daily_menus_restaurant_id_fkey                           | public       | daily_menus                    | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| daily_menus_restaurant_id_fkey                           | public       | daily_menus                    | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| daily_menus_restaurant_id_fkey                           | public       | daily_menus                    | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| daily_special_activations_restaurant_id_fkey             | public       | daily_special_activations      | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| daily_special_activations_restaurant_id_fkey             | public       | daily_special_activations      | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| fk_daily_special_activations_special_dish                | public       | daily_special_activations      | special_dish_id             | public               | special_dishes                 | id                  | NO ACTION   | CASCADE     | INDEXED      |
| fk_daily_special_activations_special_dish                | public       | daily_special_activations      | special_dish_id             | public               | special_dishes                 | id                  | NO ACTION   | CASCADE     | INDEXED      |
| delivery_orders_assigned_delivery_person_id_fkey         | public       | delivery_orders                | assigned_delivery_person_id | public               | delivery_personnel             | id                  | NO ACTION   | SET NULL    | INDEXED      |
| delivery_orders_daily_menu_id_fkey                       | public       | delivery_orders                | daily_menu_id               | public               | daily_menus                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| delivery_orders_restaurant_id_fkey                       | public       | delivery_orders                | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| delivery_orders_restaurant_id_fkey                       | public       | delivery_orders                | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| delivery_orders_restaurant_id_fkey                       | public       | delivery_orders                | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| delivery_personnel_restaurant_id_fkey                    | public       | delivery_personnel             | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| departments_country_id_fkey                              | public       | departments                    | country_id                  | public               | countries                      | id                  | NO ACTION   | CASCADE     | INDEXED      |
| departments_country_id_fkey                              | public       | departments                    | country_id                  | public               | countries                      | id                  | NO ACTION   | CASCADE     | INDEXED      |
| departments_country_id_fkey                              | public       | departments                    | country_id                  | public               | countries                      | id                  | NO ACTION   | CASCADE     | INDEXED      |
| facturas_restaurant_id_fkey                              | public       | facturas                       | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| facturas_restaurant_id_fkey                              | public       | facturas                       | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| facturas_restaurant_id_fkey                              | public       | facturas                       | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| facturas_restaurant_id_fkey                              | public       | facturas                       | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| facturas_restaurant_id_fkey                              | public       | facturas                       | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| facturas_transaccion_id_fkey                             | public       | facturas                       | transaccion_id              | public               | transacciones_caja             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| favorite_combinations_bebida_product_id_fkey             | public       | favorite_combinations          | bebida_product_id           | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| favorite_combinations_entrada_product_id_fkey            | public       | favorite_combinations          | entrada_product_id          | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| favorite_combinations_principio_product_id_fkey          | public       | favorite_combinations          | principio_product_id        | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| favorite_combinations_proteina_product_id_fkey           | public       | favorite_combinations          | proteina_product_id         | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| favorite_combinations_restaurant_id_fkey                 | public       | favorite_combinations          | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| gastos_caja_caja_sesion_id_fkey                          | public       | gastos_caja                    | caja_sesion_id              | public               | caja_sesiones                  | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| gastos_caja_registrado_por_fkey                          | public       | gastos_caja                    | registrado_por              | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| generated_combinations_bebida_product_id_fkey            | public       | generated_combinations         | bebida_product_id           | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| generated_combinations_daily_menu_id_fkey                | public       | generated_combinations         | daily_menu_id               | public               | daily_menus                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| generated_combinations_entrada_product_id_fkey           | public       | generated_combinations         | entrada_product_id          | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| generated_combinations_principio_product_id_fkey         | public       | generated_combinations         | principio_product_id        | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| generated_combinations_proteina_product_id_fkey          | public       | generated_combinations         | proteina_product_id         | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| generated_combinations_proteina_product_id_fkey          | public       | generated_combinations         | proteina_product_id         | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| fk_generated_special_combinations_special_dish           | public       | generated_special_combinations | special_dish_id             | public               | special_dishes                 | id                  | NO ACTION   | CASCADE     | INDEXED      |
| generated_special_combinations_bebida_product_id_fkey    | public       | generated_special_combinations | bebida_product_id           | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| generated_special_combinations_entrada_product_id_fkey   | public       | generated_special_combinations | entrada_product_id          | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| generated_special_combinations_principio_product_id_fkey | public       | generated_special_combinations | principio_product_id        | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| generated_special_combinations_proteina_product_id_fkey  | public       | generated_special_combinations | proteina_product_id         | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| items_orden_mesa_combinacion_especial_id_fkey            | public       | items_orden_mesa               | combinacion_especial_id     | public               | generated_special_combinations | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| items_orden_mesa_combinacion_id_fkey                     | public       | items_orden_mesa               | combinacion_id              | public               | generated_combinations         | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| items_orden_mesa_orden_mesa_id_fkey                      | public       | items_orden_mesa               | orden_mesa_id               | public               | ordenes_mesa                   | id                  | NO ACTION   | CASCADE     | INDEXED      |
| menu_template_products_template_id_fkey                  | public       | menu_template_products         | template_id                 | public               | menu_templates                 | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| menu_template_products_universal_product_id_fkey         | public       | menu_template_products         | universal_product_id        | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| menu_templates_restaurant_id_fkey                        | public       | menu_templates                 | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| fk_mesa_estado_audit_mesa                                | public       | mesa_estado_audit              | mesa_id                     | public               | restaurant_mesas               | id                  | NO ACTION   | CASCADE     | INDEXED      |
| fk_mesa_estado_audit_user                                | public       | mesa_estado_audit              | user_id                     | public               | users                          | id                  | NO ACTION   | SET NULL    | INDEXED      |
| numeracion_facturas_restaurant_id_fkey                   | public       | numeracion_facturas            | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| ordenes_mesa_mesa_id_fkey                                | public       | ordenes_mesa                   | mesa_id                     | public               | restaurant_mesas               | id                  | NO ACTION   | SET NULL    | INDEXED      |
| ordenes_mesa_mesa_id_fkey                                | public       | ordenes_mesa                   | mesa_id                     | public               | restaurant_mesas               | id                  | NO ACTION   | SET NULL    | INDEXED      |
| ordenes_mesa_mesa_id_fkey                                | public       | ordenes_mesa                   | mesa_id                     | public               | restaurant_mesas               | id                  | NO ACTION   | SET NULL    | INDEXED      |
| ordenes_mesa_mesa_id_fkey                                | public       | ordenes_mesa                   | mesa_id                     | public               | restaurant_mesas               | id                  | NO ACTION   | SET NULL    | INDEXED      |
| ordenes_mesa_restaurant_id_fkey                          | public       | ordenes_mesa                   | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| ordenes_mesa_restaurant_id_fkey                          | public       | ordenes_mesa                   | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| ordenes_mesa_restaurant_id_fkey                          | public       | ordenes_mesa                   | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| ordenes_mesa_restaurant_id_fkey                          | public       | ordenes_mesa                   | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| product_aliases_universal_product_id_fkey                | public       | product_aliases                | universal_product_id        | public               | universal_products             | id                  | NO ACTION   | CASCADE     | INDEXED      |
| product_suggestions_approved_product_id_fkey             | public       | product_suggestions            | approved_product_id         | public               | universal_products             | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| product_suggestions_reviewed_by_fkey                     | public       | product_suggestions            | reviewed_by                 | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| product_suggestions_suggested_by_restaurant_id_fkey      | public       | product_suggestions            | suggested_by_restaurant_id  | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| product_suggestions_suggested_by_user_id_fkey            | public       | product_suggestions            | suggested_by_user_id        | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| product_suggestions_suggested_category_id_fkey           | public       | product_suggestions            | suggested_category_id       | public               | universal_categories           | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| protein_quantities_daily_menu_id_fkey                    | public       | protein_quantities             | daily_menu_id               | public               | daily_menus                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| protein_quantities_daily_menu_id_fkey                    | public       | protein_quantities             | daily_menu_id               | public               | daily_menus                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| protein_quantities_protein_product_id_fkey               | public       | protein_quantities             | protein_product_id          | public               | universal_products             | id                  | NO ACTION   | RESTRICT    | INDEXED      |
| protein_quantities_protein_product_id_fkey               | public       | protein_quantities             | protein_product_id          | public               | universal_products             | id                  | NO ACTION   | RESTRICT    | INDEXED      |
| restaurant_custom_roles_created_by_fkey                  | public       | restaurant_custom_roles        | created_by                  | public               | users                          | id                  | NO ACTION   | NO ACTION   | NOT_INDEXED  |
| restaurant_custom_roles_restaurant_id_fkey               | public       | restaurant_custom_roles        | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_favorites_product_id_fkey                     | public       | restaurant_favorites           | product_id                  | public               | universal_products             | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_favorites_product_id_fkey                     | public       | restaurant_favorites           | product_id                  | public               | universal_products             | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_favorites_restaurant_id_fkey                  | public       | restaurant_favorites           | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_favorites_restaurant_id_fkey                  | public       | restaurant_favorites           | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_mesas_restaurant_id_fkey                      | public       | restaurant_mesas               | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_mesas_restaurant_id_fkey                      | public       | restaurant_mesas               | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_mesas_restaurant_id_fkey                      | public       | restaurant_mesas               | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_mesas_restaurant_id_fkey                      | public       | restaurant_mesas               | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_product_usage_restaurant_id_fkey              | public       | restaurant_product_usage       | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_product_usage_restaurant_id_fkey              | public       | restaurant_product_usage       | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_product_usage_universal_product_id_fkey       | public       | restaurant_product_usage       | universal_product_id        | public               | universal_products             | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_product_usage_universal_product_id_fkey       | public       | restaurant_product_usage       | universal_product_id        | public               | universal_products             | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_role_configs_configured_by_fkey               | public       | restaurant_role_configs        | configured_by               | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| restaurant_role_configs_custom_role_id_fkey              | public       | restaurant_role_configs        | custom_role_id              | public               | restaurant_custom_roles        | id                  | NO ACTION   | CASCADE     | NOT_INDEXED  |
| restaurant_role_configs_permission_id_fkey               | public       | restaurant_role_configs        | permission_id               | public               | permissions                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_role_configs_permission_id_fkey               | public       | restaurant_role_configs        | permission_id               | public               | permissions                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_role_configs_permission_id_fkey               | public       | restaurant_role_configs        | permission_id               | public               | permissions                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_role_configs_restaurant_id_fkey               | public       | restaurant_role_configs        | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_role_configs_restaurant_id_fkey               | public       | restaurant_role_configs        | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_role_configs_restaurant_id_fkey               | public       | restaurant_role_configs        | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_role_configs_role_id_fkey                     | public       | restaurant_role_configs        | role_id                     | public               | system_roles                   | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_role_configs_role_id_fkey                     | public       | restaurant_role_configs        | role_id                     | public               | system_roles                   | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurant_role_configs_role_id_fkey                     | public       | restaurant_role_configs        | role_id                     | public               | system_roles                   | id                  | NO ACTION   | CASCADE     | INDEXED      |
| restaurants_city_id_fkey                                 | public       | restaurants                    | city_id                     | public               | cities                         | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| restaurants_country_id_fkey                              | public       | restaurants                    | country_id                  | public               | countries                      | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| restaurants_cuisine_type_id_fkey                         | public       | restaurants                    | cuisine_type_id             | public               | cuisine_types                  | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| restaurants_department_id_fkey                           | public       | restaurants                    | department_id               | public               | departments                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| restaurants_owner_id_fkey                                | public       | restaurants                    | owner_id                    | public               | users                          | id                  | NO ACTION   | CASCADE     | INDEXED      |
| role_permissions_permission_id_fkey                      | public       | role_permissions               | permission_id               | public               | permissions                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| role_permissions_permission_id_fkey                      | public       | role_permissions               | permission_id               | public               | permissions                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| role_permissions_role_id_fkey                            | public       | role_permissions               | role_id                     | public               | system_roles                   | id                  | NO ACTION   | CASCADE     | INDEXED      |
| role_permissions_role_id_fkey                            | public       | role_permissions               | role_id                     | public               | system_roles                   | id                  | NO ACTION   | CASCADE     | INDEXED      |
| role_permissions_role_id_fkey                            | public       | role_permissions               | role_id                     | public               | system_roles                   | id                  | NO ACTION   | CASCADE     | INDEXED      |
| security_alerts_cajero_id_fkey                           | public       | security_alerts                | cajero_id                   | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| security_alerts_restaurant_id_fkey                       | public       | security_alerts                | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| security_alerts_revisada_por_fkey                        | public       | security_alerts                | revisada_por                | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| security_limits_restaurant_id_fkey                       | public       | security_limits                | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| security_policies_restaurant_id_fkey                     | public       | security_policies              | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| special_dish_selections_category_id_fkey                 | public       | special_dish_selections        | category_id                 | public               | universal_categories           | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| special_dish_selections_universal_product_id_fkey        | public       | special_dish_selections        | universal_product_id        | public               | universal_products             | id                  | NO ACTION   | CASCADE     | INDEXED      |
| special_dish_selections_universal_product_id_fkey        | public       | special_dish_selections        | universal_product_id        | public               | universal_products             | id                  | NO ACTION   | CASCADE     | INDEXED      |
| special_dishes_restaurant_id_fkey                        | public       | special_dishes                 | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| fk_special_protein_quantities_special_dish               | public       | special_protein_quantities     | special_dish_id             | public               | special_dishes                 | id                  | NO ACTION   | CASCADE     | INDEXED      |
| fk_special_protein_quantities_special_dish               | public       | special_protein_quantities     | special_dish_id             | public               | special_dishes                 | id                  | NO ACTION   | CASCADE     | INDEXED      |
| special_protein_quantities_protein_product_id_fkey       | public       | special_protein_quantities     | protein_product_id          | public               | universal_products             | id                  | NO ACTION   | CASCADE     | INDEXED      |
| special_protein_quantities_protein_product_id_fkey       | public       | special_protein_quantities     | protein_product_id          | public               | universal_products             | id                  | NO ACTION   | CASCADE     | INDEXED      |
| transacciones_caja_caja_sesion_id_fkey                   | public       | transacciones_caja             | caja_sesion_id              | public               | caja_sesiones                  | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| transacciones_caja_cajero_id_fkey                        | public       | transacciones_caja             | cajero_id                   | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| transacciones_caja_delivery_order_id_fkey                | public       | transacciones_caja             | delivery_order_id           | public               | delivery_orders                | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| transacciones_caja_orden_mesa_id_fkey                    | public       | transacciones_caja             | orden_mesa_id               | public               | ordenes_mesa                   | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| universal_products_category_id_fkey                      | public       | universal_products             | category_id                 | public               | universal_categories           | id                  | NO ACTION   | RESTRICT    | INDEXED      |
| universal_products_created_by_fkey                       | public       | universal_products             | created_by                  | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| user_roles_assigned_by_fkey                              | public       | user_roles                     | assigned_by                 | public               | users                          | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| user_roles_custom_role_id_fkey                           | public       | user_roles                     | custom_role_id              | public               | restaurant_custom_roles        | id                  | NO ACTION   | CASCADE     | NOT_INDEXED  |
| user_roles_restaurant_id_fkey                            | public       | user_roles                     | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| user_roles_restaurant_id_fkey                            | public       | user_roles                     | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| user_roles_restaurant_id_fkey                            | public       | user_roles                     | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | CASCADE     | INDEXED      |
| user_roles_role_id_fkey                                  | public       | user_roles                     | role_id                     | public               | system_roles                   | id                  | NO ACTION   | CASCADE     | INDEXED      |
| user_roles_user_id_fkey                                  | public       | user_roles                     | user_id                     | public               | users                          | id                  | NO ACTION   | CASCADE     | INDEXED      |
| user_roles_user_id_fkey                                  | public       | user_roles                     | user_id                     | public               | users                          | id                  | NO ACTION   | CASCADE     | INDEXED      |
| user_roles_user_id_fkey                                  | public       | user_roles                     | user_id                     | public               | users                          | id                  | NO ACTION   | CASCADE     | INDEXED      |
| users_restaurant_id_fkey                                 | public       | users                          | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |
| users_restaurant_id_fkey                                 | public       | users                          | restaurant_id               | public               | restaurants                    | id                  | NO ACTION   | NO ACTION   | INDEXED      |



-- CONSULTA 7: Información de políticas RLS
SELECT 
    schemaname,
    tablename,
    policyname,
    permissive,
    roles,
    cmd,
    qual,
    with_check
FROM pg_policies
WHERE schemaname NOT IN ('information_schema', 'pg_catalog')
ORDER BY schemaname, tablename, policyname;


| schemaname | tablename                      | policyname                                                   | permissive | roles           | cmd    | qual                                                                                                                                                                                                                                                                                        | with_check                                                                                                                                                                                                                                                                                      |
| ---------- | ------------------------------ | ------------------------------------------------------------ | ---------- | --------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| cron       | job                            | cron_job_policy                                              | PERMISSIVE | {public}        | ALL    | (username = CURRENT_USER)                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                            |
| cron       | job_run_details                | cron_job_run_details_policy                                  | PERMISSIVE | {public}        | ALL    | (username = CURRENT_USER)                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                            |
| public     | ajustes_contables_caja         | ajustes_contables_caja_access                                | PERMISSIVE | {public}        | ALL    | (auth.uid() IS NOT NULL)                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | audit_caja_sesiones            | System can insert audit records                              | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | true                                                                                                                                                                                                                                                                                            |
| public     | audit_log                      | Admins can view all audit logs                               | PERMISSIVE | {public}        | SELECT | (EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND ((users.role)::text = 'admin'::text))))                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                            |
| public     | audit_log                      | System can insert audit logs                                 | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | true                                                                                                                                                                                                                                                                                            |
| public     | audit_log                      | Users can view their restaurant audit logs                   | PERMISSIVE | {public}        | SELECT | (((new_data ->> 'restaurant_id'::text))::uuid IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                               | null                                                                                                                                                                                                                                                                                            |
| public     | audit_log                      | allow_select_auth                                            | PERMISSIVE | {public}        | SELECT | (auth.role() = 'authenticated'::text)                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                            |
| public     | authorization_requests         | Supervisors can update authorization requests                | PERMISSIVE | {public}        | UPDATE | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE ((users.id = auth.uid()) AND ((users.role)::text = ANY ((ARRAY['restaurant_owner'::character varying, 'supervisor'::character varying])::text[])))))                                                                   | null                                                                                                                                                                                                                                                                                            |
| public     | authorization_requests         | Users can create authorization requests for their restaurant | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid()))) AND (cajero_id = auth.uid()))                                                                                                                                                                   |
| public     | authorization_requests         | Users can view their restaurant authorization requests       | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | caja_sesiones                  | Users can create caja sesiones for their restaurant          | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid()))) AND (cajero_id = auth.uid()))                                                                                                                                                                   |
| public     | caja_sesiones                  | Users can view their restaurant's caja sesiones              | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | caja_sesiones                  | caja_sesiones_insert_own_cajero                              | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | (cajero_id = auth.uid())                                                                                                                                                                                                                                                                        |
| public     | caja_sesiones                  | caja_sesiones_update_authorized                              | PERMISSIVE | {public}        | UPDATE | (restaurant_id IN ( SELECT r.id
   FROM restaurants r
  WHERE (r.owner_id = auth.uid())))                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                            |
| public     | cities                         | cities_admin_write                                           | PERMISSIVE | {public}        | ALL    | (EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND ((users.role)::text = 'admin'::text))))                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                            |
| public     | cities                         | cities_public_read                                           | PERMISSIVE | {public}        | SELECT | (is_active = true)                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                            |
| public     | cobros_mesa                    | cobros_mesa_restaurant_only                                  | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | conciliaciones_caja            | conciliaciones_caja_access                                   | PERMISSIVE | {public}        | ALL    | (auth.uid() IS NOT NULL)                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | countries                      | countries_admin_write                                        | PERMISSIVE | {public}        | ALL    | (EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND ((users.role)::text = 'admin'::text))))                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                            |
| public     | countries                      | countries_public_read                                        | PERMISSIVE | {public}        | SELECT | (is_active = true)                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                            |
| public     | cuisine_types                  | cuisine_types_admin_write                                    | PERMISSIVE | {public}        | ALL    | (EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND ((users.role)::text = 'admin'::text))))                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                            |
| public     | cuisine_types                  | cuisine_types_public_read                                    | PERMISSIVE | {public}        | SELECT | (is_active = true)                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                            |
| public     | daily_menu_selections          | Users can manage their restaurant daily menu selections      | PERMISSIVE | {public}        | ALL    | (daily_menu_id IN ( SELECT dm.id
   FROM (daily_menus dm
     JOIN users u ON ((u.restaurant_id = dm.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                         | null                                                                                                                                                                                                                                                                                            |
| public     | daily_menu_selections          | Users can view their restaurant daily menu selections        | PERMISSIVE | {public}        | SELECT | (daily_menu_id IN ( SELECT dm.id
   FROM (daily_menus dm
     JOIN users u ON ((u.restaurant_id = dm.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                         | null                                                                                                                                                                                                                                                                                            |
| public     | daily_menus                    | Users can manage their restaurant daily menus                | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | daily_menus                    | Users can view their restaurant daily menus                  | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | daily_menus                    | daily_menus_public_select                                    | PERMISSIVE | {anon}          | SELECT | ((status)::text = 'active'::text)                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                            |
| public     | daily_special_activations      | Users can manage their restaurant special activations        | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | daily_special_activations      | Users can view their restaurant special activations          | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | delivery_orders                | Users can manage orders from their restaurant                | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | delivery_orders                | Users can view orders from their restaurant                  | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | delivery_personnel             | Users can manage delivery personnel from their restaurant    | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | delivery_personnel             | Users can view delivery personnel from their restaurant      | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | departments                    | departments_admin_write                                      | PERMISSIVE | {public}        | ALL    | (EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND ((users.role)::text = 'admin'::text))))                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                            |
| public     | departments                    | departments_public_read                                      | PERMISSIVE | {public}        | SELECT | (is_active = true)                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                            |
| public     | facturas                       | Users can create facturas for their restaurant               | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid()))) AND (generada_por = auth.uid()))                                                                                                                                                                |
| public     | facturas                       | Users can update their restaurant's facturas                 | PERMISSIVE | {public}        | UPDATE | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | facturas                       | Users can view their restaurant's facturas                   | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | gastos_caja                    | Users can create expenses for their restaurant               | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((caja_sesion_id IN ( SELECT cs.id
   FROM (caja_sesiones cs
     JOIN users u ON ((u.restaurant_id = cs.restaurant_id)))
  WHERE ((u.id = auth.uid()) AND ((cs.estado)::text = 'abierta'::text)))) AND (registrado_por = auth.uid()))                                                          |
| public     | gastos_caja                    | Users can delete their own recent expenses                   | PERMISSIVE | {public}        | DELETE | ((registrado_por = auth.uid()) AND (registrado_at > (now() - '24:00:00'::interval)))                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                            |
| public     | gastos_caja                    | Users can view their restaurant expenses                     | PERMISSIVE | {public}        | SELECT | (caja_sesion_id IN ( SELECT cs.id
   FROM (caja_sesiones cs
     JOIN users u ON ((u.restaurant_id = cs.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                      | null                                                                                                                                                                                                                                                                                            |
| public     | generated_combinations         | Users can manage their restaurant combinations               | PERMISSIVE | {public}        | ALL    | (daily_menu_id IN ( SELECT dm.id
   FROM (daily_menus dm
     JOIN users u ON ((u.restaurant_id = dm.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                         | null                                                                                                                                                                                                                                                                                            |
| public     | generated_combinations         | Users can view their restaurant combinations                 | PERMISSIVE | {public}        | SELECT | (daily_menu_id IN ( SELECT dm.id
   FROM (daily_menus dm
     JOIN users u ON ((u.restaurant_id = dm.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                         | null                                                                                                                                                                                                                                                                                            |
| public     | generated_combinations         | generated_combinations_public_select                         | PERMISSIVE | {anon}          | SELECT | (is_available = true)                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                            |
| public     | generated_special_combinations | Users can manage their restaurant special combinations       | PERMISSIVE | {public}        | ALL    | (special_dish_id IN ( SELECT sd.id
   FROM (special_dishes sd
     JOIN users u ON ((u.restaurant_id = sd.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | generated_special_combinations | Users can view their restaurant special combinations         | PERMISSIVE | {public}        | SELECT | (special_dish_id IN ( SELECT sd.id
   FROM (special_dishes sd
     JOIN users u ON ((u.restaurant_id = sd.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | items_orden_mesa               | Usuarios solo ven items de su restaurante                    | PERMISSIVE | {public}        | ALL    | (orden_mesa_id IN ( SELECT om.id
   FROM (ordenes_mesa om
     JOIN users u ON ((u.restaurant_id = om.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                        | null                                                                                                                                                                                                                                                                                            |
| public     | mesa_estado_audit              | mesa_estado_audit_restaurant_only                            | PERMISSIVE | {public}        | ALL    | (mesa_id IN ( SELECT rm.id
   FROM (restaurant_mesas rm
     JOIN users u ON ((rm.restaurant_id = u.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                          | null                                                                                                                                                                                                                                                                                            |
| public     | numeracion_facturas            | Users can manage their restaurant's factura numbering        | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | numeracion_facturas            | Users can view their restaurant's factura numbering          | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | ordenes_mesa                   | Usuarios solo ven órdenes de su restaurante                  | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | permissions                    | permissions_read_all                                         | PERMISSIVE | {public}        | SELECT | true                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                            |
| public     | product_aliases                | All authenticated users can view product aliases             | PERMISSIVE | {public}        | SELECT | (auth.uid() IS NOT NULL)                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | product_aliases                | Only admins can manage product aliases                       | PERMISSIVE | {public}        | ALL    | (EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND ((users.role)::text = 'admin'::text))))                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                            |
| public     | product_suggestions            | Users can create product suggestions for their restaurant    | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((suggested_by_restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid()))) AND (suggested_by_user_id = auth.uid()))                                                                                                                                           |
| public     | product_suggestions            | Users can update their own product suggestions               | PERMISSIVE | {public}        | UPDATE | (suggested_by_user_id = auth.uid())                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                            |
| public     | product_suggestions            | Users can view their restaurant product suggestions          | PERMISSIVE | {public}        | SELECT | (suggested_by_restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                            |
| public     | protein_quantities             | Users can manage their restaurant protein quantities         | PERMISSIVE | {public}        | ALL    | (daily_menu_id IN ( SELECT dm.id
   FROM (daily_menus dm
     JOIN users u ON ((u.restaurant_id = dm.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                         | null                                                                                                                                                                                                                                                                                            |
| public     | protein_quantities             | Users can view their restaurant protein quantities           | PERMISSIVE | {public}        | SELECT | (daily_menu_id IN ( SELECT dm.id
   FROM (daily_menus dm
     JOIN users u ON ((u.restaurant_id = dm.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                         | null                                                                                                                                                                                                                                                                                            |
| public     | restaurant_custom_roles        | Users can manage custom roles in their restaurant            | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT ur.restaurant_id
   FROM user_roles ur
  WHERE ((ur.user_id = auth.uid()) AND (ur.is_active = true))))                                                                                                                                                           | null                                                                                                                                                                                                                                                                                            |
| public     | restaurant_favorites           | Users can manage their restaurant favorites                  | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | restaurant_favorites           | Users can view their restaurant favorites                    | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | restaurant_mesas               | Users can manage their restaurant tables                     | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | restaurant_mesas               | Users can view their restaurant tables                       | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | restaurant_product_usage       | Users can manage their restaurant product usage              | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | restaurant_product_usage       | Users can view their restaurant product usage                | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | restaurant_role_configs        | restaurant_role_configs_owner_only                           | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT restaurants.id
   FROM restaurants
  WHERE (restaurants.owner_id = auth.uid())))                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                            |
| public     | restaurants                    | Users can only access their own restaurants                  | PERMISSIVE | {public}        | ALL    | (owner_id = auth.uid())                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                            |
| public     | restaurants                    | restaurant_owners_only                                       | PERMISSIVE | {authenticated} | ALL    | (auth.uid() = owner_id)                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                            |
| public     | restaurants                    | restaurants_can_create_one                                   | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((auth.uid() = owner_id) AND (NOT (EXISTS ( SELECT 1
   FROM restaurants restaurants_1
  WHERE (restaurants_1.owner_id = auth.uid())))))                                                                                                                                                        |
| public     | restaurants                    | restaurants_can_delete_own                                   | PERMISSIVE | {public}        | DELETE | (auth.uid() = owner_id)                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                            |
| public     | restaurants                    | restaurants_can_update_own                                   | PERMISSIVE | {public}        | UPDATE | (auth.uid() = owner_id)                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                            |
| public     | restaurants                    | restaurants_own_restaurant                                   | PERMISSIVE | {public}        | SELECT | (auth.uid() = owner_id)                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                            |
| public     | restaurants                    | restaurants_public_select                                    | PERMISSIVE | {anon}          | SELECT | (((status)::text = 'active'::text) AND (setup_completed = true))                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                            |
| public     | role_permissions               | role_permissions_read_all                                    | PERMISSIVE | {public}        | SELECT | true                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                            |
| public     | security_alerts                | System can create security alerts                            | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid()))) OR (auth.uid() IS NULL))                                                                                                                                                                        |
| public     | security_alerts                | Users can update their restaurant security alerts            | PERMISSIVE | {public}        | UPDATE | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | security_alerts                | Users can view their restaurant security alerts              | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | security_limits                | Users can view security limits for their restaurant          | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | security_policies              | Users can create security policies for their restaurant      | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                                  |
| public     | security_policies              | Users can update their restaurant security policies          | PERMISSIVE | {public}        | UPDATE | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | security_policies              | Users can view their restaurant security policies            | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | special_dish_selections        | Users can manage their restaurant special dish selections    | PERMISSIVE | {public}        | ALL    | (special_dish_id IN ( SELECT sd.id
   FROM (special_dishes sd
     JOIN users u ON ((u.restaurant_id = sd.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | special_dish_selections        | Users can view their restaurant special dish selections      | PERMISSIVE | {public}        | SELECT | (special_dish_id IN ( SELECT sd.id
   FROM (special_dishes sd
     JOIN users u ON ((u.restaurant_id = sd.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | special_dishes                 | Users can manage their restaurant special dishes             | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | special_dishes                 | Users can view their restaurant special dishes               | PERMISSIVE | {public}        | SELECT | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | special_dishes                 | special_dishes_public_select                                 | PERMISSIVE | {anon}          | SELECT | (is_active = true)                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                            |
| public     | special_protein_quantities     | Users can manage their restaurant special protein quantities | PERMISSIVE | {public}        | ALL    | (special_dish_id IN ( SELECT sd.id
   FROM (special_dishes sd
     JOIN users u ON ((u.restaurant_id = sd.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | special_protein_quantities     | Users can view their restaurant special protein quantities   | PERMISSIVE | {public}        | SELECT | (special_dish_id IN ( SELECT sd.id
   FROM (special_dishes sd
     JOIN users u ON ((u.restaurant_id = sd.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | system_roles                   | system_roles_read_all                                        | PERMISSIVE | {public}        | SELECT | true                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                            |
| public     | transacciones_caja             | Users can view their restaurant transactions                 | PERMISSIVE | {public}        | SELECT | (caja_sesion_id IN ( SELECT cs.id
   FROM (caja_sesiones cs
     JOIN users u ON ((u.restaurant_id = cs.restaurant_id)))
  WHERE (u.id = auth.uid())))                                                                                                                                      | null                                                                                                                                                                                                                                                                                            |
| public     | transacciones_caja             | transacciones_caja_insert                                    | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | (EXISTS ( SELECT 1
   FROM (caja_sesiones cs
     JOIN users u ON ((u.restaurant_id = cs.restaurant_id)))
  WHERE ((cs.id = transacciones_caja.caja_sesion_id) AND ((cs.estado)::text = 'abierta'::text) AND (u.id = auth.uid()))))                                                             |
| public     | universal_categories           | All authenticated users can view universal categories        | PERMISSIVE | {public}        | SELECT | (auth.uid() IS NOT NULL)                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | universal_categories           | Only admins can manage universal categories                  | PERMISSIVE | {public}        | ALL    | (EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND ((users.role)::text = 'admin'::text))))                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                            |
| public     | universal_products             | All authenticated users can view universal products          | PERMISSIVE | {public}        | SELECT | (auth.uid() IS NOT NULL)                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| public     | universal_products             | Only admins can manage universal products                    | PERMISSIVE | {public}        | ALL    | (EXISTS ( SELECT 1
   FROM users
  WHERE ((users.id = auth.uid()) AND ((users.role)::text = 'admin'::text))))                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                            |
| public     | user_profiles_app              | Users can insert own profile                                 | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | (auth.uid() = id)                                                                                                                                                                                                                                                                               |
| public     | user_profiles_app              | Users can update own profile                                 | PERMISSIVE | {public}        | UPDATE | (auth.uid() = id)                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                            |
| public     | user_profiles_app              | Users can view own profile                                   | PERMISSIVE | {public}        | SELECT | (auth.uid() = id)                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                            |
| public     | user_profiles_app              | user_profiles_app_own_only                                   | PERMISSIVE | {public}        | ALL    | (id = auth.uid())                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                            |
| public     | user_roles                     | user_roles_restaurant_admin                                  | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | (restaurant_id IN ( SELECT ur.restaurant_id
   FROM (user_roles ur
     JOIN system_roles sr ON ((ur.role_id = sr.id)))
  WHERE ((ur.user_id = auth.uid()) AND (ur.is_active = true) AND (sr.name = ANY (ARRAY['propietario'::text, 'administrador'::text])))))                                 |
| public     | user_roles                     | user_roles_restaurant_update                                 | PERMISSIVE | {public}        | UPDATE | (restaurant_id IN ( SELECT ur.restaurant_id
   FROM (user_roles ur
     JOIN system_roles sr ON ((ur.role_id = sr.id)))
  WHERE ((ur.user_id = auth.uid()) AND (ur.is_active = true) AND (sr.name = ANY (ARRAY['propietario'::text, 'administrador'::text])))))                             | null                                                                                                                                                                                                                                                                                            |
| public     | user_roles                     | user_roles_same_restaurant                                   | PERMISSIVE | {public}        | ALL    | (restaurant_id IN ( SELECT users.restaurant_id
   FROM users
  WHERE (users.id = auth.uid())))                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                            |
| public     | users                          | users_own_access_only                                        | PERMISSIVE | {public}        | ALL    | (auth.uid() = id)                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | Anyone can view files                                        | PERMISSIVE | {public}        | SELECT | (bucket_id = 'restaurant-images'::text)                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | Anyone can view restaurant images                            | PERMISSIVE | {public}        | SELECT | (bucket_id = 'restaurant-images'::text)                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | Authenticated users can delete ingredient images             | PERMISSIVE | {public}        | DELETE | ((bucket_id = 'images-ingredients'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | Authenticated users can update ingredient images             | PERMISSIVE | {public}        | UPDATE | ((bucket_id = 'images-ingredients'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | Authenticated users can upload files                         | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((bucket_id = 'restaurant-images'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                             |
| storage    | objects                        | Authenticated users can upload ingredient images             | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((bucket_id = 'images-ingredients'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                            |
| storage    | objects                        | Everyone can view ingredient images                          | PERMISSIVE | {public}        | SELECT | (bucket_id = 'images-ingredients'::text)                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | Public read restaurant-images                                | PERMISSIVE | {public}        | SELECT | (bucket_id = 'restaurant-images'::text)                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | Public read special-dishes                                   | PERMISSIVE | {public}        | SELECT | (bucket_id = 'special-dishes'::text)                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | Restaurant owners upload images                              | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((bucket_id = 'restaurant-images'::text) AND (auth.role() = 'authenticated'::text) AND (EXISTS ( SELECT 1
   FROM restaurants
  WHERE ((restaurants.owner_id = auth.uid()) AND ((restaurants.id)::text = split_part((restaurants.name)::text, '/'::text, 2))))))                                |
| storage    | objects                        | Special dish owners upload                                   | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((bucket_id = 'special-dishes'::text) AND (auth.role() = 'authenticated'::text) AND (EXISTS ( SELECT 1
   FROM (special_dishes sd
     JOIN restaurants r ON ((r.id = sd.restaurant_id)))
  WHERE ((r.owner_id = auth.uid()) AND ((sd.id)::text = split_part((r.name)::text, '/'::text, 2)))))) |
| storage    | objects                        | Users can delete restaurant images                           | PERMISSIVE | {public}        | DELETE | ((bucket_id = 'restaurant-images'::text) AND (auth.role() = 'authenticated'::text) AND ((storage.foldername(name))[1] = 'restaurants'::text) AND ((storage.foldername(name))[2] IN ( SELECT (restaurants.id)::text AS id
   FROM restaurants
  WHERE (restaurants.owner_id = auth.uid())))) | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | Users can update restaurant images                           | PERMISSIVE | {public}        | UPDATE | ((bucket_id = 'restaurant-images'::text) AND (auth.role() = 'authenticated'::text) AND ((storage.foldername(name))[1] = 'restaurants'::text) AND ((storage.foldername(name))[2] IN ( SELECT (restaurants.id)::text AS id
   FROM restaurants
  WHERE (restaurants.owner_id = auth.uid())))) | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | Users can upload restaurant images                           | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((bucket_id = 'restaurant-images'::text) AND (auth.role() = 'authenticated'::text) AND ((storage.foldername(name))[1] = 'restaurants'::text) AND ((storage.foldername(name))[2] IN ( SELECT (restaurants.id)::text AS id
   FROM restaurants
  WHERE (restaurants.owner_id = auth.uid()))))     |
| storage    | objects                        | auth delete special-dishes                                   | PERMISSIVE | {public}        | DELETE | ((bucket_id = 'special-dishes'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                            |
| storage    | objects                        | auth insert special-dishes                                   | PERMISSIVE | {public}        | INSERT | null                                                                                                                                                                                                                                                                                        | ((bucket_id = 'special-dishes'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                                |
| storage    | objects                        | auth update special-dishes                                   | PERMISSIVE | {public}        | UPDATE | ((bucket_id = 'special-dishes'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                            | ((bucket_id = 'special-dishes'::text) AND (auth.role() = 'authenticated'::text))                                                                                                                                                                                                                |
| storage    | objects                        | public read special-dishes                                   | PERMISSIVE | {public}        | SELECT | (bucket_id = 'special-dishes'::text)                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                            |



-- CONSULTA 8: Información de constraints (check, unique, primary key, etc.)
SELECT 
    tc.constraint_name,
    tc.table_schema,
    tc.table_name,
    tc.constraint_type,
    COALESCE(
        CASE 
            WHEN tc.constraint_type = 'CHECK' THEN cc.check_clause
            WHEN tc.constraint_type IN ('PRIMARY KEY', 'UNIQUE') THEN 
                (SELECT string_agg(kcu.column_name, ', ' ORDER BY kcu.ordinal_position) 
                 FROM information_schema.key_column_usage kcu 
                 WHERE kcu.constraint_name = tc.constraint_name 
                 AND kcu.table_schema = tc.table_schema)
            ELSE 'See FK section'
        END,
        'N/A'
    ) as constraint_details,
    tc.is_deferrable,
    tc.initially_deferred
FROM information_schema.table_constraints tc
LEFT JOIN information_schema.check_constraints cc 
    ON tc.constraint_name = cc.constraint_name 
    AND tc.table_schema = cc.constraint_schema
WHERE tc.table_schema NOT IN ('information_schema', 'pg_catalog')
AND tc.constraint_type != 'FOREIGN KEY'  -- Ya cubierto en consulta anterior
ORDER BY tc.table_schema, tc.table_name, tc.constraint_type, tc.constraint_name;


| constraint_name                                                 | table_schema | table_name                     | constraint_type | constraint_details                                                                                                                                                                                                      | is_deferrable | initially_deferred |
| --------------------------------------------------------------- | ------------ | ------------------------------ | --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- | ------------------ |
| 16492_16523_2_not_null                                          | auth         | audit_log_entries              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16523_5_not_null                                          | auth         | audit_log_entries              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| audit_log_entries_pkey                                          | auth         | audit_log_entries              | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_16925_11_not_null                                         | auth         | flow_state                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16925_1_not_null                                          | auth         | flow_state                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16925_3_not_null                                          | auth         | flow_state                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16925_4_not_null                                          | auth         | flow_state                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16925_5_not_null                                          | auth         | flow_state                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16925_6_not_null                                          | auth         | flow_state                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| flow_state_pkey                                                 | auth         | flow_state                     | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_16723_1_not_null                                          | auth         | identities                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16723_2_not_null                                          | auth         | identities                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16723_3_not_null                                          | auth         | identities                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16723_4_not_null                                          | auth         | identities                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16723_9_not_null                                          | auth         | identities                     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| identities_pkey                                                 | auth         | identities                     | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| identities_provider_id_provider_unique                          | auth         | identities                     | UNIQUE          | provider_id, provider                                                                                                                                                                                                   | NO            | NO                 |
| 16492_16516_1_not_null                                          | auth         | instances                      | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| instances_pkey                                                  | auth         | instances                      | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_16812_1_not_null                                          | auth         | mfa_amr_claims                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16812_2_not_null                                          | auth         | mfa_amr_claims                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16812_3_not_null                                          | auth         | mfa_amr_claims                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16812_4_not_null                                          | auth         | mfa_amr_claims                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16812_5_not_null                                          | auth         | mfa_amr_claims                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| amr_id_pk                                                       | auth         | mfa_amr_claims                 | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| mfa_amr_claims_session_id_authentication_method_pkey            | auth         | mfa_amr_claims                 | UNIQUE          | session_id, authentication_method                                                                                                                                                                                       | NO            | NO                 |
| 16492_16800_1_not_null                                          | auth         | mfa_challenges                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16800_2_not_null                                          | auth         | mfa_challenges                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16800_3_not_null                                          | auth         | mfa_challenges                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16800_5_not_null                                          | auth         | mfa_challenges                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| mfa_challenges_pkey                                             | auth         | mfa_challenges                 | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_16787_1_not_null                                          | auth         | mfa_factors                    | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16787_2_not_null                                          | auth         | mfa_factors                    | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16787_4_not_null                                          | auth         | mfa_factors                    | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16787_5_not_null                                          | auth         | mfa_factors                    | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16787_6_not_null                                          | auth         | mfa_factors                    | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16787_7_not_null                                          | auth         | mfa_factors                    | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| mfa_factors_pkey                                                | auth         | mfa_factors                    | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| mfa_factors_last_challenged_at_key                              | auth         | mfa_factors                    | UNIQUE          | last_challenged_at                                                                                                                                                                                                      | NO            | NO                 |
| 16492_113985_11_not_null                                        | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_113985_12_not_null                                        | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_113985_14_not_null                                        | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_113985_15_not_null                                        | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_113985_1_not_null                                         | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_113985_2_not_null                                         | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_113985_3_not_null                                         | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_113985_5_not_null                                         | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_113985_6_not_null                                         | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_authorizations_authorization_code_length                  | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_authorizations_code_challenge_length                      | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_authorizations_expires_at_future                          | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_authorizations_nonce_length                               | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_authorizations_redirect_uri_length                        | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_authorizations_resource_length                            | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_authorizations_scope_length                               | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_authorizations_state_length                               | auth         | oauth_authorizations           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_authorizations_pkey                                       | auth         | oauth_authorizations           | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| oauth_authorizations_authorization_code_key                     | auth         | oauth_authorizations           | UNIQUE          | authorization_code                                                                                                                                                                                                      | NO            | NO                 |
| oauth_authorizations_authorization_id_key                       | auth         | oauth_authorizations           | UNIQUE          | authorization_id                                                                                                                                                                                                        | NO            | NO                 |
| 16492_158303_1_not_null                                         | auth         | oauth_client_states            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_158303_2_not_null                                         | auth         | oauth_client_states            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_158303_4_not_null                                         | auth         | oauth_client_states            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_client_states_pkey                                        | auth         | oauth_client_states            | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_66755_10_not_null                                         | auth         | oauth_clients                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_66755_11_not_null                                         | auth         | oauth_clients                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_66755_13_not_null                                         | auth         | oauth_clients                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_66755_1_not_null                                          | auth         | oauth_clients                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_66755_4_not_null                                          | auth         | oauth_clients                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_66755_5_not_null                                          | auth         | oauth_clients                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_66755_6_not_null                                          | auth         | oauth_clients                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_clients_client_name_length                                | auth         | oauth_clients                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_clients_client_uri_length                                 | auth         | oauth_clients                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_clients_logo_uri_length                                   | auth         | oauth_clients                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_clients_pkey                                              | auth         | oauth_clients                  | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_114018_1_not_null                                         | auth         | oauth_consents                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_114018_2_not_null                                         | auth         | oauth_consents                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_114018_3_not_null                                         | auth         | oauth_consents                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_114018_4_not_null                                         | auth         | oauth_consents                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_114018_5_not_null                                         | auth         | oauth_consents                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_consents_revoked_after_granted                            | auth         | oauth_consents                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_consents_scopes_length                                    | auth         | oauth_consents                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_consents_scopes_not_empty                                 | auth         | oauth_consents                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| oauth_consents_pkey                                             | auth         | oauth_consents                 | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| oauth_consents_user_client_unique                               | auth         | oauth_consents                 | UNIQUE          | user_id, client_id                                                                                                                                                                                                      | NO            | NO                 |
| 16492_16975_1_not_null                                          | auth         | one_time_tokens                | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16975_2_not_null                                          | auth         | one_time_tokens                | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16975_3_not_null                                          | auth         | one_time_tokens                | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16975_4_not_null                                          | auth         | one_time_tokens                | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16975_5_not_null                                          | auth         | one_time_tokens                | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16975_6_not_null                                          | auth         | one_time_tokens                | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16975_7_not_null                                          | auth         | one_time_tokens                | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| one_time_tokens_token_hash_check                                | auth         | one_time_tokens                | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| one_time_tokens_pkey                                            | auth         | one_time_tokens                | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_16505_2_not_null                                          | auth         | refresh_tokens                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| refresh_tokens_pkey                                             | auth         | refresh_tokens                 | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| refresh_tokens_token_unique                                     | auth         | refresh_tokens                 | UNIQUE          | token                                                                                                                                                                                                                   | NO            | NO                 |
| 16492_16854_1_not_null                                          | auth         | saml_providers                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16854_2_not_null                                          | auth         | saml_providers                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16854_3_not_null                                          | auth         | saml_providers                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16854_4_not_null                                          | auth         | saml_providers                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| entity_id not empty                                             | auth         | saml_providers                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| metadata_url not empty                                          | auth         | saml_providers                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| metadata_xml not empty                                          | auth         | saml_providers                 | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| saml_providers_pkey                                             | auth         | saml_providers                 | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| saml_providers_entity_id_key                                    | auth         | saml_providers                 | UNIQUE          | entity_id                                                                                                                                                                                                               | NO            | NO                 |
| 16492_16872_1_not_null                                          | auth         | saml_relay_states              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16872_2_not_null                                          | auth         | saml_relay_states              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16872_3_not_null                                          | auth         | saml_relay_states              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| request_id not empty                                            | auth         | saml_relay_states              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| saml_relay_states_pkey                                          | auth         | saml_relay_states              | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_16753_1_not_null                                          | auth         | sessions                       | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16753_2_not_null                                          | auth         | sessions                       | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| sessions_scopes_length                                          | auth         | sessions                       | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| sessions_pkey                                                   | auth         | sessions                       | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_16839_1_not_null                                          | auth         | sso_domains                    | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16839_2_not_null                                          | auth         | sso_domains                    | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16839_3_not_null                                          | auth         | sso_domains                    | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| domain not empty                                                | auth         | sso_domains                    | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| sso_domains_pkey                                                | auth         | sso_domains                    | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_16830_1_not_null                                          | auth         | sso_providers                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| resource_id not empty                                           | auth         | sso_providers                  | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| sso_providers_pkey                                              | auth         | sso_providers                  | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16492_16493_2_not_null                                          | auth         | users                          | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16493_33_not_null                                         | auth         | users                          | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16492_16493_35_not_null                                         | auth         | users                          | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| users_email_change_confirm_status_check                         | auth         | users                          | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| users_pkey                                                      | auth         | users                          | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| users_phone_key                                                 | auth         | users                          | UNIQUE          | phone                                                                                                                                                                                                                   | NO            | NO                 |
| 46621_46642_2_not_null                                          | cron         | job_run_details                | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| job_run_details_pkey                                            | cron         | job_run_details                | PRIMARY KEY     | runid                                                                                                                                                                                                                   | NO            | NO                 |
| 2200_95998_1_not_null                                           | public       | ajustes_contables_caja         | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_95998_3_not_null                                           | public       | ajustes_contables_caja         | CHECK           | sesion_id IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| 2200_95998_4_not_null                                           | public       | ajustes_contables_caja         | CHECK           | tipo IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_95998_5_not_null                                           | public       | ajustes_contables_caja         | CHECK           | monto IS NOT NULL                                                                                                                                                                                                       | NO            | NO                 |
| 2200_95998_6_not_null                                           | public       | ajustes_contables_caja         | CHECK           | descripcion IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| 2200_95998_7_not_null                                           | public       | ajustes_contables_caja         | CHECK           | responsable IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| ajustes_contables_caja_monto_check                              | public       | ajustes_contables_caja         | CHECK           | (monto > 0)                                                                                                                                                                                                             | NO            | NO                 |
| ajustes_contables_caja_tipo_check                               | public       | ajustes_contables_caja         | CHECK           | (tipo = ANY (ARRAY['sobrante'::text, 'faltante'::text, 'ajuste_manual'::text]))                                                                                                                                         | NO            | NO                 |
| ajustes_contables_caja_pkey                                     | public       | ajustes_contables_caja         | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_73896_1_not_null                                           | public       | audit_caja_sesiones            | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_73896_2_not_null                                           | public       | audit_caja_sesiones            | CHECK           | operation_type IS NOT NULL                                                                                                                                                                                              | NO            | NO                 |
| 2200_73896_3_not_null                                           | public       | audit_caja_sesiones            | CHECK           | table_name IS NOT NULL                                                                                                                                                                                                  | NO            | NO                 |
| 2200_73896_4_not_null                                           | public       | audit_caja_sesiones            | CHECK           | record_id IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| audit_caja_sesiones_pkey                                        | public       | audit_caja_sesiones            | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_35368_1_not_null                                           | public       | audit_log                      | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_35368_2_not_null                                           | public       | audit_log                      | CHECK           | table_name IS NOT NULL                                                                                                                                                                                                  | NO            | NO                 |
| 2200_35368_3_not_null                                           | public       | audit_log                      | CHECK           | operation IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| audit_log_pkey                                                  | public       | audit_log                      | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_35446_1_not_null                                           | public       | authorization_requests         | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_35446_2_not_null                                           | public       | authorization_requests         | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_35446_3_not_null                                           | public       | authorization_requests         | CHECK           | cajero_id IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| 2200_35446_5_not_null                                           | public       | authorization_requests         | CHECK           | tipo_autorizacion IS NOT NULL                                                                                                                                                                                           | NO            | NO                 |
| authorization_requests_pkey                                     | public       | authorization_requests         | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_32931_11_not_null                                          | public       | caja_sesiones                  | CHECK           | business_day IS NOT NULL                                                                                                                                                                                                | NO            | NO                 |
| 2200_32931_1_not_null                                           | public       | caja_sesiones                  | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_32931_2_not_null                                           | public       | caja_sesiones                  | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_32931_3_not_null                                           | public       | caja_sesiones                  | CHECK           | cajero_id IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| 2200_32931_4_not_null                                           | public       | caja_sesiones                  | CHECK           | monto_inicial IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| caja_sesiones_insert_own_only                                   | public       | caja_sesiones                  | CHECK           | (cajero_id = auth.uid())                                                                                                                                                                                                | NO            | NO                 |
| caja_sesiones_monto_range                                       | public       | caja_sesiones                  | CHECK           | ((monto_inicial >= 0) AND (monto_inicial <= 10000000))                                                                                                                                                                  | NO            | NO                 |
| caja_sesiones_tipo_cierre_check                                 | public       | caja_sesiones                  | CHECK           | (tipo_cierre = ANY (ARRAY['manual'::text, 'automatico'::text, 'forzado'::text]))                                                                                                                                        | NO            | NO                 |
| caja_sesiones_pkey                                              | public       | caja_sesiones                  | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_17681_1_not_null                                           | public       | cities                         | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_17681_2_not_null                                           | public       | cities                         | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| cities_pkey                                                     | public       | cities                         | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| cities_department_id_name_key                                   | public       | cities                         | UNIQUE          | department_id, name                                                                                                                                                                                                     | NO            | NO                 |
| 2200_73518_1_not_null                                           | public       | cobros_mesa                    | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_73518_2_not_null                                           | public       | cobros_mesa                    | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_73518_3_not_null                                           | public       | cobros_mesa                    | CHECK           | numero_mesa IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| 2200_73518_4_not_null                                           | public       | cobros_mesa                    | CHECK           | total IS NOT NULL                                                                                                                                                                                                       | NO            | NO                 |
| 2200_73518_5_not_null                                           | public       | cobros_mesa                    | CHECK           | items_json IS NOT NULL                                                                                                                                                                                                  | NO            | NO                 |
| cobros_mesa_pkey                                                | public       | cobros_mesa                    | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_95948_1_not_null                                           | public       | conciliaciones_caja            | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_95948_2_not_null                                           | public       | conciliaciones_caja            | CHECK           | sesion_id IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| 2200_95948_3_not_null                                           | public       | conciliaciones_caja            | CHECK           | saldo_calculado IS NOT NULL                                                                                                                                                                                             | NO            | NO                 |
| 2200_95948_4_not_null                                           | public       | conciliaciones_caja            | CHECK           | saldo_fisico_real IS NOT NULL                                                                                                                                                                                           | NO            | NO                 |
| 2200_95948_5_not_null                                           | public       | conciliaciones_caja            | CHECK           | diferencia IS NOT NULL                                                                                                                                                                                                  | NO            | NO                 |
| 2200_95948_8_not_null                                           | public       | conciliaciones_caja            | CHECK           | conciliado_por IS NOT NULL                                                                                                                                                                                              | NO            | NO                 |
| 2200_95948_9_not_null                                           | public       | conciliaciones_caja            | CHECK           | conciliado_at IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| conciliaciones_caja_pkey                                        | public       | conciliaciones_caja            | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| conciliacion_sesion_unica                                       | public       | conciliaciones_caja            | UNIQUE          | sesion_id                                                                                                                                                                                                               | NO            | NO                 |
| 2200_17648_1_not_null                                           | public       | countries                      | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_17648_2_not_null                                           | public       | countries                      | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_17648_3_not_null                                           | public       | countries                      | CHECK           | code IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_17648_4_not_null                                           | public       | countries                      | CHECK           | iso_code IS NOT NULL                                                                                                                                                                                                    | NO            | NO                 |
| countries_pkey                                                  | public       | countries                      | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| countries_code_key                                              | public       | countries                      | UNIQUE          | code                                                                                                                                                                                                                    | NO            | NO                 |
| countries_iso_code_key                                          | public       | countries                      | UNIQUE          | iso_code                                                                                                                                                                                                                | NO            | NO                 |
| countries_name_key                                              | public       | countries                      | UNIQUE          | name                                                                                                                                                                                                                    | NO            | NO                 |
| 2200_17600_1_not_null                                           | public       | cuisine_types                  | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_17600_2_not_null                                           | public       | cuisine_types                  | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_17600_3_not_null                                           | public       | cuisine_types                  | CHECK           | slug IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| cuisine_types_pkey                                              | public       | cuisine_types                  | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| cuisine_types_name_key                                          | public       | cuisine_types                  | UNIQUE          | name                                                                                                                                                                                                                    | NO            | NO                 |
| cuisine_types_slug_key                                          | public       | cuisine_types                  | UNIQUE          | slug                                                                                                                                                                                                                    | NO            | NO                 |
| 2200_20074_1_not_null                                           | public       | daily_menu_selections          | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_20074_2_not_null                                           | public       | daily_menu_selections          | CHECK           | daily_menu_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_20074_3_not_null                                           | public       | daily_menu_selections          | CHECK           | universal_product_id IS NOT NULL                                                                                                                                                                                        | NO            | NO                 |
| 2200_20074_4_not_null                                           | public       | daily_menu_selections          | CHECK           | category_id IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| 2200_20074_5_not_null                                           | public       | daily_menu_selections          | CHECK           | category_name IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_20074_6_not_null                                           | public       | daily_menu_selections          | CHECK           | product_name IS NOT NULL                                                                                                                                                                                                | NO            | NO                 |
| check_selection_order                                           | public       | daily_menu_selections          | CHECK           | (selection_order >= 0)                                                                                                                                                                                                  | NO            | NO                 |
| daily_menu_selections_pkey                                      | public       | daily_menu_selections          | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| daily_menu_selections_daily_menu_id_universal_product_id_key    | public       | daily_menu_selections          | UNIQUE          | daily_menu_id, universal_product_id                                                                                                                                                                                     | NO            | NO                 |
| 2200_20050_1_not_null                                           | public       | daily_menus                    | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_20050_2_not_null                                           | public       | daily_menus                    | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_20050_3_not_null                                           | public       | daily_menus                    | CHECK           | menu_date IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| 2200_20050_4_not_null                                           | public       | daily_menus                    | CHECK           | menu_price IS NOT NULL                                                                                                                                                                                                  | NO            | NO                 |
| check_future_expiration                                         | public       | daily_menus                    | CHECK           | (expires_at > created_at)                                                                                                                                                                                               | NO            | NO                 |
| check_positive_price                                            | public       | daily_menus                    | CHECK           | (menu_price > 0)                                                                                                                                                                                                        | NO            | NO                 |
| daily_menus_status_check                                        | public       | daily_menus                    | CHECK           | ((status)::text = ANY ((ARRAY['active'::character varying, 'expired'::character varying, 'draft'::character varying])::text[]))                                                                                         | NO            | NO                 |
| daily_menus_pkey                                                | public       | daily_menus                    | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| daily_menus_restaurant_id_menu_date_key                         | public       | daily_menus                    | UNIQUE          | restaurant_id, menu_date                                                                                                                                                                                                | NO            | NO                 |
| 2200_22681_1_not_null                                           | public       | daily_special_activations      | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_22681_2_not_null                                           | public       | daily_special_activations      | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_22681_3_not_null                                           | public       | daily_special_activations      | CHECK           | special_dish_id IS NOT NULL                                                                                                                                                                                             | NO            | NO                 |
| 2200_22681_4_not_null                                           | public       | daily_special_activations      | CHECK           | activation_date IS NOT NULL                                                                                                                                                                                             | NO            | NO                 |
| daily_special_activations_pkey                                  | public       | daily_special_activations      | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| unique_special_activation_per_day                               | public       | daily_special_activations      | UNIQUE          | restaurant_id, special_dish_id, activation_date                                                                                                                                                                         | NO            | NO                 |
| 2200_21789_1_not_null                                           | public       | delivery_orders                | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_21789_2_not_null                                           | public       | delivery_orders                | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_21789_3_not_null                                           | public       | delivery_orders                | CHECK           | daily_menu_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_21789_4_not_null                                           | public       | delivery_orders                | CHECK           | customer_name IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_21789_5_not_null                                           | public       | delivery_orders                | CHECK           | customer_phone IS NOT NULL                                                                                                                                                                                              | NO            | NO                 |
| 2200_21789_6_not_null                                           | public       | delivery_orders                | CHECK           | delivery_address IS NOT NULL                                                                                                                                                                                            | NO            | NO                 |
| 2200_21789_7_not_null                                           | public       | delivery_orders                | CHECK           | order_items IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| 2200_21789_8_not_null                                           | public       | delivery_orders                | CHECK           | total_amount IS NOT NULL                                                                                                                                                                                                | NO            | NO                 |
| delivery_orders_status_check                                    | public       | delivery_orders                | CHECK           | ((status)::text = ANY ((ARRAY['received'::character varying, 'cooking'::character varying, 'ready'::character varying, 'sent'::character varying, 'delivered'::character varying, 'paid'::character varying])::text[])) | NO            | NO                 |
| delivery_orders_pkey                                            | public       | delivery_orders                | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_21773_1_not_null                                           | public       | delivery_personnel             | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_21773_2_not_null                                           | public       | delivery_personnel             | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_21773_3_not_null                                           | public       | delivery_personnel             | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_21773_4_not_null                                           | public       | delivery_personnel             | CHECK           | phone IS NOT NULL                                                                                                                                                                                                       | NO            | NO                 |
| delivery_personnel_status_check                                 | public       | delivery_personnel             | CHECK           | ((status)::text = ANY ((ARRAY['available'::character varying, 'busy'::character varying, 'offline'::character varying])::text[]))                                                                                       | NO            | NO                 |
| delivery_personnel_pkey                                         | public       | delivery_personnel             | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_17663_1_not_null                                           | public       | departments                    | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_17663_2_not_null                                           | public       | departments                    | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_17663_3_not_null                                           | public       | departments                    | CHECK           | code IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| departments_pkey                                                | public       | departments                    | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| departments_country_id_code_key                                 | public       | departments                    | UNIQUE          | country_id, code                                                                                                                                                                                                        | NO            | NO                 |
| departments_country_id_name_key                                 | public       | departments                    | UNIQUE          | country_id, name                                                                                                                                                                                                        | NO            | NO                 |
| 2200_33153_10_not_null                                          | public       | facturas                       | CHECK           | metodo_pago IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| 2200_33153_13_not_null                                          | public       | facturas                       | CHECK           | generada_por IS NOT NULL                                                                                                                                                                                                | NO            | NO                 |
| 2200_33153_1_not_null                                           | public       | facturas                       | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_33153_2_not_null                                           | public       | facturas                       | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_33153_3_not_null                                           | public       | facturas                       | CHECK           | numero_factura IS NOT NULL                                                                                                                                                                                              | NO            | NO                 |
| 2200_33153_7_not_null                                           | public       | facturas                       | CHECK           | subtotal IS NOT NULL                                                                                                                                                                                                    | NO            | NO                 |
| 2200_33153_9_not_null                                           | public       | facturas                       | CHECK           | total IS NOT NULL                                                                                                                                                                                                       | NO            | NO                 |
| facturas_pkey                                                   | public       | facturas                       | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| uk_numero_factura_por_restaurant                                | public       | facturas                       | UNIQUE          | restaurant_id, numero_factura                                                                                                                                                                                           | NO            | NO                 |
| 2200_89176_1_not_null                                           | public       | favorite_combinations          | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| favorite_combinations_pkey                                      | public       | favorite_combinations          | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_33098_1_not_null                                           | public       | gastos_caja                    | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_33098_3_not_null                                           | public       | gastos_caja                    | CHECK           | concepto IS NOT NULL                                                                                                                                                                                                    | NO            | NO                 |
| 2200_33098_4_not_null                                           | public       | gastos_caja                    | CHECK           | monto IS NOT NULL                                                                                                                                                                                                       | NO            | NO                 |
| 2200_33098_7_not_null                                           | public       | gastos_caja                    | CHECK           | registrado_por IS NOT NULL                                                                                                                                                                                              | NO            | NO                 |
| gastos_caja_pkey                                                | public       | gastos_caja                    | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_20125_1_not_null                                           | public       | generated_combinations         | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_20125_2_not_null                                           | public       | generated_combinations         | CHECK           | daily_menu_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_20125_3_not_null                                           | public       | generated_combinations         | CHECK           | combination_name IS NOT NULL                                                                                                                                                                                            | NO            | NO                 |
| 2200_20125_5_not_null                                           | public       | generated_combinations         | CHECK           | combination_price IS NOT NULL                                                                                                                                                                                           | NO            | NO                 |
| 2200_20125_7_not_null                                           | public       | generated_combinations         | CHECK           | principio_product_id IS NOT NULL                                                                                                                                                                                        | NO            | NO                 |
| 2200_20125_8_not_null                                           | public       | generated_combinations         | CHECK           | proteina_product_id IS NOT NULL                                                                                                                                                                                         | NO            | NO                 |
| check_combination_price                                         | public       | generated_combinations         | CHECK           | (combination_price > 0)                                                                                                                                                                                                 | NO            | NO                 |
| generated_combinations_pkey                                     | public       | generated_combinations         | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_22613_1_not_null                                           | public       | generated_special_combinations | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_22613_2_not_null                                           | public       | generated_special_combinations | CHECK           | special_dish_id IS NOT NULL                                                                                                                                                                                             | NO            | NO                 |
| 2200_22613_3_not_null                                           | public       | generated_special_combinations | CHECK           | combination_name IS NOT NULL                                                                                                                                                                                            | NO            | NO                 |
| 2200_22613_5_not_null                                           | public       | generated_special_combinations | CHECK           | combination_price IS NOT NULL                                                                                                                                                                                           | NO            | NO                 |
| 2200_22613_8_not_null                                           | public       | generated_special_combinations | CHECK           | proteina_product_id IS NOT NULL                                                                                                                                                                                         | NO            | NO                 |
| special_combinations_price_positive                             | public       | generated_special_combinations | CHECK           | (combination_price > 0)                                                                                                                                                                                                 | NO            | NO                 |
| special_combinations_sold_not_negative                          | public       | generated_special_combinations | CHECK           | (current_sold_quantity >= 0)                                                                                                                                                                                            | NO            | NO                 |
| generated_special_combinations_pkey                             | public       | generated_special_combinations | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_25087_1_not_null                                           | public       | items_orden_mesa               | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_25087_5_not_null                                           | public       | items_orden_mesa               | CHECK           | tipo_item IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| 2200_25087_7_not_null                                           | public       | items_orden_mesa               | CHECK           | precio_unitario IS NOT NULL                                                                                                                                                                                             | NO            | NO                 |
| 2200_25087_8_not_null                                           | public       | items_orden_mesa               | CHECK           | precio_total IS NOT NULL                                                                                                                                                                                                | NO            | NO                 |
| items_orden_mesa_cantidad_check                                 | public       | items_orden_mesa               | CHECK           | (cantidad > 0)                                                                                                                                                                                                          | NO            | NO                 |
| items_orden_mesa_tipo_item_check                                | public       | items_orden_mesa               | CHECK           | ((tipo_item)::text = ANY ((ARRAY['menu_dia'::character varying, 'especial'::character varying])::text[]))                                                                                                               | NO            | NO                 |
| items_orden_mesa_pkey                                           | public       | items_orden_mesa               | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_89264_1_not_null                                           | public       | menu_template_products         | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| menu_template_products_pkey                                     | public       | menu_template_products         | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_89230_1_not_null                                           | public       | menu_templates                 | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| menu_templates_pkey                                             | public       | menu_templates                 | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_73422_1_not_null                                           | public       | mesa_estado_audit              | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| mesa_estado_audit_pkey                                          | public       | mesa_estado_audit              | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_33138_1_not_null                                           | public       | numeracion_facturas            | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_33138_2_not_null                                           | public       | numeracion_facturas            | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| numeracion_facturas_pkey                                        | public       | numeracion_facturas            | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_25070_1_not_null                                           | public       | ordenes_mesa                   | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_25070_2_not_null                                           | public       | ordenes_mesa                   | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_25070_3_not_null                                           | public       | ordenes_mesa                   | CHECK           | numero_mesa IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| 2200_25070_4_not_null                                           | public       | ordenes_mesa                   | CHECK           | monto_total IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| ordenes_mesa_estado_check                                       | public       | ordenes_mesa                   | CHECK           | ((estado)::text = ANY ((ARRAY['activa'::character varying, 'pagada'::character varying, 'completada'::character varying])::text[]))                                                                                     | NO            | NO                 |
| ordenes_mesa_pkey                                               | public       | ordenes_mesa                   | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_47864_1_not_null                                           | public       | permissions                    | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_47864_2_not_null                                           | public       | permissions                    | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_47864_3_not_null                                           | public       | permissions                    | CHECK           | module IS NOT NULL                                                                                                                                                                                                      | NO            | NO                 |
| valid_modules                                                   | public       | permissions                    | CHECK           | (module = ANY (ARRAY['caja'::text, 'menu'::text, 'ordenes'::text, 'config'::text, 'reportes'::text, 'mesas'::text]))                                                                                                    | NO            | NO                 |
| valid_permission_format                                         | public       | permissions                    | CHECK           | (name ~ '^[a-z_]+\.[a-z_]+$'::text)                                                                                                                                                                                     | NO            | NO                 |
| permissions_pkey                                                | public       | permissions                    | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| permissions_name_key                                            | public       | permissions                    | UNIQUE          | name                                                                                                                                                                                                                    | NO            | NO                 |
| 2200_18566_1_not_null                                           | public       | product_aliases                | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_18566_2_not_null                                           | public       | product_aliases                | CHECK           | universal_product_id IS NOT NULL                                                                                                                                                                                        | NO            | NO                 |
| 2200_18566_3_not_null                                           | public       | product_aliases                | CHECK           | alias IS NOT NULL                                                                                                                                                                                                       | NO            | NO                 |
| product_aliases_pkey                                            | public       | product_aliases                | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_18502_1_not_null                                           | public       | product_suggestions            | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_18502_2_not_null                                           | public       | product_suggestions            | CHECK           | suggested_name IS NOT NULL                                                                                                                                                                                              | NO            | NO                 |
| product_suggestions_status_check                                | public       | product_suggestions            | CHECK           | ((status)::text = ANY ((ARRAY['pending'::character varying, 'approved'::character varying, 'rejected'::character varying, 'duplicate'::character varying])::text[]))                                                    | NO            | NO                 |
| product_suggestions_pkey                                        | public       | product_suggestions            | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_184782_1_not_null                                          | public       | profiles                       | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| profiles_pkey                                                   | public       | profiles                       | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_20100_1_not_null                                           | public       | protein_quantities             | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_20100_2_not_null                                           | public       | protein_quantities             | CHECK           | daily_menu_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_20100_3_not_null                                           | public       | protein_quantities             | CHECK           | protein_product_id IS NOT NULL                                                                                                                                                                                          | NO            | NO                 |
| 2200_20100_4_not_null                                           | public       | protein_quantities             | CHECK           | planned_quantity IS NOT NULL                                                                                                                                                                                            | NO            | NO                 |
| check_protein_quantity                                          | public       | protein_quantities             | CHECK           | ((planned_quantity > 0) AND (planned_quantity <= 1000))                                                                                                                                                                 | NO            | NO                 |
| check_valid_frequency                                           | public       | protein_quantities             | CHECK           | ((usage_frequency_score >= 1) AND (usage_frequency_score <= 10))                                                                                                                                                        | NO            | NO                 |
| protein_quantities_pkey                                         | public       | protein_quantities             | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| protein_quantities_daily_menu_id_protein_product_id_key         | public       | protein_quantities             | UNIQUE          | daily_menu_id, protein_product_id                                                                                                                                                                                       | NO            | NO                 |
| 2200_94167_1_not_null                                           | public       | restaurant_custom_roles        | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_94167_2_not_null                                           | public       | restaurant_custom_roles        | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_94167_3_not_null                                           | public       | restaurant_custom_roles        | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_94167_6_not_null                                           | public       | restaurant_custom_roles        | CHECK           | created_by IS NOT NULL                                                                                                                                                                                                  | NO            | NO                 |
| restaurant_custom_roles_name_check                              | public       | restaurant_custom_roles        | CHECK           | ((char_length(name) >= 2) AND (char_length(name) <= 50))                                                                                                                                                                | NO            | NO                 |
| restaurant_custom_roles_pkey                                    | public       | restaurant_custom_roles        | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| restaurant_custom_roles_restaurant_id_name_key                  | public       | restaurant_custom_roles        | UNIQUE          | restaurant_id, name                                                                                                                                                                                                     | NO            | NO                 |
| 2200_20394_1_not_null                                           | public       | restaurant_favorites           | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_20394_2_not_null                                           | public       | restaurant_favorites           | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_20394_3_not_null                                           | public       | restaurant_favorites           | CHECK           | product_id IS NOT NULL                                                                                                                                                                                                  | NO            | NO                 |
| restaurant_favorites_pkey                                       | public       | restaurant_favorites           | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| restaurant_favorites_restaurant_id_product_id_key               | public       | restaurant_favorites           | UNIQUE          | restaurant_id, product_id                                                                                                                                                                                               | NO            | NO                 |
| 2200_29146_1_not_null                                           | public       | restaurant_mesas               | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_29146_2_not_null                                           | public       | restaurant_mesas               | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_29146_3_not_null                                           | public       | restaurant_mesas               | CHECK           | numero IS NOT NULL                                                                                                                                                                                                      | NO            | NO                 |
| restaurant_mesas_capacidad_personas_check                       | public       | restaurant_mesas               | CHECK           | ((capacidad_personas > 0) AND (capacidad_personas <= 50))                                                                                                                                                               | NO            | NO                 |
| restaurant_mesas_estado_check                                   | public       | restaurant_mesas               | CHECK           | ((estado)::text = ANY ((ARRAY['libre'::character varying, 'ocupada'::character varying, 'reservada'::character varying, 'inactiva'::character varying, 'mantenimiento'::character varying])::text[]))                   | NO            | NO                 |
| restaurant_mesas_numero_check                                   | public       | restaurant_mesas               | CHECK           | ((numero > 0) AND (numero <= 999))                                                                                                                                                                                      | NO            | NO                 |
| restaurant_mesas_pkey                                           | public       | restaurant_mesas               | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| restaurant_mesas_restaurant_id_numero_key                       | public       | restaurant_mesas               | UNIQUE          | restaurant_id, numero                                                                                                                                                                                                   | NO            | NO                 |
| 2200_18542_1_not_null                                           | public       | restaurant_product_usage       | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_18542_2_not_null                                           | public       | restaurant_product_usage       | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_18542_3_not_null                                           | public       | restaurant_product_usage       | CHECK           | universal_product_id IS NOT NULL                                                                                                                                                                                        | NO            | NO                 |
| restaurant_product_usage_pkey                                   | public       | restaurant_product_usage       | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| restaurant_product_usage_restaurant_id_universal_product_id_key | public       | restaurant_product_usage       | UNIQUE          | restaurant_id, universal_product_id                                                                                                                                                                                     | NO            | NO                 |
| 2200_47950_1_not_null                                           | public       | restaurant_role_configs        | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_47950_2_not_null                                           | public       | restaurant_role_configs        | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_47950_3_not_null                                           | public       | restaurant_role_configs        | CHECK           | role_id IS NOT NULL                                                                                                                                                                                                     | NO            | NO                 |
| 2200_47950_4_not_null                                           | public       | restaurant_role_configs        | CHECK           | permission_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_47950_5_not_null                                           | public       | restaurant_role_configs        | CHECK           | granted IS NOT NULL                                                                                                                                                                                                     | NO            | NO                 |
| 2200_47950_6_not_null                                           | public       | restaurant_role_configs        | CHECK           | configured_by IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| check_config_target                                             | public       | restaurant_role_configs        | CHECK           | (((role_id IS NOT NULL) AND (custom_role_id IS NULL)) OR ((role_id IS NULL) AND (custom_role_id IS NOT NULL)))                                                                                                          | NO            | NO                 |
| restaurant_role_configs_pkey                                    | public       | restaurant_role_configs        | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| restaurant_role_configs_restaurant_id_role_id_permission_id_key | public       | restaurant_role_configs        | UNIQUE          | restaurant_id, role_id, permission_id                                                                                                                                                                                   | NO            | NO                 |
| 2200_17285_1_not_null                                           | public       | restaurants                    | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| restaurants_owner_consistency                                   | public       | restaurants                    | CHECK           | (owner_id IS NOT NULL)                                                                                                                                                                                                  | NO            | NO                 |
| restaurants_setup_step_valid                                    | public       | restaurants                    | CHECK           | ((setup_step >= 1) AND (setup_step <= 4))                                                                                                                                                                               | NO            | NO                 |
| restaurants_pkey                                                | public       | restaurants                    | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_47904_1_not_null                                           | public       | role_permissions               | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_47904_2_not_null                                           | public       | role_permissions               | CHECK           | role_id IS NOT NULL                                                                                                                                                                                                     | NO            | NO                 |
| 2200_47904_3_not_null                                           | public       | role_permissions               | CHECK           | permission_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| role_permissions_pkey                                           | public       | role_permissions               | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| role_permissions_role_id_permission_id_key                      | public       | role_permissions               | UNIQUE          | role_id, permission_id                                                                                                                                                                                                  | NO            | NO                 |
| 2200_35471_1_not_null                                           | public       | security_alerts                | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_35471_2_not_null                                           | public       | security_alerts                | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_35471_4_not_null                                           | public       | security_alerts                | CHECK           | tipo_alerta IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| 2200_35471_6_not_null                                           | public       | security_alerts                | CHECK           | descripcion IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| security_alerts_pkey                                            | public       | security_alerts                | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_80938_1_not_null                                           | public       | security_limits                | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_80938_3_not_null                                           | public       | security_limits                | CHECK           | limite_transaccion_normal IS NOT NULL                                                                                                                                                                                   | NO            | NO                 |
| 2200_80938_4_not_null                                           | public       | security_limits                | CHECK           | limite_transaccion_efectivo IS NOT NULL                                                                                                                                                                                 | NO            | NO                 |
| 2200_80938_5_not_null                                           | public       | security_limits                | CHECK           | limite_diario_cajero IS NOT NULL                                                                                                                                                                                        | NO            | NO                 |
| 2200_80938_6_not_null                                           | public       | security_limits                | CHECK           | limite_autorizacion_supervisor IS NOT NULL                                                                                                                                                                              | NO            | NO                 |
| security_limits_pkey                                            | public       | security_limits                | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| security_limits_restaurant_id_key                               | public       | security_limits                | UNIQUE          | restaurant_id                                                                                                                                                                                                           | NO            | NO                 |
| 2200_35420_1_not_null                                           | public       | security_policies              | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_35420_2_not_null                                           | public       | security_policies              | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| security_policies_pkey                                          | public       | security_policies              | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_22587_1_not_null                                           | public       | special_dish_selections        | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_22587_2_not_null                                           | public       | special_dish_selections        | CHECK           | special_dish_id IS NOT NULL                                                                                                                                                                                             | NO            | NO                 |
| 2200_22587_3_not_null                                           | public       | special_dish_selections        | CHECK           | universal_product_id IS NOT NULL                                                                                                                                                                                        | NO            | NO                 |
| 2200_22587_4_not_null                                           | public       | special_dish_selections        | CHECK           | category_id IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| 2200_22587_5_not_null                                           | public       | special_dish_selections        | CHECK           | category_name IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_22587_6_not_null                                           | public       | special_dish_selections        | CHECK           | product_name IS NOT NULL                                                                                                                                                                                                | NO            | NO                 |
| special_dish_selections_pkey                                    | public       | special_dish_selections        | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| unique_product_per_special_dish                                 | public       | special_dish_selections        | UNIQUE          | special_dish_id, universal_product_id                                                                                                                                                                                   | NO            | NO                 |
| 2200_22798_1_not_null                                           | public       | special_dishes                 | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_22798_2_not_null                                           | public       | special_dishes                 | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_22798_3_not_null                                           | public       | special_dishes                 | CHECK           | dish_name IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| 2200_22798_5_not_null                                           | public       | special_dishes                 | CHECK           | dish_price IS NOT NULL                                                                                                                                                                                                  | NO            | NO                 |
| chk_special_dishes_image_alt                                    | public       | special_dishes                 | CHECK           | (((image_url IS NULL) AND (image_alt IS NULL)) OR ((image_url IS NOT NULL) AND (image_alt IS NOT NULL) AND (length(TRIM(BOTH FROM image_alt)) > 0)))                                                                    | NO            | NO                 |
| special_dishes_name_not_empty                                   | public       | special_dishes                 | CHECK           | ((dish_name)::text <> ''::text)                                                                                                                                                                                         | NO            | NO                 |
| special_dishes_price_positive                                   | public       | special_dishes                 | CHECK           | (dish_price > 0)                                                                                                                                                                                                        | NO            | NO                 |
| special_dishes_pkey                                             | public       | special_dishes                 | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_22655_1_not_null                                           | public       | special_protein_quantities     | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_22655_2_not_null                                           | public       | special_protein_quantities     | CHECK           | special_dish_id IS NOT NULL                                                                                                                                                                                             | NO            | NO                 |
| 2200_22655_3_not_null                                           | public       | special_protein_quantities     | CHECK           | protein_product_id IS NOT NULL                                                                                                                                                                                          | NO            | NO                 |
| 2200_22655_4_not_null                                           | public       | special_protein_quantities     | CHECK           | planned_quantity IS NOT NULL                                                                                                                                                                                            | NO            | NO                 |
| 2200_22655_5_not_null                                           | public       | special_protein_quantities     | CHECK           | available_quantity IS NOT NULL                                                                                                                                                                                          | NO            | NO                 |
| special_protein_quantities_positive                             | public       | special_protein_quantities     | CHECK           | (planned_quantity >= 0)                                                                                                                                                                                                 | NO            | NO                 |
| special_protein_quantities_pkey                                 | public       | special_protein_quantities     | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| unique_protein_per_special_dish                                 | public       | special_protein_quantities     | UNIQUE          | special_dish_id, protein_product_id                                                                                                                                                                                     | NO            | NO                 |
| 2200_47827_1_not_null                                           | public       | system_roles                   | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_47827_2_not_null                                           | public       | system_roles                   | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| valid_role_names                                                | public       | system_roles                   | CHECK           | (name ~ '^[a-z_]+$'::text)                                                                                                                                                                                              | NO            | NO                 |
| system_roles_pkey                                               | public       | system_roles                   | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| system_roles_name_key                                           | public       | system_roles                   | UNIQUE          | name                                                                                                                                                                                                                    | NO            | NO                 |
| 2200_32972_10_not_null                                          | public       | transacciones_caja             | CHECK           | cajero_id IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| 2200_32972_1_not_null                                           | public       | transacciones_caja             | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_32972_2_not_null                                           | public       | transacciones_caja             | CHECK           | caja_sesion_id IS NOT NULL                                                                                                                                                                                              | NO            | NO                 |
| 2200_32972_6_not_null                                           | public       | transacciones_caja             | CHECK           | monto_total IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| transacciones_caja_pkey                                         | public       | transacciones_caja             | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_18458_1_not_null                                           | public       | universal_categories           | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_18458_2_not_null                                           | public       | universal_categories           | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_18458_3_not_null                                           | public       | universal_categories           | CHECK           | slug IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_18458_7_not_null                                           | public       | universal_categories           | CHECK           | display_order IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| universal_categories_pkey                                       | public       | universal_categories           | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| universal_categories_name_key                                   | public       | universal_categories           | UNIQUE          | name                                                                                                                                                                                                                    | NO            | NO                 |
| universal_categories_slug_key                                   | public       | universal_categories           | UNIQUE          | slug                                                                                                                                                                                                                    | NO            | NO                 |
| 2200_18473_1_not_null                                           | public       | universal_products             | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_18473_2_not_null                                           | public       | universal_products             | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| 2200_18473_4_not_null                                           | public       | universal_products             | CHECK           | category_id IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| check_popularity_score                                          | public       | universal_products             | CHECK           | ((popularity_score >= 0) AND (popularity_score <= 100))                                                                                                                                                                 | NO            | NO                 |
| check_price_range                                               | public       | universal_products             | CHECK           | (suggested_price_min <= suggested_price_max)                                                                                                                                                                            | NO            | NO                 |
| universal_products_pkey                                         | public       | universal_products             | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_50220_1_not_null                                           | public       | user_profiles_app              | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_50220_2_not_null                                           | public       | user_profiles_app              | CHECK           | email IS NOT NULL                                                                                                                                                                                                       | NO            | NO                 |
| 2200_50220_3_not_null                                           | public       | user_profiles_app              | CHECK           | name IS NOT NULL                                                                                                                                                                                                        | NO            | NO                 |
| user_profiles_role_check                                        | public       | user_profiles_app              | CHECK           | (role = ANY (ARRAY['customer'::text, 'restaurant_owner'::text, 'delivery'::text, 'admin'::text]))                                                                                                                       | NO            | NO                 |
| user_profiles_pkey                                              | public       | user_profiles_app              | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 2200_48011_1_not_null                                           | public       | user_roles                     | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_48011_2_not_null                                           | public       | user_roles                     | CHECK           | user_id IS NOT NULL                                                                                                                                                                                                     | NO            | NO                 |
| 2200_48011_3_not_null                                           | public       | user_roles                     | CHECK           | role_id IS NOT NULL                                                                                                                                                                                                     | NO            | NO                 |
| 2200_48011_4_not_null                                           | public       | user_roles                     | CHECK           | restaurant_id IS NOT NULL                                                                                                                                                                                               | NO            | NO                 |
| 2200_48011_5_not_null                                           | public       | user_roles                     | CHECK           | assigned_by IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| check_role_type                                                 | public       | user_roles                     | CHECK           | (((role_id IS NOT NULL) AND (custom_role_id IS NULL)) OR ((role_id IS NULL) AND (custom_role_id IS NOT NULL)))                                                                                                          | NO            | NO                 |
| user_roles_pkey                                                 | public       | user_roles                     | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| user_roles_user_id_restaurant_id_key                            | public       | user_roles                     | UNIQUE          | user_id, restaurant_id                                                                                                                                                                                                  | NO            | NO                 |
| 2200_17269_1_not_null                                           | public       | users                          | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 2200_17269_2_not_null                                           | public       | users                          | CHECK           | first_name IS NOT NULL                                                                                                                                                                                                  | NO            | NO                 |
| 2200_17269_3_not_null                                           | public       | users                          | CHECK           | last_name IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| 2200_17269_4_not_null                                           | public       | users                          | CHECK           | email IS NOT NULL                                                                                                                                                                                                       | NO            | NO                 |
| 2200_17269_5_not_null                                           | public       | users                          | CHECK           | phone IS NOT NULL                                                                                                                                                                                                       | NO            | NO                 |
| users_pkey                                                      | public       | users                          | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| users_email_key                                                 | public       | users                          | UNIQUE          | email                                                                                                                                                                                                                   | NO            | NO                 |
| users_restaurant_id_key                                         | public       | users                          | UNIQUE          | restaurant_id                                                                                                                                                                                                           | NO            | NO                 |
| 16603_17253_10_not_null                                         | realtime     | messages                       | CHECK           | id IS NOT NULL                                                                                                                                                                                                          | NO            | NO                 |
| 16603_17253_3_not_null                                          | realtime     | messages                       | CHECK           | topic IS NOT NULL                                                                                                                                                                                                       | NO            | NO                 |
| 16603_17253_4_not_null                                          | realtime     | messages                       | CHECK           | extension IS NOT NULL                                                                                                                                                                                                   | NO            | NO                 |
| 16603_17253_8_not_null                                          | realtime     | messages                       | CHECK           | updated_at IS NOT NULL                                                                                                                                                                                                  | NO            | NO                 |
| 16603_17253_9_not_null                                          | realtime     | messages                       | CHECK           | inserted_at IS NOT NULL                                                                                                                                                                                                 | NO            | NO                 |
| messages_pkey                                                   | realtime     | messages                       | PRIMARY KEY     | id, inserted_at                                                                                                                                                                                                         | NO            | NO                 |
| 16603_129562_1_not_null                                         | realtime     | messages_2025_11_07            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129562_2_not_null                                         | realtime     | messages_2025_11_07            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129562_6_not_null                                         | realtime     | messages_2025_11_07            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129562_7_not_null                                         | realtime     | messages_2025_11_07            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129562_8_not_null                                         | realtime     | messages_2025_11_07            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| messages_2025_11_07_pkey                                        | realtime     | messages_2025_11_07            | PRIMARY KEY     | id, inserted_at                                                                                                                                                                                                         | NO            | NO                 |
| 16603_129574_1_not_null                                         | realtime     | messages_2025_11_08            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129574_2_not_null                                         | realtime     | messages_2025_11_08            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129574_6_not_null                                         | realtime     | messages_2025_11_08            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129574_7_not_null                                         | realtime     | messages_2025_11_08            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129574_8_not_null                                         | realtime     | messages_2025_11_08            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| messages_2025_11_08_pkey                                        | realtime     | messages_2025_11_08            | PRIMARY KEY     | id, inserted_at                                                                                                                                                                                                         | NO            | NO                 |
| 16603_129586_1_not_null                                         | realtime     | messages_2025_11_09            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129586_2_not_null                                         | realtime     | messages_2025_11_09            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129586_6_not_null                                         | realtime     | messages_2025_11_09            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129586_7_not_null                                         | realtime     | messages_2025_11_09            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129586_8_not_null                                         | realtime     | messages_2025_11_09            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| messages_2025_11_09_pkey                                        | realtime     | messages_2025_11_09            | PRIMARY KEY     | id, inserted_at                                                                                                                                                                                                         | NO            | NO                 |
| 16603_129598_1_not_null                                         | realtime     | messages_2025_11_10            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129598_2_not_null                                         | realtime     | messages_2025_11_10            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129598_6_not_null                                         | realtime     | messages_2025_11_10            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129598_7_not_null                                         | realtime     | messages_2025_11_10            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129598_8_not_null                                         | realtime     | messages_2025_11_10            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| messages_2025_11_10_pkey                                        | realtime     | messages_2025_11_10            | PRIMARY KEY     | id, inserted_at                                                                                                                                                                                                         | NO            | NO                 |
| 16603_129610_1_not_null                                         | realtime     | messages_2025_11_11            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129610_2_not_null                                         | realtime     | messages_2025_11_11            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129610_6_not_null                                         | realtime     | messages_2025_11_11            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129610_7_not_null                                         | realtime     | messages_2025_11_11            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_129610_8_not_null                                         | realtime     | messages_2025_11_11            | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| messages_2025_11_11_pkey                                        | realtime     | messages_2025_11_11            | PRIMARY KEY     | id, inserted_at                                                                                                                                                                                                         | NO            | NO                 |
| 16603_17000_1_not_null                                          | realtime     | schema_migrations              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| schema_migrations_pkey                                          | realtime     | schema_migrations              | PRIMARY KEY     | version                                                                                                                                                                                                                 | NO            | NO                 |
| 16603_17111_1_not_null                                          | realtime     | subscription                   | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_17111_2_not_null                                          | realtime     | subscription                   | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_17111_4_not_null                                          | realtime     | subscription                   | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_17111_5_not_null                                          | realtime     | subscription                   | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_17111_7_not_null                                          | realtime     | subscription                   | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_17111_8_not_null                                          | realtime     | subscription                   | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16603_17111_9_not_null                                          | realtime     | subscription                   | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| pk_subscription                                                 | realtime     | subscription                   | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16540_16544_11_not_null                                         | storage      | buckets                        | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_16544_1_not_null                                          | storage      | buckets                        | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_16544_2_not_null                                          | storage      | buckets                        | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| buckets_pkey                                                    | storage      | buckets                        | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16540_59974_1_not_null                                          | storage      | buckets_analytics              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_59974_2_not_null                                          | storage      | buckets_analytics              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_59974_3_not_null                                          | storage      | buckets_analytics              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_59974_4_not_null                                          | storage      | buckets_analytics              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_59974_5_not_null                                          | storage      | buckets_analytics              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_59974_6_not_null                                          | storage      | buckets_analytics              | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| buckets_analytics_pkey                                          | storage      | buckets_analytics              | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16540_16559_1_not_null                                          | storage      | objects                        | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| objects_pkey                                                    | storage      | objects                        | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16540_59930_1_not_null                                          | storage      | prefixes                       | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_59930_2_not_null                                          | storage      | prefixes                       | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_59930_3_not_null                                          | storage      | prefixes                       | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| prefixes_pkey                                                   | storage      | prefixes                       | PRIMARY KEY     | bucket_id, level, name                                                                                                                                                                                                  | NO            | NO                 |
| 16540_17037_1_not_null                                          | storage      | s3_multipart_uploads           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17037_2_not_null                                          | storage      | s3_multipart_uploads           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17037_3_not_null                                          | storage      | s3_multipart_uploads           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17037_4_not_null                                          | storage      | s3_multipart_uploads           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17037_5_not_null                                          | storage      | s3_multipart_uploads           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17037_6_not_null                                          | storage      | s3_multipart_uploads           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17037_8_not_null                                          | storage      | s3_multipart_uploads           | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| s3_multipart_uploads_pkey                                       | storage      | s3_multipart_uploads           | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16540_17051_10_not_null                                         | storage      | s3_multipart_uploads_parts     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17051_1_not_null                                          | storage      | s3_multipart_uploads_parts     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17051_2_not_null                                          | storage      | s3_multipart_uploads_parts     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17051_3_not_null                                          | storage      | s3_multipart_uploads_parts     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17051_4_not_null                                          | storage      | s3_multipart_uploads_parts     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17051_5_not_null                                          | storage      | s3_multipart_uploads_parts     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17051_6_not_null                                          | storage      | s3_multipart_uploads_parts     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17051_7_not_null                                          | storage      | s3_multipart_uploads_parts     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16540_17051_9_not_null                                          | storage      | s3_multipart_uploads_parts     | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| s3_multipart_uploads_parts_pkey                                 | storage      | s3_multipart_uploads_parts     | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |
| 16651_16656_1_not_null                                          | vault        | secrets                        | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16651_16656_3_not_null                                          | vault        | secrets                        | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16651_16656_4_not_null                                          | vault        | secrets                        | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16651_16656_7_not_null                                          | vault        | secrets                        | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| 16651_16656_8_not_null                                          | vault        | secrets                        | CHECK           | N/A                                                                                                                                                                                                                     | NO            | NO                 |
| secrets_pkey                                                    | vault        | secrets                        | PRIMARY KEY     | id                                                                                                                                                                                                                      | NO            | NO                 |




-- CONSULTA 9: Información de extensiones instaladas
SELECT 
    e.extname as extension_name,
    e.extversion as version,
    n.nspname as schema,
    e.extrelocatable as relocatable,
    obj_description(e.oid) as description
FROM pg_extension e
JOIN pg_namespace n ON e.extnamespace = n.oid
ORDER BY e.extname;


| extension_name     | version | schema     | relocatable | description                                                            |
| ------------------ | ------- | ---------- | ----------- | ---------------------------------------------------------------------- |
| pg_cron            | 1.6     | pg_catalog | false       | Job scheduler for PostgreSQL                                           |
| pg_graphql         | 1.5.11  | graphql    | false       | pg_graphql: GraphQL support                                            |
| pg_stat_statements | 1.11    | extensions | true        | track planning and execution statistics of all SQL statements executed |
| pgcrypto           | 1.3     | extensions | true        | cryptographic functions                                                |
| plpgsql            | 1.0     | pg_catalog | false       | PL/pgSQL procedural language                                           |
| supabase_vault     | 0.3.1   | vault      | false       | Supabase Vault Extension                                               |
| uuid-ossp          | 1.1     | extensions | true        | generate universally unique identifiers (UUIDs)                        |




-- CONSULTA 10: Información de esquemas (corregida)
SELECT 
    schema_name,
    schema_owner,
    CASE 
        WHEN schema_name IN ('information_schema', 'pg_catalog', 'pg_toast') THEN 'Sistema PostgreSQL'
        WHEN schema_name IN ('auth', 'storage', 'realtime', 'vault', 'cron', 'graphql', 'graphql_public', 'extensions', 'pgbouncer') THEN 'Sistema Supabase'
        WHEN schema_name = 'public' THEN 'Aplicación SPOON'
        ELSE 'Otro'
    END as category,
    (SELECT COUNT(*) FROM information_schema.tables 
     WHERE table_schema = schema_name AND table_type = 'BASE TABLE') as table_count,
    (SELECT COUNT(*) FROM information_schema.views 
     WHERE table_schema = schema_name) as view_count,
    (SELECT COUNT(*) FROM information_schema.routines 
     WHERE routine_schema = schema_name) as routine_count
FROM information_schema.schemata
WHERE schema_name NOT LIKE 'pg_temp_%' 
AND schema_name NOT LIKE 'pg_toast_temp_%'
ORDER BY 
    CASE 
        WHEN schema_name = 'public' THEN 1
        WHEN schema_name IN ('auth', 'storage', 'realtime', 'vault', 'cron', 'graphql', 'graphql_public', 'extensions', 'pgbouncer') THEN 2
        WHEN schema_name IN ('information_schema', 'pg_catalog', 'pg_toast') THEN 3
        ELSE 4
    END,
    schema_name;


| schema_name        | schema_owner      | category           | table_count | view_count | routine_count |
| ------------------ | ----------------- | ------------------ | ----------- | ---------- | ------------- |
| public             | pg_database_owner | Aplicación SPOON   | 52          | 3          | 58            |
| auth               | supabase_admin    | Sistema Supabase   | 20          | 0          | 4             |
| cron               | supabase_admin    | Sistema Supabase   | 2           | 0          | 7             |
| extensions         | postgres          | Sistema Supabase   | 0           | 2          | 55            |
| graphql            | supabase_admin    | Sistema Supabase   | 0           | 0          | 6             |
| graphql_public     | supabase_admin    | Sistema Supabase   | 0           | 0          | 1             |
| pgbouncer          | pgbouncer         | Sistema Supabase   | 0           | 0          | 0             |
| realtime           | supabase_admin    | Sistema Supabase   | 8           | 0          | 12            |
| storage            | supabase_admin    | Sistema Supabase   | 9           | 0          | 29            |
| vault              | supabase_admin    | Sistema Supabase   | 1           | 1          | 3             |
| information_schema | supabase_admin    | Sistema PostgreSQL | 4           | 65         | 11            |
| pg_catalog         | supabase_admin    | Sistema PostgreSQL | 64          | 78         | 3269          |
| pg_toast           | supabase_admin    | Sistema PostgreSQL | 0           | 0          | 0             |


CREATE TABLE IF NOT EXISTS public.business_hours (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    restaurant_id UUID REFERENCES public.restaurants(id) ON DELETE CASCADE,
    day_of_week TEXT NOT NULL, -- 'lunes', 'martes', etc.
    open_time TIME,
    close_time TIME,
    is_closed BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create restaurant_images table
CREATE TABLE IF NOT EXISTS public.restaurant_images (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    restaurant_id UUID REFERENCES public.restaurants(id) ON DELETE CASCADE,
    image_url TEXT NOT NULL,
    description TEXT,
    is_primary BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Security Policies (RLS) - Basic Setup
ALTER TABLE public.business_hours ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.restaurant_images ENABLE ROW LEVEL SECURITY;

-- Allow read access to everyone
CREATE POLICY "Public profiles are viewable by everyone" ON public.business_hours FOR SELECT USING (true);
CREATE POLICY "Public images are viewable by everyone" ON public.restaurant_images FOR SELECT USING (true);


